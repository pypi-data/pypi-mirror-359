var beaker_vue;(function(){var e={3840:function(e,t,n){"use strict";n.a(e,(async function(e,o){try{var r=n(66879),a=(n(86939),e([r]));r=(a.then?(await a)():a)[0];const i=r.A;t.A=i,o()}catch(i){o(i)}}))},4858:function(e,t,n){"use strict";n.r(t);var o=n(31601),r=n.n(o),a=n(76314),i=n.n(a),l=i()(r());l.push([e.id,".thoughts-pane[data-v-0c71e3c5]{padding:1rem;height:100%}.thoughts-pane[data-v-0c71e3c5],.thoughts-pane-content[data-v-0c71e3c5]{display:flex;flex-direction:column;overflow:hidden}.thoughts-pane-content[data-v-0c71e3c5]{flex:1;position:relative}.events-scroll-container[data-v-0c71e3c5]{flex:1;display:flex;flex-direction:column;gap:.5rem;color:var(--text-color);overflow-y:auto;scrollbar-width:thin;padding-right:.5rem;margin-right:.5rem;padding-top:.5rem}.no-thoughts-message[data-v-0c71e3c5]{text-align:center;padding:1rem;color:var(--text-color-secondary)}.pane-actions[data-v-0c71e3c5]{position:fixed;top:2.5rem;right:5rem;z-index:100}.magnifier-reference[data-v-0c71e3c5],.pane-actions>.p-button[data-v-0c71e3c5]{color:var(--text-color-secondary)}.magnifier-reference[data-v-0c71e3c5]{margin:0 .25rem}.progress-area[data-v-0c71e3c5]{width:100%;z-index:100}.progress-area .p-progressbar[data-v-0c71e3c5]{height:6px;width:40%;margin:1rem auto}",""]),t["default"]=l},13382:function(e,t,n){var o=n(54128);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=n(68459).A;r("d34dc3e0",o,!0,{sourceMap:!1,shadowMode:!1})},13716:function(e,t,n){var o=n(4858);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=n(68459).A;r("1fb0ba59",o,!0,{sourceMap:!1,shadowMode:!1})},24338:function(e,t,n){"use strict";n.r(t);var o=n(31601),r=n.n(o),a=n(76314),i=n.n(a),l=i()(r());l.push([e.id,".events{padding:.25rem 0;gap:.75rem}.events,.query{display:flex;flex-direction:column}.query{justify-content:space-between}.query-chat{align-items:flex-end;margin:.5rem 0}.input-request{padding:.5rem 0;display:flex;align-items:flex-start;width:90%}.input-request-wrapper{display:flex;width:100%}.input-request-chat-override{align-items:flex-end;width:100%}.input-request-chat-override .input-request-wrapper-chat{align-items:flex-end;flex-direction:column;margin-bottom:.5rem}.input-request-chat-override .input-request-wrapper-chat .p-inputgroup{width:100%;border:1px solid var(--yellow-500);box-shadow:0 0 4px var(--yellow-700);transition:box-shadow 1s linear;border-radius:var(--border-radius)}.input-request-chat-override .input-request-wrapper-chat .p-inputgroup button{background-color:var(--surface-b);border-color:var(--surface-border);color:var(--text-color);border-left:0}.input-request-chat-override .input-request-wrapper-chat .p-inputgroup input{border-color:var(--yellow-500)}.llm-prompt-container{display:flex;flex-direction:column;background-color:var(--surface-c);border-radius:var(--border-radius)}.llm-prompt-container-chat{width:-moz-fit-content;width:fit-content;max-width:80%;align-self:flex-end;background-color:var(--surface-d)}.llm-prompt-text{margin-left:1rem;padding:.5rem;white-space:pre-wrap;width:-moz-fit-content;width:fit-content}.llm-prompt-text-chat{margin-left:.5rem;margin-right:.5rem}.event-container{padding:0;border-radius:6px;margin-bottom:.25rem}.query-answer-chat-override{padding-left:1rem;padding-right:1rem;border-radius:var(--border-radius);max-width:80%;width:-moz-fit-content;width:fit-content;background-color:var(--surface-c)}.prompt-input-container{display:flex;flex-direction:row;margin:.25rem 0 .25rem .25rem}.prompt-input{flex:1;width:100%}.prompt-controls{display:flex;flex-direction:column;gap:.5em;margin:.5em}.expand-thoughts-button{display:flex;gap:.15rem;cursor:pointer;margin:auto;justify-content:space-between;padding:.75rem;width:100%;max-width:80%;border:1px solid var(--surface-b);border-radius:var(--border-radius)}.expand-thoughts-button.expanded,.expand-thoughts-button:hover{background-color:var(--surface-b)}[data-theme=dark] .expand-thoughts-button{border:1px solid var(--surface-a)}[data-theme=dark] .expand-thoughts-button.expanded,[data-theme=dark] .expand-thoughts-button:hover{background-color:var(--surface-a)}.expand-thoughts-button>div{flex:1}.expand-thoughts-button>button{align-self:center}@keyframes sparkle-spin-bounce{0%{transform:rotate(0deg)}50%{transform:rotate(1turn)}60%{transform:rotate(1turn) translateY(-5px)}70%{transform:rotate(1turn) translateY(0)}80%{transform:rotate(1turn) translateY(-3px)}90%{transform:rotate(1turn) translateY(0)}to{transform:rotate(1turn)}}.animate-sparkles{display:inline-block;animation:sparkle-spin-bounce 2s ease-in-out infinite;transform-origin:center}",""]),t["default"]=l},24823:function(e,t,n){var o=n(31821);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=n(68459).A;r("4c89bf90",o,!0,{sourceMap:!1,shadowMode:!1})},29300:function(e,t,n){"use strict";n.d(t,{A:function(){return A}});n(18111),n(22489),n(61701);var o=n(56768),r=n(90144),a=n(76126),i=n(42775),l=n(45130),s=n(24349),u=(0,o.pM)({__name:"ChatQueryCellEvent",props:["event","parentQueryCell"],setup(e){const t=(0,r.KR)(!1),n=e,a=e=>{e.stopPropagation(),t.value=!t.value};return(e,u)=>((0,o.uX)(),(0,o.Wv)(s.A,{event:n.event,"parent-query-cell":n.parentQueryCell,"code-styles":t.value?"":"code-cell-collapsed","should-hide-answered-questions":!0},{"code-cell-controls":(0,o.k6)((()=>[(0,o.bF)((0,r.R1)(i.A),{icon:t.value?"pi pi-window-maximize":"pi pi-window-minimize",size:"small",class:"code-cell-toggle-button",onClick:(0,l.D$)(a,["stop"]),title:t.value?"Expand code cell":"Shrink code cell"},null,8,["icon","title"])])),_:1},8,["event","parent-query-cell","code-styles"]))}});n(37639);const c=u;var d=c,p=n(3501);const f={class:"thoughts-pane"},v={key:0},h={key:0},m={key:1},g={key:1,class:"thoughts-pane-content"},b={class:"pane-actions"},y={class:"events-scroll-container"},k={key:0,class:"no-thoughts-message"},w={key:0,class:"progress-area"};var x=(0,o.pM)({__name:"AgentActivityPane",props:{isChatEmpty:{type:Boolean}},emits:["scrollToMessage"],setup(e,{emit:t}){const n=t,l=e,s=(0,o.WQ)("activeQueryCell"),u=(0,o.EW)((()=>!(0,p.d)(s.value?.events||[]))),c=(0,o.EW)((()=>s.value?s.value?.events||[]:null)),x=()=>{n("scrollToMessage")},_=(0,o.EW)((()=>c.value?c.value.filter((e=>!["user_answer","response"].includes(e.type))).map(((e,t,n)=>{const o=t===n.length-1,r="user_question"===e.type&&o;return r&&u.value?{...e,waitForUserInput:!0}:e})):[])),R=(0,o.EW)((()=>{if(!c.value||u.value)return!1;const e=1===c.value.length&&"response"===c.value[0].type;return"idle"===s.value?.status&&e}));return(e,t)=>{const n=(0,o.gN)("tooltip"),c=(0,o.gN)("autoscroll");return(0,o.uX)(),(0,o.CE)("div",f,[(0,r.R1)(s)?((0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",b,[(0,o.bo)((0,o.bF)((0,r.R1)(i.A),{icon:"pi pi-arrow-circle-right",text:"",onClick:x},null,512),[[n,"Scroll to related user message.",void 0,{bottom:!0}]])]),(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",y,[R.value?((0,o.uX)(),(0,o.CE)("div",k,t[1]||(t[1]=[(0,o.Lk)("em",null,"No agent activity from this query.",-1)]))):((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(_.value,((e,t)=>((0,o.uX)(),(0,o.Wv)(d,{key:`${t}-${(0,r.R1)(s).id}`,event:e,"parent-query-cell":(0,r.R1)(s)},null,8,["event","parent-query-cell"])))),128))])),[[c]]),u.value?((0,o.uX)(),(0,o.CE)("div",w,[(0,o.bF)((0,r.R1)(a.A),{mode:"indeterminate"})])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",v,[l.isChatEmpty?((0,o.uX)(),(0,o.CE)("span",h," Start a conversation to view Beaker's activity as you interact with it. ")):((0,o.uX)(),(0,o.CE)("em",m,t[0]||(t[0]=[(0,o.eW)("Select "),(0,o.Lk)("i",{class:"pi pi-search magnifier-reference"},null,-1),(0,o.eW)(" agent activity from the conversation to view details.")])))]))])}}}),_=(n(13716),n(71241));const R=(0,_.A)(x,[["__scopeId","data-v-0c71e3c5"]]);var A=R},31821:function(e,t,n){"use strict";n.r(t);var o=n(31601),r=n.n(o),a=n(76314),i=n.n(a),l=i()(r());l.push([e.id,".cell-container{position:relative;display:flex;flex:1;flex-direction:column;z-index:3;overflow:auto}.flex-background{flex:1}.chat-help-text-display{margin-bottom:1rem}",""]),t["default"]=l},37639:function(e,t,n){var o=n(88173);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=n(68459).A;r("10f7a5ca",o,!0,{sourceMap:!1,shadowMode:!1})},47224:function(e,t,n){var o=n(24338);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=n(68459).A;r("47fdd85e",o,!0,{sourceMap:!1,shadowMode:!1})},54128:function(e,t,n){"use strict";n.r(t);var o=n(31601),r=n.n(o),a=n(76314),i=n.n(a),l=i()(r());l.push([e.id,'.left-panel .left .spacer,.spacer.left,.spacer.right{display:none}.sidemenu-container.left{min-width:0!important}.chat-container{margin-left:auto;margin-right:auto;flex:0 0 100%;padding-right:1rem;padding-left:1rem;display:flex;flex-direction:column;max-width:1260px;width:100%}.chat-layout{display:flex;flex-direction:row;height:100%}div.code-cell-output-box div.output-collapse-box{display:none}.jp-RenderedImage img{width:100%}div.footer-menu-bar{border-radius:0;padding-left:0}.sidemenu-menu-selection.left{border-top:none;border-bottom:none;border-left:none}.title h4{text-overflow:"clip";overflow:hidden;text-wrap:nowrap}div.status-container{min-width:0}',""]),t["default"]=l},66879:function(e,t,n){"use strict";n.a(e,(async function(e,o){try{n.d(t,{A:function(){return r.A}});var r=n(78934),a=e([r]);r=(a.then?(await a)():a)[0],o()}catch(i){o(i)}}))},67184:function(e,t,n){"use strict";n.a(e,(async function(e,o){try{n.r(t);var r=n(45130),a=n(99119),i=n(18648),l=n(26883),s=n(85413),u=n(5241),c=n(8271),d=n(419),p=n(22187),f=n(3840),v=n(98124),h=n(31577),m=(n(96153),n(17198),n(47997)),g=e([f]);f=(g.then?(await g)():g)[0];const b=m.PageConfig.getBaseUrl();(async()=>{const e=m.URLExt.join(b,"/config"),t=await fetch(e),n=await t.json(),o=(0,r.Ef)(f.A,{config:n});o.use(a.Ay),o.use(l.A),o.use(s.A),o.use(u.A),o.use(d.Ay),o.use(p.A),o.directive("tooltip",i.A),o.directive("focustrap",c.A),o.directive("keybindings",h.c),o.directive("autoscroll",v.n),o.mount("#app")})(),o()}catch(b){o(b)}}))},73523:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var o=n(56768),r=n(90144);const a={class:"cell-container"},i={class:"flex-background"},l={class:"chat-help-text-display query-answer-chat-override"};var s=(0,o.pM)({__name:"ChatPanel",props:["cellMap"],setup(e){const t=(0,o.WQ)("session"),n=e;return(e,s)=>((0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",i,[(0,o.RG)(e.$slots,"notebook-background")]),(0,o.Lk)("span",l,[(0,o.RG)(e.$slots,"help-text")]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,r.R1)(t).notebook.cells,((e,t)=>((0,o.uX)(),(0,o.Wv)((0,o.$y)(n.cellMap[e.cell_type]),{cell:e,key:t,class:"beaker-chat-cell"},null,8,["cell"])))),128))]))}});n(24823);const u=s;var c=u},78667:function(e,t,n){"use strict";n.r(t);var o=n(31601),r=n.n(o),a=n(76314),i=n.n(a),l=i()(r());l.push([e.id,".agent-input-card .p-card-body .p-card-content{padding:0}.agent-query-container{background-color:var(--surface-b)}.agent-query-container div{padding:0}.agent-query-container-chat{width:100%;align-self:flex-end;margin-top:.175rem;margin-bottom:.25rem}.query-input-container{display:flex;align-items:flex-start;align-self:flex-end;margin-bottom:0;padding:0}.query-input-container textarea{margin-bottom:0}.agent-submit-button{flex:0 1 3rem;align-self:flex-end;height:3rem}",""]),t["default"]=l},78934:function(e,t,n){"use strict";n.a(e,(async function(e,o){try{n(44114),n(18111),n(61701);var r=n(56768),a=n(90144),i=n(45130),l=n(48356),s=n(91954),u=n(73523),c=n(25083),d=n(96437),p=n(73845),f=n(51431),v=n(6595),h=n(65005),m=n(85572),g=n(68384),b=n(44543),y=n(66040),k=n(60485),w=n(21972),x=n(85029),_=n(46365),R=n(63630),A=n(40619),C=n(92605),q=n(18171),E=n(29300),F=n(66671),M=e([_]);_=(M.then?(await M)():M)[0];const j={class:"chat-layout"},S={class:"chat-container"},W=["innerHTML"],L={key:0,class:"spacer right"};t.A=(0,r.pM)({__name:"ChatInterface",props:["config","connectionSettings","sessionName","sessionId","defaultKernel","renderers"],setup(e){const t=(0,a.KR)(),n=(0,a.KR)(!1),{theme:o,toggleDarkMode:M}=(0,r.WQ)("theme"),P=(0,r.WQ)("beakerAppConfig");P.setPage("chat");const X=(0,a.KR)(),O=(0,a.KR)(),Q=(0,a.KR)([]),K=(0,a.KR)([]),I=(0,a.KR)(null),$=(0,a.KR)(),T=(0,a.KR)(),z=(0,a.KR)(!1),N=(0,r.EW)((()=>t?.value?.beakerSession)),D=(0,r.EW)((()=>{const e=N.value?.session?.notebook?.cells??[];return 0===e.length})),B=(0,r.EW)((()=>{const e=N.value?.session?.notebook?.cells??[];if(0==e.length)return!1;const t=e[e.length-1];return"query"===t?.cell_type&&"awaiting_input"===t?.status})),H=()=>{I.value=null},V=()=>{const e=document.querySelector(`[data-cell-id="${I.value?.id}"]`);e&&e.scrollIntoView({behavior:"smooth"})};(0,r.wB)(I,(e=>{if(!X.value)return;const t=Boolean(X.value.getSelectedPanelInfo());e?X.value.selectPanel("agent-actions"):t&&X.value.hidePanel()}));const U=(0,r.EW)((()=>{const e=[{type:"button",command:()=>{window.confirm("This will reset your entire session, clearing the notebook and removing any updates to the environment. Proceed?")&&N.value.session.reset()},icon:"refresh",label:"Reset Session"}];if(!P?.config?.pages||Object.hasOwn(P.config.pages,"notebook")){const t="/"+(P?.config?.pages?.notebook?.default?"":"notebook")+window.location.search;e.push({type:"link",href:t,component:v.A,componentStyle:{fill:"currentColor",stroke:"currentColor",height:"1rem",width:"1rem"},label:"Navigate to notebook view"})}return e.push({type:"button",icon:"dark"===o.mode?"sun":"moon",command:M,label:`Switch to ${"dark"===o.mode?"light":"dark"} mode.`},{type:"link",href:"https://jataware.github.io/beaker-kernel",label:"Beaker Documentation",icon:"book",rel:"noopener",target:"_blank"},{type:"link",href:"https://github.com/jataware/beaker-kernel",label:"Check us out on Github",icon:"github",rel:"noopener",target:"_blank"}),e})),G=e=>{N.value?.session.loadNotebook(e)},Y=new URLSearchParams(window.location.search),J=Y.has("session")?Y.get("session"):"chat_dev_session",Z=e,ee=[...w.dn.map((e=>new x.hC(e))).map(_.ft),_.oH,_.En,_.nk],te={code:h.A,markdown:g.A,query:m.A,raw:b.A},ne=(0,a.KR)("connecting"),oe=e=>{if("preview"===e.header.msg_type)O.value=e.content;else if("debug_event"===e.header.msg_type)Q.value.push({type:e.content.event,body:e.content.body,timestamp:e.header.date});else if("chat_history"===e.header.msg_type)$.value=e.content;else if("context_setup_response"===e.header.msg_type||"context_info_response"===e.header.msg_type){var t;"context_setup_response"===e.header.msg_type?t=e.content.datasources:"context_info_response"===e.header.msg_type&&(t=e.content.info.datasources),void 0===t&&(t=[]),K.value.splice(0,K.value.length,...t)}},re=e=>{ne.value="idle"==e?"connected":e},ae=async()=>{const e=N.value.session.sendBeakerMessage("reset_request",{});await e};return(0,r.Gt)("activeQueryCell",I),(e,o)=>{const v=(0,r.gN)("autoscroll");return(0,r.uX)(),(0,r.Wv)(l.A,{title:e.$tmpl._("short_title","Beaker Chat"),ref_key:"beakerInterfaceRef",ref:t,"header-nav":U.value,connectionSettings:Z.config,sessionName:"chat_interface",sessionId:(0,a.R1)(J),defaultKernel:"beaker_kernel",renderers:ee,onSessionStatusChanged:re,onIopubMsg:oe,onOpenFile:G,"style-overrides":["chat"]},{"left-panel":(0,r.k6)((()=>[(0,r.bF)(c.A,{position:"left",highlight:"line",expanded:!1,initialWidth:"25vi",maximized:n.value},{default:(0,r.k6)((()=>[(0,r.bF)(d.A,{label:"Context Info",icon:"pi pi-home"},{default:(0,r.k6)((()=>[(0,r.bF)(p.A)])),_:1}),(0,r.bF)(d.A,{id:"files",label:"Files",icon:"pi pi-folder","no-overflow":"",lazy:!0},{default:(0,r.k6)((()=>[(0,r.bF)(y.A,{ref:"filePanelRef",onOpenFile:G,onPreviewFile:o[0]||(o[0]=(e,t)=>{T.value={url:e,mimetype:t},z.value=!0,X.value.selectPanel("file-contents")})},null,512)])),_:1}),(0,r.bF)(d.A,{icon:"pi pi-comments",label:"Chat History"},{default:(0,r.k6)((()=>[(0,r.bF)((0,a.R1)(f.P),{"chat-history":$.value},null,8,["chat-history"])])),_:1}),K.value.length>0?((0,r.uX)(),(0,r.Wv)(d.A,{key:0,id:"integrations",label:"Integrations",icon:"pi pi-database"},{default:(0,r.k6)((()=>[(0,r.bF)(F.A,{datasources:K.value},null,8,["datasources"])])),_:1})):(0,r.Q3)("",!0),"server"!==Z.config.config_type?((0,r.uX)(),(0,r.Wv)(d.A,{key:1,id:"config",label:`${e.$tmpl._("short_title","Beaker")} Config`,icon:"pi pi-cog",lazy:!0,position:"bottom"},{default:(0,r.k6)((()=>[(0,r.bF)(k.Ay,{ref:"configPanelRef",onRestartSession:ae},null,512)])),_:1},8,["label"])):(0,r.Q3)("",!0)])),_:1},8,["maximized"])])),"right-panel":(0,r.k6)((()=>[(0,r.bF)(c.A,{ref_key:"rightSideMenuRef",ref:X,position:"right",highlight:"line",expanded:!0,"initial-width":"35vw",onPanelHide:H},{default:(0,r.k6)((()=>[(0,r.bF)(d.A,{label:"Agent Activity",id:"agent-actions",icon:"pi pi-lightbulb",position:"top",selected:!0},{default:(0,r.k6)((()=>[(0,r.bF)(E.A,{onScrollToMessage:V,"is-chat-empty":D.value},null,8,["is-chat-empty"])])),_:1}),(0,r.bF)(d.A,{label:"Preview",icon:"pi pi-eye","no-overflow":""},{default:(0,r.k6)((()=>[(0,r.bF)(A.A,{previewData:O.value},null,8,["previewData"])])),_:1}),(0,r.bF)(d.A,{id:"file-contents",label:"File Contents",icon:"pi pi-file beaker-zoom","no-overflow":""},{default:(0,r.k6)((()=>[(0,r.bF)(R.A,{url:T.value?.url,mimetype:T.value?.mimetype},null,8,["url","mimetype"])])),_:1}),(0,r.bF)(d.A,{id:"media",label:"Graphs and Images",icon:"pi pi-chart-bar","no-overflow":""},{default:(0,r.k6)((()=>[(0,r.bF)(C.A)])),_:1}),(0,r.bF)(d.A,{id:"kernel-logs",label:"Logs",icon:"pi pi-list",position:"bottom"},{default:(0,r.k6)((()=>[(0,r.bo)((0,r.bF)(q.A,{entries:Q.value,onClearLogs:o[1]||(o[1]=e=>Q.value.splice(0,Q.value.length))},null,8,["entries"]),[[v]])])),_:1})])),_:1},512)])),default:(0,r.k6)((()=>[(0,r.Lk)("div",j,[(0,r.Lk)("div",S,[(0,r.bo)(((0,r.uX)(),(0,r.Wv)(u.A,{"cell-map":te},{"help-text":(0,r.k6)((()=>[(0,r.Lk)("div",{innerHTML:e.$tmpl._("chat_welcome_html","\n                                <p>Hi! I'm your Beaker Agent and I can help you do programming and software engineering tasks.</p>\n                                <p>Feel free to ask me about whatever the context specializes in..</p>\n                                <p>\n                                    On top of answering questions, I can actually run code in a python environment, and evaluate the results.\n                                    This lets me do some pretty awesome things like: web scraping, or plotting and exploring data.\n                                    Just shoot me a message when you're ready to get started.\n                                </p>\n                            ")},null,8,W)])),"notebook-background":(0,r.k6)((()=>o[2]||(o[2]=[(0,r.Lk)("div",{class:"welcome-placeholder"},null,-1)]))),_:1})),[[v]]),(0,r.bo)((0,r.bF)(s.A,{class:"agent-query-container agent-query-container-chat",placeholder:e.$tmpl._("agent_query_prompt","Message to the agent")},null,8,["placeholder"]),[[i.aG,!B.value]])]),n.value?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",L))])])),_:1},8,["title","header-nav","connectionSettings","sessionId"])}}}),o()}catch(j){o(j)}}))},79145:function(e,t,n){var o=n(78667);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=n(68459).A;r("73c21a81",o,!0,{sourceMap:!1,shadowMode:!1})},85572:function(e,t,n){"use strict";n.d(t,{A:function(){return S}});n(18111),n(22489),n(61701),n(13579);var o=n(56768),r=n(90144),a=n(24232),i=n(45130),l=n(42775),s=n(31254),u=n(52211),c=n(23421),d=n(24349),p=n(67391),f=n(3501),v=n(14076),h=n(85029);const m={class:"llm-query-cell"},g={class:"llm-prompt-container llm-prompt-container-chat"},b={class:"prompt-input-container"},y={class:"prompt-controls"},k=["data-cell-id"],w={key:0,class:"event-container"},x={class:"events"},_={class:"white-space-nowrap",style:{display:"flex","align-items":"center","font-weight":"400","font-family":"'Courier New', Courier, monospace","font-size":"0.8rem",color:"var(--text-color-secondary)"}},R={style:{display:"flex","flex-direction":"column"}},A={class:"white-space-nowrap",style:{display:"flex","align-items":"center","font-weight":"400","font-family":"'Courier New', Courier, monospace","font-size":"0.8rem",color:"var(--text-color-secondary)"}},C={key:1,class:"query-answer-chat-override"},q={key:1,class:"input-request-chat-override"},E={class:"input-request-wrapper input-request-wrapper-chat"},F={modelClass:h.PH,icon:"pi pi-sparkles"};var M=(0,o.pM)({...F,__name:"ChatQueryCell",props:["index","cell"],setup(e,{expose:t}){const n=e,{cell:h,isEditing:F,promptEditorMinHeight:M,promptText:j,response:S,textarea:W,events:L,execute:P,enter:X,exit:O,clear:Q,respond:K}=(0,v.j)(n);let I;(function(e){e[e["NotExecuted"]=0]="NotExecuted",e[e["Running"]=1]="Running",e[e["Done"]=2]="Done"})(I||(I={}));const $=(0,o.WQ)("activeQueryCell"),T=(0,o.WQ)("beakerSession"),z=(0,o.nI)(),N=(0,o.EW)((()=>{const e="Thinking";if(L.value.length<1)return e;const t=L.value[L.value.length-1];if("thought"===t.type)return t.content.thought;{let n=2,o=L.value[L.value.length-n];if(void 0===o)return e;while("thought"!==o.type&&L.value.length>=n)n+=1,o=L.value[L.value.length-n];if("thought"===o.type){if("Thinking..."===o.content.thought&&"response"===t.type)return"Thinking...";const e={user_question:"(awaiting user input)",user_answer:"(answer received, thinking)",code_cell:"(code is now running)"};return e[t.type]?`${o.content.thought} ${e[t.type]}`:o.content.thought}return e}})),D=(e,t=!1)=>{const n=(0,r.ux)(h.value);if(t)return void($.value=n);const o=(0,r.ux)($.value);$.value=o?.id===n?.id?null:n},B=(0,o.EW)((()=>{const e=L.value.length;return"busy"===n.cell.status?I.Running:0===e?I.NotExecuted:(0,f.d)(L.value)?I.Done:I.Running}));(0,o.wB)(B,((e,t)=>{e===I.Running&&t!==I.Running&&D(null,!0)}));const H=(0,o.EW)((()=>n.cell?.events?.filter((e=>["user_question","user_answer"].includes(e.type))).map((e=>{var t;return t="user_question"===e.type?"query-answer-chat query-answer-chat-override":"llm-prompt-container llm-prompt-container-chat llm-prompt-text llm-prompt-text-chat",[e,t]})))),V=e=>"busy"===e.status,U=e=>{F.value||(M.value=e.target.clientHeight,F.value=!0)},G=(0,o.EW)((()=>H.value.some((([e])=>"user_answer"===e.type)))),Y=(e,t)=>{if("user_answer"!==e.type)return!1;const n=H.value.slice(t+1);return!n.some((([e])=>"user_answer"===e.type))};return t({execute:P,enter:X,exit:O,clear:Q,cell:h,editor:W}),(0,o.KC)((()=>{T.cellRegistry[h.value.id]=z.vnode})),(0,o.xo)((()=>{delete T.cellRegistry[h.value.id]})),(e,t)=>{const n=(0,o.gN)("focustrap");return(0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("div",{class:"query query-chat",onDblclick:U},[(0,o.Lk)("div",g,[(0,o.bo)((0,o.Lk)("div",b,[(0,o.bF)(p.A,{ref_key:"textarea",ref:W,class:"prompt-input",modelValue:(0,r.R1)(j),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,r.i9)(j)?j.value=e:null),style:(0,a.Tr)({minHeight:`${(0,r.R1)(M)}px`})},null,8,["modelValue","style"]),(0,o.Lk)("div",y,[(0,o.bF)((0,r.R1)(l.A),{label:"Submit",onClick:(0,r.R1)(P)},null,8,["onClick"]),(0,o.bF)((0,r.R1)(l.A),{label:"Cancel",onClick:t[1]||(t[1]=e=>{j.value=(0,r.R1)(h).source,F.value=!1})})])],512),[[i.aG,(0,r.R1)(F)]]),(0,o.Lk)("div",{style:(0,a.Tr)({visibility:(0,r.R1)(F)?"hidden":"visible",height:(0,r.R1)(F)?"0px":"auto",padding:(0,r.R1)(F)?"0px":"0.5rem"}),class:"llm-prompt-text llm-prompt-text-chat","data-cell-id":(0,r.R1)(h).id},(0,a.v_)((0,r.R1)(h).source),13,k)])],32),(0,r.R1)(L).length>0||(0,r.R1)(f.d)((0,r.R1)(L))||V((0,r.R1)(h))?((0,o.uX)(),(0,o.CE)("div",w,[(0,o.Lk)("div",x,[G.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,a.C4)(["expand-thoughts-button",{expanded:(0,r.R1)($)===(0,r.R1)(h)}]),onClick:D},[(0,o.Lk)("div",_,[(0,o.Lk)("i",{class:(0,a.C4)(["pi pi-sparkles",{"animate-sparkles":B.value===I.Running}]),style:{color:"var(--yellow-500)","font-size":"1.25rem","margin-right":"0.6rem"}},null,2),(0,o.eW)(" "+(0,a.v_)(N.value),1)]),(0,o.bF)((0,r.R1)(l.A),{icon:(0,r.R1)($)===(0,r.R1)(h)?"pi pi-times":"pi pi-search",text:"",rounded:"",style:{"background-color":"var(--surface-c)",color:"var(--text-color-secondary)",width:"2rem",height:"2rem",padding:"0"}},null,8,["icon"])],2)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(H.value,(([e,t],n)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:e.id},[(0,o.Lk)("div",R,[(0,o.bF)(d.A,{event:e,"parent-query-cell":(0,r.R1)(h),class:(0,a.C4)(t)},null,8,["event","parent-query-cell","class"])]),Y(e,n)?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,a.C4)(["expand-thoughts-button",{expanded:(0,r.R1)($)===(0,r.R1)(h)}]),onClick:D},[(0,o.Lk)("div",A,[(0,o.Lk)("i",{class:(0,a.C4)(["pi pi-sparkles",{"animate-sparkles":B.value===I.Running}]),style:{color:"var(--yellow-500)","font-size":"1.25rem","margin-right":"0.6rem"}},null,2),(0,o.eW)(" "+(0,a.v_)(N.value),1)]),(0,o.bF)((0,r.R1)(l.A),{icon:(0,r.R1)($)===(0,r.R1)(h)?"pi pi-times":"pi pi-search",text:"",rounded:"",style:{"background-color":"var(--surface-c)",color:"var(--text-color-secondary)",width:"2rem",height:"2rem",padding:"0"}},null,8,["icon"])],2)):(0,o.Q3)("",!0)],64)))),128)),(0,r.R1)(f.d)((0,r.R1)(L))?((0,o.uX)(),(0,o.CE)("div",C,[(0,o.bF)(d.A,{event:(0,r.R1)(h)?.events[(0,r.R1)(h)?.events.length-1],"parent-query-cell":(0,r.R1)(h)},null,8,["event","parent-query-cell"])])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0),"awaiting_input"===(0,r.R1)(h).status?(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",q,[(0,o.Lk)("div",E,[(0,o.bF)((0,r.R1)(s.A),null,{default:(0,o.k6)((()=>[(0,o.bF)((0,r.R1)(c.A),null,{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.Lk)("i",{class:"pi pi-exclamation-triangle"},null,-1)]))),_:1}),(0,o.bF)((0,r.R1)(u.A),{placeholder:"Reply to the agent",onKeydown:[(0,i.jR)((0,i.D$)((0,r.R1)(K),["exact","prevent"]),["enter"]),t[2]||(t[2]=(0,i.jR)((0,i.D$)((e=>e.target.blur()),["prevent","stop"]),["escape"])),t[3]||(t[3]=(0,i.jR)((0,i.D$)((()=>{}),["ctrl","stop"]),["enter"])),t[4]||(t[4]=(0,i.jR)((0,i.D$)((()=>{}),["shift","stop"]),["enter"]))],autoFocus:"",modelValue:(0,r.R1)(S),"onUpdate:modelValue":t[5]||(t[5]=e=>(0,r.i9)(S)?S.value=e:null)},null,8,["onKeydown","modelValue"]),(0,o.bF)((0,r.R1)(l.A),{icon:"pi pi-send",onClick:(0,r.R1)(K)},null,8,["onClick"])])),_:1})])])),[[n]]):(0,o.Q3)("",!0)])}}});n(47224);const j=M;var S=j},86939:function(e,t,n){"use strict";n(13382)},88173:function(e,t,n){"use strict";n.r(t);var o=n(31601),r=n.n(o),a=n(76314),i=n.n(a),l=i()(r());l.push([e.id,".code-cell-collapsed{max-height:200px;overflow-y:hidden}.code-cell-toggle-button{position:absolute;top:5.5rem;right:0;margin:0;width:2rem;height:2rem;padding:0;background:var(--surface-500);border-color:var(--surface-500)}.code-cell-toggle-button>.p-button-icon{font-weight:700}",""]),t["default"]=l},91954:function(e,t,n){"use strict";n.d(t,{A:function(){return p}});var o=n(56768),r=n(90144),a=n(45130),i=n(43985),l=n(42775),s=n(67391),u=n(31254),c=(0,o.pM)({__name:"AgentQuery",props:["placeholder"],emits:["select-cell","run-cell"],setup(e,{emit:t}){const n=(0,o.WQ)("beakerSession"),c=(0,r.KR)(""),d=e,p=(0,o.WQ)("session"),f=e=>{const t=p.notebook;if(!c.value.trim())return;if(1===t.cells.length){const e=t.cells[0];"code"===e.cell_type&&""===e.source&&null===e.execution_count&&0===e.outputs.length&&t.removeCell(0)}const r=p.addQueryCell(c.value);c.value="",(0,o.dY)((()=>{n.findNotebookCellById(r.id).execute()}))};return(e,t)=>((0,o.uX)(),(0,o.Wv)((0,r.R1)(i.A),{class:"agent-input-card"},{content:(0,o.k6)((()=>[(0,o.bF)((0,r.R1)(u.A),null,{default:(0,o.k6)((()=>[(0,o.bF)(s.A,{onKeydown:[(0,a.jR)((0,a.D$)(f,["exact","prevent"]),["enter"]),t[0]||(t[0]=(0,a.jR)((0,a.D$)((e=>e.target.blur()),["prevent","stop"]),["escape"]))],modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),placeholder:d.placeholder??"How can the agent help?"},null,8,["onKeydown","modelValue","placeholder"]),(0,o.bF)((0,r.R1)(l.A),{icon:"pi pi-send",outlined:"",onClick:f})])),_:1})])),_:1}))}});n(79145);const d=c;var p=d}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={id:o,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=function(e){e&&e.d<1&&(e.d=1,e.forEach((function(e){e.r--})),e.forEach((function(e){e.r--?e.r++:e()})))},a=function(n){return n.map((function(n){if(null!==n&&"object"===typeof n){if(n[e])return n;if(n.then){var a=[];a.d=0,n.then((function(e){i[t]=e,r(a)}),(function(e){i[o]=e,r(a)}));var i={};return i[e]=function(e){e(a)},i}}var l={};return l[e]=function(){},l[t]=n,l}))};n.a=function(n,i,l){var s;l&&((s=[]).d=-1);var u,c,d,p=new Set,f=n.exports,v=new Promise((function(e,t){d=t,c=e}));v[t]=f,v[e]=function(e){s&&e(s),p.forEach(e),v["catch"]((function(){}))},n.exports=v,i((function(n){var r;u=a(n);var i=function(){return u.map((function(e){if(e[o])throw e[o];return e[t]}))},l=new Promise((function(t){r=function(){t(i)},r.r=0;var n=function(e){e!==s&&!p.has(e)&&(p.add(e),e&&!e.d&&(r.r++,e.push(r)))};u.map((function(t){t[e](n)}))}));return r.r?l:i()}),(function(e){e?d(v[o]=e):c(f),r(s)})),s&&s.d<0&&(s.d=0)}}(),function(){var e=[];n.O=function(t,o,r,a){if(!o){var i=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],a=e[c][2];for(var l=!0,s=0;s<o.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,r,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if("object"===typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&"function"===typeof o.then)return o}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&r&&o;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){i[e]=function(){return o[e]}}));return i["default"]=function(){return o},n.d(a,i),a}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"static/js/"+e+"."+{100:"255c30b3",113:"3a218b1d",119:"971c21a8",252:"ddab0471",262:"6746907c",408:"68d3412d",422:"8e8856c8",538:"83e1af32",569:"b722aeec",577:"28b7c720",661:"baa1cb81",725:"23dab46f",727:"94b69b62",809:"e7a309e6",824:"9171ff12",859:"f1e6e7b5"}[e]+".js"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="beaker_vue:";n.l=function(o,r,a,i){if(e[o])e[o].push(r);else{var l,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+a){l=d;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+a),l.src=o),e[o]=[r];var p=function(t,n){l.onerror=l.onload=null,clearTimeout(f);var r=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.j=377}(),function(){n.p="/"}(),function(){n.b=document.baseURI||self.location.href;var e={377:0};n.f.j=function(t,o){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var a=new Promise((function(n,o){r=e[t]=[n,o]}));o.push(r[2]=a);var i=n.p+n.u(t),l=new Error,s=function(o){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var a=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,r[1](l)}};n.l(i,s,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,a,i=o[0],l=o[1],s=o[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(s)var c=s(n)}for(t&&t(o);u<i.length;u++)a=i[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self["webpackChunkbeaker_vue"]=self["webpackChunkbeaker_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504,996],(function(){return n(67184)}));o=n.O(o),beaker_vue=o})();
//# sourceMappingURL=chat.22479a69.js.map