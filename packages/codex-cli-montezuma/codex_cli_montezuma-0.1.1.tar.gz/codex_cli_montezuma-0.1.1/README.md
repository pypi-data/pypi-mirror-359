# Codex CLI ‚Äì Ferramentas de IA, APIs e Automa√ß√£o

[![PyPI](https://img.shields.io/pypi/v/codex-cli-montezuma)](https://pypi.org/project/codex-cli-montezuma/)

---

## üåê Documenta√ß√£o Multil√≠ngue | Multilingual Documentation

> **Selecione o idioma / Select your language:**
>
> - üáßüá∑ [Documenta√ß√£o em Portugu√™s (docs/pt/README.md)](docs/pt/README.md)
> - üá∫üá∏ [Documentation in English (docs/en/README.md)](docs/en/README.md)

---

> **√çndice R√°pido da Documenta√ß√£o (PT)**
> - [√çndice Visual](docs/indice_visual.md)
> - [Guia Global de Contribui√ß√£o](docs/guia_contribuicao.md)
> - [√çndice Geral](docs/indice_geral.md)
> - [Checklist de PR](docs/checklist_pr.md)
> - [Roadmap](docs/roadmap.md)
> - [Di√°rio de Bordo](docs/diario_de_bordo.md)
> - [Pr√≥xima Miss√£o](docs/proxima_missao.md)
> - [Guia de Testes](docs/guia_didatico/como_escrever_testes.md)
> - [Ferramentas Externas](docs/guia_didatico/ferramentas_externas.md)
> - [Documenta√ß√£o Autom√°tica](docs/guia_didatico/auto_documentacao_ferramentas.md)
> - [Leitura de Arquivos](docs/guia_didatico/ler_arquivo.md)
> - [Percep√ß√£o de Arquivos](docs/guia_didatico/percepcao_arquivos.md)
> - [pytest](docs/guia_didatico/pytest.md)

> **Quick Documentation Index (EN)**
> - [Visual Index](docs/en/indice_visual.md)
> - [Global Contribution Guide](docs/en/guia_contribuicao.md)
> - [General Index](docs/en/indice_geral.md)
> - [PR Checklist](docs/en/checklist_pr.md)
> - [Roadmap](docs/en/roadmap.md)
> - [Logbook](docs/en/diario_de_bordo.md)
> - [Next Mission](docs/en/proxima_missao.md)
> - [Testing Guide](docs/en/guia_didatico/como_escrever_testes.md)
> - [External Tools](docs/en/guia_didatico/ferramentas_externas.md)
> - [Automatic Documentation](docs/en/guia_didatico/auto_documentacao_ferramentas.md)
> - [File Reading](docs/en/guia_didatico/ler_arquivo.md)
> - [File Perception](docs/en/guia_didatico/percepcao_arquivos.md)
> - [pytest](docs/en/guia_didatico/pytest.md)

---

## Instala√ß√£o R√°pida

```bash
pip install codex-cli-montezuma
```

Acesse o pacote no PyPI: https://pypi.org/project/codex-cli-montezuma/

> **Nota:** Para uma instala√ß√£o completa com todas as depend√™ncias de desenvolvimento, use:
> 
> ```bash
> pip install -r requirements-dev.txt
> ```

## Funcionalidades Principais
- Armazena conversas e hist√≥rico em SQLite.
- Busca por palavras-chave no hist√≥rico.
- Intera√ß√£o com IA Gemini (Google) via CLI.
- Ferramentas integradas:
  - **escrever_arquivo**: cria/sobrescreve arquivos de texto.
  - **listar_arquivos**: lista arquivos e pastas do projeto.
  - **ler_arquivo**: l√™ arquivos de texto do projeto.
  - **consultar_wikipedia**: busca resumos na Wikipedia.
  - **consultar_stackoverflow**: busca perguntas e respostas t√©cnicas.
  - **consultar_google**: retorna os 3 primeiros resultados do Google Search.
  - **consultar_github**: mostra reposit√≥rios populares sobre um termo.
  - **consultar_wolframalpha**: responde perguntas matem√°ticas/cient√≠ficas.
- **Personaliza√ß√£o din√¢mica das respostas**: o agente adapta o tom, exemplos e dicas conforme o perfil do usu√°rio, tornando as respostas mais relevantes e alinhadas ao seu estilo e necessidades.

## Como Usar
1. Instale as depend√™ncias:
   ```bash
   pip install -r requirements-dev.txt
   ```
2. Configure as vari√°veis de ambiente necess√°rias:
   ```bash
   export GOOGLE_API_KEY='sua-api-key-gemini'
   export GOOGLE_SEARCH_API_KEY='sua-api-key-google-search'
   export GOOGLE_SEARCH_CX='seu-cx-google-search'
   export GITHUB_TOKEN='seu-token-github'  # (opcional, para mais requisi√ß√µes)
   export WOLFRAMALPHA_APPID='seu-appid-wolframalpha'
   ```
3. Inicialize o banco de dados:
   ```bash
   python database.py
   ```
4. Rode o CLI:
   ```bash
   python cli_agent.py
   ```

## Exemplos de Uso
- "Codex, crie um arquivo chamado 'exemplo.txt' com o conte√∫do 'ol√° mundo'"
- "Liste os arquivos da pasta docs"
- "Leia o arquivo README.md"
- "Pesquise no Google por 'Python asyncio'"
- "Busque reposit√≥rios sobre 'machine learning' no GitHub"
- "Qual a raiz quadrada de 144 no WolframAlpha?"
- "O que significa API segundo a Wikipedia?"
- "Como fa√ßo um request HTTP em Python? (Stack Overflow)"
- "Codex, me d√™ dicas personalizadas para estudar Python √† noite."

Veja mais exemplos e dicas em `docs/guia_didatico/ferramentas_externas.md`.

## Personaliza√ß√£o Din√¢mica
O Codex analisa seu hist√≥rico de uso, temas frequentes, hor√°rios e prefer√™ncias para adaptar:
- O tom das respostas (mais formal, objetivo, motivacional, etc.)
- Exemplos pr√°ticos alinhados ao seu perfil
- Dicas e sugest√µes contextuais

Voc√™ pode visualizar seu perfil com:
```bash
python cli_agent.py --perfil-usuario
```
E exportar o hist√≥rico para fine-tuning futuro:
```bash
python cli_agent.py --exportar-jsonl
```

## Roadmap
Consulte o [roadmap completo](docs/roadmap.md) para pr√≥ximos passos, vis√£o de futuro e evolu√ß√£o do projeto.



---

## Logging Estruturado e Depura√ß√£o

O Codex CLI utiliza logging estruturado e configur√°vel em todos os m√≥dulos, facilitando depura√ß√£o, auditoria e integra√ß√£o com ferramentas externas.

- O logging √© centralizado em `src/log_config.py`.
- Por padr√£o, logs s√£o enviados para o console, mas voc√™ pode configurar para arquivo ou outros destinos.
- N√≠veis suportados: DEBUG, INFO, WARNING, ERROR, CRITICAL.
- Todos os m√≥dulos usam `logger = logging.getLogger("codex.nome_do_modulo")` para rastreabilidade.

**Como customizar o logging:**

```python
from src.log_config import setup_logging
setup_logging(level="DEBUG", log_file="codex.log")
```

Ou defina vari√°veis de ambiente para ajustar o n√≠vel globalmente.

---

## Arquitetura e Boas Pr√°ticas
- C√≥digo modularizado em `src/` (core, integra√ß√µes, sugest√µes, banco, etc).
- Todas as fun√ß√µes principais usam type hints e docstrings.
- Logging estruturado em todos os fluxos.
- Testes automatizados com pytest e mocks para integra√ß√µes externas.
- Automa√ß√£o de build, testes e limpeza via Makefile e scripts.
- Extensibilidade planejada via sistema de plugins (em desenvolvimento).

---

## Para Desenvolvedores
- Siga o padr√£o de logging e type hints em todo novo c√≥digo.
- Consulte `src/log_config.py` para configurar logs.
- Veja exemplos de testes e patches em `tests/` e `docs/guia_didatico/como_escrever_testes.md`.
- Documenta√ß√£o de cada ferramenta √© gerada automaticamente em `docs/guia_didatico/auto_documentacao_ferramentas.md`.
- Para criar novas integra√ß√µes, siga o padr√£o de `src/integrations/` e registre no dicion√°rio `FERRAMENTAS`.

---

## Publica√ß√£o no PyPI e Uso como API

Veja o guia completo em [`docs/publicacao_pypi_api.md`](docs/publicacao_pypi_api.md).

### Resumo r√°pido:

**Publicar no PyPI:**
```bash
pip install build twine
python -m build
# Para o PyPI oficial:
twine upload dist/*
# Para o TestPyPI:
twine upload --repository testpypi dist/*
```

**Expor como API (FastAPI):**
```python
from fastapi import FastAPI, Request
from codex.cli_agent import main as codex_main

app = FastAPI()

@app.post("/codex/")
async def codex_endpoint(request: Request):
    data = await request.json()
    resposta = codex_main(**data)
    return {"resposta": resposta}
```

Veja detalhes, exemplos e links oficiais no guia acima.

---

## Sum√°rio das Mudan√ßas Recentes (2025)

- **Modulariza√ß√£o total:** C√≥digo reorganizado em `src/` com separa√ß√£o clara de integra√ß√µes, core, sugest√µes e banco.
- **Type hints e docstrings:** Todo o c√≥digo principal agora segue tipagem est√°tica e documenta√ß√£o de fun√ß√µes.
- **Logging estruturado:** Todos os m√≥dulos usam logging centralizado e configur√°vel via `src/log_config.py`.
- **Testes automatizados:** Cobertura total com pytest, incluindo mocks para integra√ß√µes externas.
- **Automa√ß√£o:** Makefile e scripts para build, testes, limpeza e gera√ß√£o de documenta√ß√£o.
- **Extensibilidade:** Estrutura pronta para plugins e novas integra√ß√µes.
- **Documenta√ß√£o did√°tica:** Todos os guias, exemplos e auto-documenta√ß√£o atualizados.
- **Personaliza√ß√£o din√¢mica:** Respostas do agente adaptam tom, exemplos e dicas conforme perfil do usu√°rio.
- **CLI aprimorado:** Sugest√µes inteligentes, exporta√ß√£o de hist√≥rico, relat√≥rios e perfil do usu√°rio.

Consulte o di√°rio de bordo (`docs/diario_de_bordo.md`) para hist√≥rico detalhado e decis√µes de arquitetura.

---

## Privacidade e Hist√≥rico

- O hist√≥rico de conversas do Codex CLI √© salvo **localmente** no arquivo `memoria_codex.db` na pasta onde o comando √© executado.
- **Apenas quem tem acesso ao arquivo .db pode ver o hist√≥rico.**
- O hist√≥rico **n√£o √© enviado para a internet** nem compartilhado entre usu√°rios diferentes, a menos que o arquivo seja copiado manualmente.
- Para resetar seu hist√≥rico, basta apagar o arquivo `memoria_codex.db`.
- Em ambientes multiusu√°rio, recomenda-se rodar o CLI em pastas separadas para cada usu√°rio.

> Para planos de seguran√ßa avan√ßada (criptografia, prote√ß√£o por senha, etc), consulte o roadmap ou entre em contato com o mantenedor.

---

Projeto did√°tico, aberto a sugest√µes e contribui√ß√µes!

## Licen√ßa
MIT License. Consulte o arquivo `LICENSE` para mais detalhes.
