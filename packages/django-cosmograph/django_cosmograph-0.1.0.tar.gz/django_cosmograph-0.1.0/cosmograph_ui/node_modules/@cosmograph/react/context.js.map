{"version":3,"file":"context.js","sources":["../src/context.tsx"],"sourcesContent":["import React, { createContext, useContext, ReactElement, useState } from 'react'\nimport { Cosmograph } from '@cosmograph/cosmograph'\nimport { CosmosInputLink, CosmosInputNode } from '@cosmograph/cosmos'\n\nexport interface CosmographProviderProps<N extends CosmosInputNode, L extends CosmosInputLink> {\n  nodes?: N[];\n  links?: L[];\n}\n\nexport type CosmographContextData<N extends CosmosInputNode, L extends CosmosInputLink> = {\n  cosmograph?: Cosmograph<N, L>;\n  nodes?: N[];\n  links?: L[];\n  initCosmograph: (cosmograph: Cosmograph<N, L>) => void;\n};\n\nexport const CosmographContext = createContext<CosmographContextData<any, any> | null>(null)\n\nexport function CosmographProvider<N extends CosmosInputNode, L extends CosmosInputLink> (\n  { children, nodes, links }: React.PropsWithChildren<CosmographProviderProps<N, L>>\n): ReactElement {\n  const [cosmograph, setCosmograph] = useState<Cosmograph<N, L>>()\n\n  const initCosmograph = (instance: Cosmograph<N, L>): void => {\n    setCosmograph(instance)\n  }\n\n  return (\n  // TODO: check generic type here\n    <CosmographContext.Provider value={{ cosmograph, nodes, links, initCosmograph } as CosmographContextData<N, L> }>\n      {children}\n    </CosmographContext.Provider>\n  )\n}\n\nexport function useCosmograph<N extends CosmosInputNode, L extends CosmosInputLink> (): CosmographContextData<N, L> | null {\n  const context = useContext(CosmographContext as React.Context<CosmographContextData<N, L>>)\n  if (!context) {\n    // todo\n    console.warn('useCosmograph must be used under CosmographProvider')\n    // throw new Error('useCosmograph must be used under CosmographProvider')\n  }\n  return context\n}\n"],"names":["CosmographContext","createContext","CosmographProvider","children","nodes","links","cosmograph","setCosmograph","useState","React","createElement","Provider","value","initCosmograph","instance","useCosmograph","context","useContext","console","warn"],"mappings":"6EAgBaA,EAAoBC,EAAsD,MAEjF,SAAUC,GACdC,SAAEA,EAAQC,MAAEA,EAAKC,MAAEA,IAEnB,MAAOC,EAAYC,GAAiBC,IAMpC,OAEEC,EAAAC,cAACV,EAAkBW,UAASC,MAAO,CAAEN,aAAYF,QAAOC,QAAOQ,eANzCC,IACtBP,EAAcO,EAAS,IAMpBX,EAGP,UAEgBY,IACd,MAAMC,EAAUC,EAAWjB,GAM3B,OALKgB,GAEHE,QAAQC,KAAK,uDAGRH,CACT"}