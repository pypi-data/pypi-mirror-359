(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3564],{22657:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poc/table-migration",function(){return n(26161)}])},812:function(e,t,n){"use strict";n.d(t,{D4:function(){return a.D4},MM:function(){return p},Ot:function(){return u},c6:function(){return r},cj:function(){return g},e$:function(){return l},fn:function(){return o},iC:function(){return f},nU:function(){return d},tB:function(){return c}});var s,r,a=n(19043);let i="An unexpected error occurred. Please try again.",l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if((0,a.Bw)(e)){if((0,a.hE)(e.data))return e.data.detail;if((0,a.cz)(e.data)){var n;let t=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,a.Dy)(e.data)||404===e.status&&(0,a.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function o(e){return"object"==typeof e&&null!=e&&"status"in e}function u(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function c(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:i};if((0,a.oK)(e))return{status:e.originalStatus,message:e.data};if((0,a.Bw)(e)){let{status:n}=e;return{status:n,message:l(e,t.message)}}return t},p=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(s=r||(r={})).GVL="gvl",s.AC="gacp",s.COMPASS="compass";let f={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},g=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},6675:function(e,t,n){"use strict";n.d(t,{ZS:function(){return l},a4:function(){return a}});var s=n(3228);let r=n(78780).u.injectEndpoints({endpoints:e=>({getPurposes:e.query({query:()=>"purposes"})})}),{useGetPurposesQuery:a}=r,i={purposes:{},special_purposes:{}},l=(0,s.P1)(r.endpoints.getPurposes.select(),e=>{let{data:t}=e;return t||i})},48347:function(e,t,n){"use strict";n.d(t,{W:function(){return o},m:function(){return u}});var s=n(24246),r=n(62051),a=n(32885);let{Text:i,Title:l}=r.AntTypography,o=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,r.qY0)();return{isOpen:e,onOpen:t,onClose:n}},u=e=>{let{isOpen:t,onClose:n,fidesKey:o}=e,{data:u,isLoading:c}=(0,a.ho)(o),d=(e,t)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{level:5,children:e}),(null==t?void 0:t.length)?(0,s.jsx)("div",{children:(0,s.jsx)(r.vyj,{size:[0,2],wrap:!0,children:null==t?void 0:t.map(e=>(0,s.jsx)(r.j8w,{children:e},e))})}):(0,s.jsxs)(i,{italic:!0,children:["no known ",e.toLowerCase()]})]});return(0,s.jsxs)(r.u_l,{isOpen:t,onClose:n,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,s.jsx)(r.ZAr,{}),(0,s.jsxs)(r.hzk,{maxWidth:"800px",children:[(0,s.jsx)(r.xBx,{children:u?null==u?void 0:u.name:"Vendor"}),(0,s.jsx)(r.fef,{children:c?(0,s.jsx)(r.jqI,{className:"h-80 w-full",align:"center",justify:"center",children:(0,s.jsx)(r.$jN,{})}):!!u&&(0,s.jsxs)(r.AntTypography,{children:[(0,s.jsx)(l,{level:5,children:"Purposes"}),Object.entries(u.purposes||{}).length>0?(0,s.jsx)(r.UQy,{allowMultiple:!0,children:Object.entries(u.purposes).map((e,t)=>{let[n]=e;return(0,s.jsx)(r.Qdk,{children:e=>{let{isExpanded:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.KFZ,{backgroundColor:t?"gray.50":"unset",children:[(0,s.jsx)(r.xuv,{flex:"1",textAlign:"left",children:n}),(0,s.jsx)(r.XEm,{})]}),(0,s.jsxs)(r.Hk3,{backgroundColor:"gray.50",children:[(0,s.jsx)(r.jqI,{className:"my-4",vertical:!0,children:d("Data uses",u.purposes[n].data_uses)}),(0,s.jsx)(r.jqI,{className:"my-4",vertical:!0,children:d("Legal basis",u.purposes[n].legal_bases)})]})]})}},t)})}):(0,s.jsx)(i,{italic:!0,children:"no known purposes"}),(0,s.jsx)("div",{className:"my-4",children:d("Features",u.features)}),(0,s.jsx)("div",{className:"my-4",children:d("Data categories",u.data_categories)})]})}),(0,s.jsxs)(r.mzw,{children:[(0,s.jsx)(r.wpx,{size:"small",onClick:n,children:"Close"}),(0,s.jsx)(r.LZC,{})]})]})]})}},26161:function(e,t,n){"use strict";n.r(t),n.d(t,{TableMigrationPOC:function(){return v}});var s=n(24246),r=n(25980),a=n(62051),i=n(86677),l=n(27378),o=n(16134),u=n(77830),c=n(6675),d=n(23923),p=n(48347),f=n(28079),g=n(32885);let{Content:j}=a.AntLayout,{Title:h,Paragraph:m}=a.AntTypography,x=[{text:"Advertising",value:"advertising"},{text:"Analytics",value:"analytics"},{text:"Functional",value:"functional"},{text:"Essential",value:"essential"}],y=[{text:"Consent",value:"Consent"},{text:"Legitimate Interest",value:"Legitimate interests"}],v=()=>{let{tcf:e,dictionaryService:t}=(0,r.hz)(),n=(0,i.useRouter)(),[v,b]=(0,l.useState)(""),[_,C]=(0,l.useState)(""),[w,k]=(0,l.useState)(25),[N,A]=(0,l.useState)(1),[S,O]=(0,l.useState)(),[L,I]=(0,l.useState)({});(0,f.fd)();let T=(0,o.C)(f.U3);(0,c.a4)();let F=(0,o.C)(c.ZS),z=(0,l.useMemo)(()=>[...Object.entries(F.purposes).map(e=>{let[t,n]=e;return{text:n.name,value:t}}),...Object.entries(F.special_purposes).map(e=>{let[t,n]=e;return{text:n.name,value:t}})],[F]),E=(0,l.useMemo)(()=>T.map(e=>({text:e.name||e.fides_key,value:e.fides_key})),[T]),{isOpen:P,onOpen:D,onClose:V}=(0,p.W)(),M=(()=>{let e=(L.data_uses||[]).map(e=>"data_uses=".concat(encodeURIComponent(e))).join("&");return{dataUses:e,legalBasis:(L.legal_bases||[]).map(e=>"legal_bases=".concat(encodeURIComponent(e))).join("&"),purposes:(L.tcf_purpose||[]).map(e=>"purposes=".concat(encodeURIComponent(e))).join("&"),specialPurposes:"",consentCategories:(L.consent_categories||[]).map(e=>"consent_category=".concat(encodeURIComponent(e))).join("&")}})(),{data:R,isLoading:U}=(0,g.de)({pageIndex:N,pageSize:w,search:_,...M}),q=(null==R?void 0:R.total)||0,B=(null==R?void 0:R.items)||[];(0,l.useEffect)(()=>{let e=setTimeout(()=>{C(v),1!==N&&A(1)},300);return()=>clearTimeout(e)},[v]);let G=(0,l.useCallback)(e=>{b(e.target.value)},[]),Z=e=>{O(e.fides_key),D()},K=[{title:"Vendor",dataIndex:"name",key:"name",filteredValue:L.name||null},...e?[{title:"TCF purpose",dataIndex:"data_uses",key:"tcf_purpose",render:e=>(0,s.jsxs)(a.j8w,{children:[e," ",1===e?"purpose":"purposes"]}),filters:z,filteredValue:L.tcf_purpose||null},{title:"Data use",dataIndex:"data_uses",key:"data_uses",render:e=>(0,s.jsxs)(a.j8w,{children:[e," ",1===e?"data use":"data uses"]}),filters:E,filteredValue:L.data_uses||null},{title:"Legal basis",dataIndex:"legal_bases",key:"legal_bases",render:e=>(0,s.jsxs)(a.j8w,{children:[e," ",1===e?"basis":"bases"]}),filters:y,filteredValue:L.legal_bases||null}]:[{title:"Categories",dataIndex:"consent_categories",key:"consent_categories",render:e=>(0,s.jsxs)(a.j8w,{children:[e," ",1===e?"category":"categories"]}),filters:x,filteredValue:L.consent_categories||null},{title:"Cookies",dataIndex:"cookies",key:"cookies",render:e=>(0,s.jsxs)(a.j8w,{children:[e," ",1===e?"cookie":"cookies"]})}]];return(0,s.jsxs)(j,{className:"overflow-auto px-10 py-6",children:[(0,s.jsx)(a.bue,{children:(0,s.jsx)(h,{children:"Table Migration POC"})}),(0,s.jsx)(m,{className:"mb-6",children:"This is a demonstration of migrating the ConsentManagementTable from TanStack Table to Ant Design Table with built-in filtering."}),P&&S?(0,s.jsx)(p.m,{isOpen:P,fidesKey:S,onClose:V}):null,(0,s.jsxs)(a.jqI,{justify:"space-between",align:"center",className:"mb-4",children:[(0,s.jsx)(a.uFc.Search,{placeholder:"Search",onSearch:e=>{b(e)},style:{width:300},value:v,onChange:G}),(0,s.jsxs)(a.vyj,{size:8,children:[(0,s.jsx)(d.Z,{buttonLabel:"Add vendors",onButtonClick:t?()=>{n.push(u.Gg)}:void 0}),(0,s.jsx)(a.wpx,{onClick:()=>{I({})},children:"Clear filters"})]})]}),(0,s.jsx)(a.V5H,{dataSource:B,columns:K,loading:U,rowKey:"id",pagination:{current:N,pageSize:w,total:q,showSizeChanger:!0,pageSizeOptions:[25,50,100]},onChange:(e,t)=>{A(e.current),k(e.pageSize),I(t)},onRow:e=>({onClick:()=>Z(e),style:{cursor:"pointer"}}),size:"small"})]})};t.default=v},19043:function(e,t,n){"use strict";n.d(t,{Bw:function(){return i},D4:function(){return r},Dy:function(){return o},XD:function(){return u},cz:function(){return c},hE:function(){return l},oK:function(){return a}});var s=n(76649);let r=e=>"error"in e,a=e=>(0,s.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,i=e=>(0,s.Ln)({status:"number",data:{}},e),l=e=>(0,s.Ln)({detail:"string"},e),o=e=>(0,s.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),u=e=>(0,s.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),c=e=>(0,s.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return s}});let s=(e,t)=>a(e,t),r=Symbol("SOME"),a=(e,t)=>"string"==typeof e?e===typeof t:Array.isArray(e)?r in e?e.some(e=>a(e,t)):!!Array.isArray(t)&&(0===e.length||t.every(t=>e.some(e=>a(e,t)))):"object"==typeof t&&null!==t&&Object.entries(e).every(([e,n])=>a(n,t[e]));class i{static narrow(e){return new i(t=>s(e,t))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let t=this.NF,n=e instanceof i?e.NF:e instanceof Function?e:t=>s(e,t);return new i(e=>t(e)&&n(e))}}new i(e=>!0)}},function(e){e.O(0,[401,3923,2888,9774,179],function(){return e(e.s=22657)}),_N_E=e.O()}]);