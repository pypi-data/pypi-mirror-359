(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2828],{85082:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/organization",function(){return t(5417)}])},77213:function(e,i,t){"use strict";t.d(i,{Z:function(){return p}});var n=t(24246),r=t(62051),a=t(88038),o=t.n(a),s=t(86677);t(27378);var l=t(25980),d=t(90867),c=t(77830),u=()=>{let e=(0,s.useRouter)();return(0,n.jsx)(r.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,n.jsxs)(r.xuv,{children:[(0,n.jsxs)(r.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,n.jsx)(r.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,n.jsx)(r.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,n.jsxs)(r.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:i,title:t,padded:a=!0,mainProps:c}=e,p=(0,l.hz)(),m=(0,s.useRouter)(),x="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,f=!(p.flags.privacyRequestsConfiguration&&x),{data:h}=(0,d.JE)(void 0,{skip:f}),{data:v}=(0,d.PW)(void 0,{skip:f}),g=p.flags.privacyRequestsConfiguration&&(!h||!v)&&x;return(0,n.jsxs)(r.kCb,{"data-testid":t,direction:"column",h:"100vh",children:[(0,n.jsxs)(o(),{children:[(0,n.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,n.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(r.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[g?(0,n.jsx)(u,{}):null,i]})]})}},58754:function(e,i,t){"use strict";var n=t(24246),r=t(62051),a=t(70788);i.Z=e=>{let{heading:i,breadcrumbItems:t,isSticky:o=!0,children:s,rightContent:l,style:d,...c}=e;return(0,n.jsxs)("div",{...c,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,n.jsxs)(r.jqI,{justify:"space-between",children:["string"==typeof i?(0,n.jsx)(r.lQT,{className:t||s?"pb-4":void 0,level:1,"data-testid":"page-heading",children:i}):i,l&&(0,n.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!t&&(0,n.jsx)(a.m,{className:s?"pb-4":void 0,items:t,"data-testid":"page-breadcrumb"}),s]})}},19904:function(e,i,t){"use strict";t.d(i,{Tg:function(){return o}});var n=t(24246),r=t(16134),a=t(31793);let o=e=>(0,r.C)(a.uu).filter(i=>e.includes(i)).length>0;i.ZP=e=>{let{scopes:i,children:t}=e;return o(i)?(0,n.jsx)(n.Fragment,{children:t}):null}},97181:function(e,i,t){"use strict";t.d(i,{d:function(){return d}});var n=t(24246),r=t(62051),a=t(34090),o=t(27378),s=t(46238),l=t(40324);let d=e=>{let{name:i,label:t,labelProps:d,tooltip:c,isRequired:u,layout:p="inline",helperText:m,...x}=e,[f,h,{setValue:v}]=(0,a.U$)(i),g=!!(h.touched&&h.error),[j,y]=(0,o.useState)("");f.value||"tags"!==x.mode&&"multiple"!==x.mode||(f.value=[]),"tags"===x.mode&&"string"==typeof f.value&&(f.value=[f.value]);let b="tags"===x.mode?(e,i)=>e?e.value!==j||f.value.includes(j)?x.optionRender?x.optionRender(e,i):e.label:'Create "'.concat(j,'"'):void 0:x.optionRender||void 0,k=e=>{y(e),x.onSearch&&x.onSearch(e)},C=(e,i)=>{v(e),x.onChange&&x.onChange(e,i)};return"inline"===p?(0,n.jsx)(r.NIc,{isInvalid:g,isRequired:u,children:(0,n.jsxs)(r.rjZ,{templateColumns:t?"1fr 3fr":"1fr",children:[t?(0,n.jsx)(l.__,{htmlFor:x.id||i,...d,children:t}):null,(0,n.jsxs)(r.jqI,{align:"center",children:[(0,n.jsxs)(r.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,n.jsx)(r.WPr,{...f,id:x.id||i,"data-testid":"controlled-select-".concat(f.name),...x,optionRender:b,onSearch:"tags"===x.mode?k:void 0,onChange:C,value:f.value||void 0,status:g?"error":void 0}),m&&(0,n.jsx)(r.Q6r,{children:m}),(0,n.jsx)(l.Bc,{isInvalid:g,message:h.error,fieldName:f.name})]}),(0,n.jsx)(s.b,{label:c,className:g?"mt-2 self-start":void 0})]})]})}):(0,n.jsx)(r.NIc,{isInvalid:g,isRequired:u,children:(0,n.jsxs)(r.gCW,{alignItems:"start",children:[(0,n.jsxs)(r.jqI,{align:"center",children:[t?(0,n.jsx)(l.__,{htmlFor:x.id||i,fontSize:"xs",my:0,mr:1,...d,children:t}):null,(0,n.jsx)(s.b,{label:c})]}),(0,n.jsx)(r.WPr,{...f,id:x.id||i,"data-testid":"controlled-select-".concat(f.name),...x,optionRender:b,onSearch:"tags"===x.mode?k:void 0,onChange:C,value:f.value||void 0,status:g?"error":void 0}),m&&(0,n.jsx)(r.Q6r,{style:{marginTop:0},children:m}),(0,n.jsx)(l.Bc,{isInvalid:g,message:h.error,fieldName:f.name})]})})}},812:function(e,i,t){"use strict";t.d(i,{D4:function(){return a.D4},MM:function(){return p},Ot:function(){return d},c6:function(){return r},cj:function(){return x},e$:function(){return s},fn:function(){return l},iC:function(){return m},nU:function(){return u},tB:function(){return c}});var n,r,a=t(19043);let o="An unexpected error occurred. Please try again.",s=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if((0,a.Bw)(e)){if((0,a.hE)(e.data))return e.data.detail;if((0,a.cz)(e.data)){var t;let i=null===(t=e.data.detail)||void 0===t?void 0:t[0];return"".concat(null==i?void 0:i.msg,": ").concat(null==i?void 0:i.loc)}if(409===e.status&&(0,a.Dy)(e.data)||404===e.status&&(0,a.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return i};function l(e){return"object"==typeof e&&null!=e&&"status"in e}function d(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function c(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let u=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:o};if((0,a.oK)(e))return{status:e.originalStatus,message:e.data};if((0,a.Bw)(e)){let{status:t}=e;return{status:t,message:s(e,i.message)}}return i},p=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(n=r||(r={})).GVL="gvl",n.AC="gacp",n.COMPASS="compass";let m={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},x=e=>{let i=e.split(".")[0];return"gacp"===i?"gacp":"gvl"===i?"gvl":"compass"}},8133:function(e,i,t){"use strict";var n=t(24246),r=t(62051);i.Z=e=>{let{title:i,children:t,isOpen:a,onClose:o,showCloseButton:s=!1,modalContentProps:l,footer:d,...c}=e;return(0,n.jsxs)(r.u_l,{isOpen:a,onClose:o,isCentered:!0,scrollBehavior:"inside",size:"xl",id:"add-modal",...c,children:[(0,n.jsx)(r.ZAr,{}),(0,n.jsxs)(r.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",...l,children:[s&&(0,n.jsx)(r.olH,{}),(0,n.jsx)(r.xBx,{p:0,children:(0,n.jsx)(r.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,n.jsx)(r.X6q,{as:"h3",size:"sm",children:i})})}),(0,n.jsx)(r.fef,{pb:4,overflow:"auto",children:t}),d&&(0,n.jsx)(r.mzw,{children:d})]})]})}},70788:function(e,i,t){"use strict";t.d(i,{m:function(){return d}});var n=t(24246),r=t(62051),a=t(79894),o=t.n(a),s=t(27378);let{Text:l}=r.AntTypography,d=e=>{let{items:i,...t}=e,a=(0,s.useMemo)(()=>null==i?void 0:i.map((e,t)=>{let a=t===i.length-1,s={...e},d=s.onClick&&!s.href;return("string"==typeof s.title&&(s.title=(0,n.jsx)(l,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,children:s.title})),d)?s.title=(0,n.jsx)(r.wpx,{type:"text",size:"small",icon:s.icon,onClick:s.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:s.title}):(s.icon&&(s.title=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"anticon align-text-bottom",children:s.icon}),s.title]})),s.href&&s.title&&(s.title=(0,n.jsx)(o(),{href:s.href,className:"ant-breadcrumb-link",children:s.title}),delete s.href)),s}),[i]);return(0,n.jsx)(r.zrq,{items:a,...t})}},5417:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return I}});var n=t(24246),r=t(19904),a=t(62051),o=t(25980),s=t(77213),l=t(58754),d=t(8133),c=t(34090),u=t(27378),p=t(55484),m=t(40324),x=t(812),f=t(46628),h=t(76174),v=t(97181);let g={identifier:"",name:"",client_id:"",client_secret:""},j=e=>({...e}),y=p.Ry().shape({provider:p.Z_().required().label("Provider"),name:p.Z_().required().label("Name"),client_id:p.Z_().required().label("Client ID"),client_secret:p.Z_().required().label("Client Secret")});var b=e=>{let{openIDProvider:i,onSuccess:t,onClose:r}=e,[o]=(0,h.Qc)(),[s]=(0,h.oP)(),l=(0,u.useMemo)(()=>i?j(i):g,[i]),d=(0,a.pmc)(),p=async(e,i)=>{(e=>{if((0,x.D4)(e)){let i=(0,x.e$)(e.error,"An unexpected error occurred while editing the SSO provider. Please try again.");d((0,f.Vo)(i))}else d((0,f.t5)("SSO provider configuration saved.")),r(),i.resetForm({}),t&&t(e.data)})(l.id?await s(e):await o(e))},b=[{label:"Azure",value:"azure"},{label:"Google",value:"google"},{label:"Okta",value:"okta"},{label:"Custom",value:"custom"}],k=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0})]}),C=()=>(0,n.jsx)(m.j0,{id:"domain",name:"domain",label:"Domain",tooltip:"Domain for your Okta provider",variant:"stacked",isRequired:!0}),_=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"userinfo_url",name:"user_info_url",label:"User Info URL",tooltip:"User Info URL for your provider",variant:"stacked",isRequired:!0})]});return(0,n.jsx)(c.J9,{initialValues:l,enableReinitialize:!0,onSubmit:p,validationSchema:y,children:e=>{let{dirty:i,isValid:t,values:o}=e;return(0,n.jsx)(c.l0,{"data-testid":"openIDProvider-form",children:(0,n.jsxs)(a.Kqy,{spacing:4,children:[(0,n.jsx)(v.d,{name:"provider",label:"Provider",options:b,layout:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"identifier",name:"identifier",label:"Identifier",tooltip:"Unique identifier for your provider",variant:"stacked",isRequired:!0,disabled:!!l.id}),(0,n.jsx)(m.j0,{id:"name",name:"name",label:"Name",tooltip:"Display name for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"client_id",name:"client_id",label:"Client ID",type:"password",tooltip:"Client ID for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"client_secret",name:"client_secret",label:"Client secret",type:"password",tooltip:"Client secret for your provider",variant:"stacked",isRequired:!0}),"azure"===o.provider&&k(),"okta"===o.provider&&C(),"custom"===o.provider&&_(),(0,n.jsxs)(a.xuv,{textAlign:"right",children:[(0,n.jsx)(a.wpx,{htmlType:"button","data-testid":"cancel-btn",className:"mr-3",onClick:r,children:"Cancel"}),(0,n.jsx)(a.wpx,{htmlType:"submit",type:"primary",disabled:!i||!t,"data-testid":"save-btn",children:"Save"})]})]})})}})},k=e=>{let{isOpen:i,onClose:t}=e;return(0,n.jsx)(d.Z,{isOpen:i,onClose:t,title:"Add SSO Provider",children:(0,n.jsx)(b,{onClose:t})})},C=e=>{let{isOpen:i,onClose:t,openIDProvider:r}=e;return(0,n.jsx)(d.Z,{isOpen:i,onClose:t,title:"Edit SSO Provider",children:(0,n.jsx)(b,{openIDProvider:r,onClose:t})})},_=e=>{let{openIDProvider:i}=e,{onOpen:t,isOpen:r,onClose:o}=(0,a.qY0)(),{onOpen:s,isOpen:l,onClose:d}=(0,a.qY0)(),c=(0,a.pmc)(),[u]=(0,h.rB)(),p=async()=>{let e=await u(i.identifier);if((0,x.D4)(e)){c((0,f.Vo)((0,x.e$)(e.error))),d();return}c((0,f.t5)("SSO provider deleted successfully")),d()};return(0,n.jsxs)(a.xuv,{alignItems:"center",borderRadius:"lg",borderWidth:"1px",display:"flex",height:"74px",marginBottom:"24px",padding:2,children:[(0,n.jsxs)(a.xuv,{display:"flex",alignItems:"center",children:[(0,n.jsx)(a.Eep,{src:"/images/oauth-login/".concat(i.provider,".svg"),alt:"".concat(i.provider," icon"),width:"40px",height:"40px"}),(0,n.jsxs)(a.xuv,{display:"flex",flexDirection:"column",children:[(0,n.jsx)(a.xvT,{fontSize:"medium",fontWeight:"bold",marginLeft:"16px",children:i.name}),(0,n.jsx)(a.xvT,{fontSize:"medium",marginLeft:"16px",children:i.identifier})]})]}),(0,n.jsxs)(a.xuv,{flexGrow:1,display:"flex",justifyContent:"flex-end",children:[(0,n.jsx)(a.wpx,{className:"mr-3",onClick:s,"data-testid":"remove-sso-provider-btn",children:"Remove"}),(0,n.jsx)(a.wpx,{className:"mr-3",onClick:t,"data-testid":"edit-sso-provider-btn",children:"Edit"})]}),(0,n.jsx)(C,{isOpen:r,onClose:o,openIDProvider:i}),(0,n.jsx)(a.cVQ,{isOpen:l,onClose:d,onConfirm:p,title:"Remove SSO provider",message:(0,n.jsx)(a.xvT,{children:"You are about to permanently remove this SSO provider. Are you sure you would like to continue?"})})]})},R=()=>{let{onOpen:e,isOpen:i,onClose:t}=(0,a.qY0)(),{data:r}=(0,h.qv)();return(0,n.jsxs)(a.xuv,{maxWidth:"600px",marginTop:"40px",children:[(0,n.jsxs)(a.X6q,{marginBottom:4,fontSize:"lg",display:"flex",justifyContent:"space-between",children:["SSO Providers",r&&r.length<5&&(0,n.jsx)(a.wpx,{onClick:e,"data-testid":"add-sso-provider-btn",children:"Add SSO Provider"})]}),(0,n.jsx)(a.xvT,{marginBottom:"30px",fontSize:"sm",children:"Use this area to add and manage SSO providers for you organization. Select “Add SSO provider” to add a new provider."}),null==r?void 0:r.map(e=>(0,n.jsx)(_,{openIDProvider:e},e.identifier)),(0,n.jsx)(k,{isOpen:i,onClose:t})]})},S=t(83265);let w={description:"",fides_key:S.Av,name:""},z=e=>({...e}),q=e=>({description:e.description,fides_key:e.fides_key,name:e.name}),O=p.Ry().shape({description:p.Z_().required().label("Description"),fides_key:p.Z_().required().label("Organization Fides Key"),name:p.Z_().required().label("Name")}),A=e=>{let{organization:i,onSuccess:t}=e,[r,o]=(0,S.$f)(),s=(0,u.useMemo)(()=>i?z(i):w,[i]),l=(0,a.pmc)(),d=async(e,i)=>{let n=q(e);(r=>{if((0,x.D4)(r)){let e=(0,x.e$)(r.error,"An unexpected error occurred while editing the organization. Please try again.");l((0,f.Vo)(e))}else l((0,f.t5)("Organization configuration saved.")),i.resetForm({values:e}),t&&t(n)})(await r(n))},p=!i||o.isLoading;return(0,n.jsx)(c.J9,{initialValues:s,enableReinitialize:!0,onSubmit:d,validationSchema:O,children:e=>{let{dirty:i,isValid:t}=e;return(0,n.jsx)(c.l0,{"data-testid":"organization-form",children:(0,n.jsxs)(a.Kqy,{spacing:4,children:[(0,n.jsx)(m.j0,{id:"fides_key",name:"fides_key",label:"Fides Key",disabled:!0,tooltip:"A unique key that identifies your organization. Not editable via UI.",variant:"stacked"}),(0,n.jsx)(m.j0,{id:"name",name:"name",label:"Name",disabled:p,tooltip:"User-friendly name for your organization, used in messaging to end-users and other public locations.",variant:"stacked"}),(0,n.jsx)(m.j0,{id:"description",name:"description",label:"Description",disabled:p,tooltip:"Short description of your organization, your services, etc.",variant:"stacked"}),(0,n.jsx)(a.xuv,{textAlign:"right",children:(0,n.jsx)(a.wpx,{htmlType:"submit",type:"primary",disabled:p||!i||!t,loading:p,"data-testid":"save-btn",children:"Save"})})]})})}})};var N=t(46420),I=()=>{let{data:e}=(0,S.GQ)(S.Av),{plus:i,flags:{ssoAuthentication:t}}=(0,o.hz)();return(0,n.jsx)(s.Z,{title:"Organization",children:(0,n.jsxs)(a.xuv,{"data-testid":"organization-management",children:[(0,n.jsx)(l.Z,{heading:"Organization Management"}),(0,n.jsxs)(a.xuv,{maxWidth:"600px",children:[(0,n.jsx)(a.xvT,{pb:6,fontSize:"sm",children:"Please use this section to manage your organization‘s details, including key information that will be recorded in the RoPA (Record of Processing Activities)."}),(0,n.jsx)(a.xuv,{background:"gray.50",padding:2,children:(0,n.jsx)(A,{organization:e})}),t&&i&&(0,n.jsx)(r.ZP,{scopes:[N.Sh.OPENID_PROVIDER_CREATE],children:(0,n.jsx)(R,{})})]})]})})}},19043:function(e,i,t){"use strict";t.d(i,{Bw:function(){return o},D4:function(){return r},Dy:function(){return l},XD:function(){return d},cz:function(){return c},hE:function(){return s},oK:function(){return a}});var n=t(76649);let r=e=>"error"in e,a=e=>(0,n.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,o=e=>(0,n.Ln)({status:"number",data:{}},e),s=e=>(0,n.Ln)({detail:"string"},e),l=e=>(0,n.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),d=e=>(0,n.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),c=e=>(0,n.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,i,t){"use strict";t.d(i,{Ln:function(){return n}});let n=(e,i)=>a(e,i),r=Symbol("SOME"),a=(e,i)=>"string"==typeof e?e===typeof i:Array.isArray(e)?r in e?e.some(e=>a(e,i)):!!Array.isArray(i)&&(0===e.length||i.every(i=>e.some(e=>a(e,i)))):"object"==typeof i&&null!==i&&Object.entries(e).every(([e,t])=>a(t,i[e]));class o{static narrow(e){return new o(i=>n(e,i))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let i=this.NF,t=e instanceof o?e.NF:e instanceof Function?e:i=>n(e,i);return new o(e=>i(e)&&t(e))}}new o(e=>!0)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=85082)}),_N_E=e.O()}]);