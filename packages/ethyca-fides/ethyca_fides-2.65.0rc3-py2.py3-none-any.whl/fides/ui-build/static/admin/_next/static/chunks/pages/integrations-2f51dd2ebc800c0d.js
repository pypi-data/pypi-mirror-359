(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{66726:function(e,t,n){var i=n(11611),a=n(82846),l=n(91936),o=Math.max,s=Math.min;e.exports=function(e,t,n){var r,c,d,u,p,m,h=0,x=!1,v=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function g(t){var n=r,i=c;return r=c=void 0,h=t,u=e.apply(i,n)}function y(e){var n=e-m,i=e-h;return void 0===m||n>=t||n<0||v&&i>=d}function w(){var e,n,i,l=a();if(y(l))return j(l);p=setTimeout(w,(e=l-m,n=l-h,i=t-e,v?s(i,d-n):i))}function j(e){return(p=void 0,f&&r)?g(e):(r=c=void 0,u)}function C(){var e,n=a(),i=y(n);if(r=arguments,c=this,m=n,i){if(void 0===p)return h=e=m,p=setTimeout(w,t),x?g(e):u;if(v)return clearTimeout(p),p=setTimeout(w,t),g(m)}return void 0===p&&(p=setTimeout(w,t)),u}return t=l(t)||0,i(n)&&(x=!!n.leading,d=(v="maxWait"in n)?o(l(n.maxWait)||0,t):d,f="trailing"in n?!!n.trailing:f),C.cancel=function(){void 0!==p&&clearTimeout(p),h=0,r=m=c=p=void 0},C.flush=function(){return void 0===p?u:j(a())},C}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},9387:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integrations",function(){return n(4561)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var i=n(24246),a=n(66726),l=n.n(a),o=n(27378),s=n(26917);let r=e=>{let{value:t,onChange:n,placeholder:a,...r}=e,[c,d]=(0,o.useState)(t),u=l()(n,500),p=(0,o.useCallback)(e=>{d(e),u(e)},[]);return(0,i.jsx)(s.Z,{value:c,onChange:p,onClear:()=>{d(""),n("")},placeholder:a,...r})}},4561:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var i,a,l,o,s=n(24246),r=n(86920),c=n(86677),d=n(27378),u=n(30952),p=n(62165),m=n(18225),h=n(77213),x=n(77830),v=n(58754),f=n(16394),g=n(41337),y=n(14207),w=n(8133),j=n(52352),C=n(15987),b=n(75595),k=e=>{let{integrationType:t,onConfigure:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{integration:null==t?void 0:t.placeholder,onConfigureClick:n}),null==t?void 0:t.overview]})},_=n(25980),S=e=>{let t=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let n=n=>{!t.current||t.current.contains(n.target)||n.target.closest('button, [role="button"], a, input, select, textarea')||e()};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e]),t},T=e=>{var t;let{integration:n,selected:i=!1,onClick:a,onDetailsClick:l,onUnfocus:o}=e,c=(0,j.ZP)(null==n?void 0:n.connection_type,null==n?void 0:null===(t=n.saas_config)||void 0===t?void 0:t.type),d=S(()=>{i&&o&&o()});return(0,s.jsxs)(r.xuv,{ref:d,borderWidth:1,borderColor:i?"black":"gray.200",backgroundColor:i?"gray.50":"transparent",boxShadow:i?"md":"none",borderRadius:"lg",overflow:"hidden",padding:"12px",cursor:"pointer",onClick:a,"data-testid":"integration-info-".concat(null==n?void 0:n.key),children:[(0,s.jsxs)(r.kCb,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,s.jsxs)(r.kCb,{flexGrow:1,children:[(0,s.jsx)(g.Z,{data:null!=n?n:"",boxSize:"40px"}),(0,s.jsxs)(r.kCb,{direction:"column",flexGrow:1,marginLeft:"12px",marginRight:"12px",children:[(0,s.jsx)(r.xvT,{color:"gray.700",fontWeight:"semibold",fontSize:"sm",children:(null==n?void 0:n.name)||"(No name)"}),(0,s.jsx)(r.xvT,{color:"gray.600",fontSize:"xs",mt:1,children:c.category})]})]}),l&&(0,s.jsx)(r.wpx,{size:"small",onClick:e=>{e.stopPropagation(),l()},type:"default",className:"px-2 py-1 text-xs","data-testid":"details-btn-".concat(null==n?void 0:n.key),children:"Details"})]}),(0,s.jsxs)(r.Eq9,{marginTop:"12px",spacing:1,children:[c.tags.slice(0,3).map(e=>(0,s.jsx)(r.j8w,{children:e},e)),c.tags.length>3&&(0,s.jsxs)(r.j8w,{color:"corinth",children:["+",c.tags.length-3]})]})]})};(i=l||(l={})).ALL="All",i.CRM="CRM",i.DATA_CATALOG="Data Catalog",i.DATABASE="Database",i.DATA_WAREHOUSE="Data Warehouse",i.IDENTITY_PROVIDER="Identity Provider",i.WEBSITE="Website",i.MANUAL="Manual";var N=e=>{let{selectedIntegration:t,onSelectIntegration:n,onDetailClick:i}=e,[a,o]=(0,d.useState)(""),[c,u]=(0,d.useState)(l.ALL),[p,h]=(0,d.useState)(!1),{flags:{oktaMonitor:x,alphaNewManualDSR:v}}=(0,_.Vb)(),f=(0,d.useMemo)(()=>Object.values(l).filter(e=>(e!==l.IDENTITY_PROVIDER||x)&&(e!==l.MANUAL||v)),[x,v]),g=(0,d.useMemo)(()=>{let e=j.FO;if(c!==l.ALL&&(e=e.filter(e=>e.category===c)),a.trim()){let t=a.toLowerCase();e=e.filter(e=>(e.placeholder.name||"").toLowerCase().includes(t))}return e.filter(e=>(!!x||"okta"!==e.placeholder.connection_type)&&(!!v||"manual_task"!==e.placeholder.connection_type))},[a,c,x,v]),y=f.map(e=>({label:e,value:e}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4 mt-3 flex items-center justify-between gap-4",children:[(0,s.jsx)(r.uFc,{placeholder:"Search by name...",value:a,onChange:e=>o(e.target.value),className:"w-64",allowClear:!0}),(0,s.jsx)(r.WPr,{value:c,onChange:e=>{h(!0),u(e),setTimeout(()=>h(!1),100)},options:y,className:"w-48",placeholder:"Select category","data-testid":"category-filter-select"})]}),p?(0,s.jsx)(m.Z,{}):(0,s.jsx)("div",{className:"grid grid-cols-3 gap-6",children:g.map(e=>(0,s.jsx)("div",{children:(0,s.jsx)(T,{integration:e.placeholder,selected:(null==t?void 0:t.placeholder.key)===e.placeholder.key,onClick:()=>{n((null==t?void 0:t.placeholder.key)===e.placeholder.key?void 0:e)},onDetailsClick:()=>i(e),onUnfocus:()=>n(void 0)})},e.placeholder.key))})]})},A=n(64176);(a=o||(o={})).LIST_VIEW="list-view",a.DETAIL="detail",a.FORM="form";var I=e=>{var t,n,i;let{isOpen:a,onClose:l}=e,[o,c]=(0,d.useState)("list-view"),[u,p]=(0,d.useState)(null),[m,h]=(0,d.useState)(),[x,v]=(0,d.useState)(null),f=(0,A.Z)(null==m?void 0:m.placeholder.connection_type,null==m?void 0:null===(n=m.placeholder)||void 0===n?void 0:null===(t=n.saas_config)||void 0===t?void 0:t.type),{description:g}=(0,j.ZP)(null==m?void 0:m.placeholder.connection_type,null==m?void 0:null===(i=m.placeholder.saas_config)||void 0===i?void 0:i.type),y=()=>{c("list-view"),p(null),h(void 0),v(null),l()},b=()=>{p("detail"),c("form")},_=m&&"list-view"!==o?"".concat(m.placeholder.name," Integration"):"Add integration",S="list-view"===o?(0,s.jsxs)("div",{className:"flex w-full justify-between",children:[(0,s.jsx)(r.wpx,{onClick:y,children:"Cancel"}),(0,s.jsx)(r.wpx,{type:"primary",onClick:()=>{"list-view"===o&&m&&(p("list-view"),c("form"))},disabled:!m,children:"Next"})]}):"detail"===o?(0,s.jsxs)("div",{className:"flex w-full justify-between",children:[(0,s.jsx)(r.wpx,{onClick:()=>c("list-view"),children:"Back"}),(0,s.jsx)(r.wpx,{onClick:b,type:"primary","data-testid":"configure-modal-btn",children:"Next"})]}):"form"===o?(0,s.jsxs)("div",{className:"flex w-full justify-between",children:[(0,s.jsx)(r.wpx,{onClick:()=>{u&&(c(u),p(null))},children:"Back"}),(0,s.jsx)(r.wpx,{type:"primary",onClick:()=>{x&&x.submitForm&&x.submitForm()},disabled:!x||!x.isValid||!x.dirty,loading:null==x?void 0:x.loading,"data-testid":"save-btn",children:"Save"})]}):null;return(0,s.jsxs)(w.Z,{isOpen:a,onClose:y,title:_,scrollBehavior:"inside",showCloseButton:!0,modalContentProps:{height:"700px",maxWidth:"1010px"},footer:S,children:["list-view"===o&&(0,s.jsx)(N,{selectedIntegration:m,onSelectIntegration:e=>{h(e)},onDetailClick:e=>{c("detail"),h(e)}}),"detail"===o&&(0,s.jsx)(k,{integrationType:m,onConfigure:b}),"form"===o&&(0,s.jsx)(C.Z,{connectionOption:f,onCancel:y,description:g,onFormStateChange:v})]})},E=n(40774),L=n(68309),Z=()=>{let[e,t]=(0,d.useState)(1),[n,i]=(0,d.useState)(50),[a,l]=(0,d.useState)(""),o=(0,c.useRouter)(),w=(0,d.useCallback)(a=>{(null==a?void 0:a.current)!==e&&t(a.current),(null==a?void 0:a.pageSize)&&a.pageSize!==n&&i(a.pageSize)},[e,n]),{flags:C}=(0,p.Vb)(),b=(0,d.useMemo)(()=>j.jq.filter(e=>e!==L.Rj.MANUAL_TASK||C.alphaNewManualDSR),[C.alphaNewManualDSR]),{data:k,isLoading:_}=(0,y.AZ)({connection_type:b,size:n,page:e,search:a.trim()||void 0}),{items:S}=null!=k?k:{},{onOpen:T,isOpen:N,onClose:A}=(0,r.qY0)(),Z=(0,d.useMemo)(()=>{var e;return null!==(e=null==S?void 0:S.map(e=>{var t;return{...e,integrationTypeInfo:(0,j.ZP)(e.connection_type,null===(t=e.saas_config)||void 0===t?void 0:t.type)}}))&&void 0!==e?e:[]},[S]),D=e=>{o.push("".concat(x.KH,"/").concat(e.key))},M=[{title:"Name",dataIndex:"name",key:"name",width:250,render:(e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(g.Z,{data:t,boxSize:"20px"}),(0,s.jsx)(r.AntTypography.Text,{ellipsis:{tooltip:e||"(No name)"},className:"font-semibold",children:e||"(No name)"})]})},{title:"Type",dataIndex:"connection_type",key:"connection_type",width:150,render:e=>{var t,n;return(0,j.ZP)(e,null==S?void 0:null===(n=S.find(t=>t.connection_type===e))||void 0===n?void 0:null===(t=n.saas_config)||void 0===t?void 0:t.type).placeholder.name||e}},{title:"Capabilities",dataIndex:["integrationTypeInfo","tags"],key:"capabilities",width:300,render:e=>(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.map(e=>(0,s.jsx)(r.j8w,{children:e},e))})},{title:"Connection Status",key:"connection_status",width:150,render:(e,t)=>{let{status:n,color:i}=null===t.last_test_timestamp||void 0===t.last_test_timestamp?{status:"Untested",color:"default"}:!0===t.last_test_succeeded?{status:"Healthy",color:"success"}:!1===t.last_test_succeeded?{status:"Failed",color:"error"}:{status:"Untested",color:"default"},a=t.last_test_timestamp?"Last connection: ".concat((0,f.p6)(t.last_test_timestamp)):"The connection has not been tested";return(0,s.jsx)(r.esZ,{title:a,children:(0,s.jsx)(r.j8w,{color:i,children:n})})}},{title:"Actions",key:"actions",width:100,render:(e,t)=>(0,s.jsx)(r.wpx,{onClick:()=>D(t),"data-testid":"manage-btn-".concat(t.key),size:"small",children:"Manage"})}],R={current:e,pageSize:n,total:Z.length,showSizeChanger:!0,showQuickJumper:!1,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," integrations"),pageSizeOptions:["10","25","50","100"]},z={emptyText:a.trim()?"No integrations match your search":(0,s.jsx)("div",{"data-testid":"empty-state",children:'You have not configured any integrations. Click "Add Integration" to connect and configure systems now.'})};return(0,s.jsxs)(h.Z,{title:"Integrations",children:[(0,s.jsx)(v.Z,{heading:"Integrations",breadcrumbItems:[{title:"All integrations"}],rightContent:(0,s.jsx)(r.wpx,{onClick:T,"data-testid":"add-integration-btn",type:"primary",children:"Add integration"})}),(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between gap-4",children:[(0,s.jsx)(u.f,{placeholder:"Search by name...",value:a,onChange:e=>{l(e),t(1)},className:"max-w-sm"}),(0,s.jsx)(E.Z,{})]}),_?(0,s.jsx)(m.Z,{}):(0,s.jsx)(r.V5H,{columns:M,dataSource:Z,rowKey:"key",pagination:R,loading:_,size:"small",locale:z,bordered:!0,onRow:e=>({onClick:()=>D(e),"data-testid":"integration-info-".concat(e.key)}),rowClassName:"cursor-pointer",onChange:w,"data-testid":"integrations-table"}),(0,s.jsx)(I,{isOpen:N,onClose:A})]})}}},function(e){e.O(0,[2858,2866,9278,699,3662,1316,6662,2888,9774,179],function(){return e(e.s=9387)}),_N_E=e.O()}]);