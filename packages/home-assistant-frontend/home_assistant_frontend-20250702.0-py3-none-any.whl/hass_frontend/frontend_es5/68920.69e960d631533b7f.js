"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["68920"],{45332:function(e,n,t){function r(e){return null==e||Array.isArray(e)?e:[e]}t.d(n,{r:function(){return r}})},54731:function(e,n,t){t.d(n,{z:function(){return r}});t(39710),t(56389);var r=function(e){return function(n,t){return e.includes(n,t)}}},2080:function(e,n,t){t.d(n,{J:function(){return o},_:function(){return c}});var r=t(61943),i=(t(81738),t(72489),t(54480),t(69920),t(64455),t(32192),/{%|{{/),o=function(e){return i.test(e)},c=function(e){return!!e&&("string"==typeof e?o(e):"object"===(0,r.Z)(e)&&(Array.isArray(e)?e:Object.values(e)).some(function(e){return e&&c(e)}))}},10142:function(e,n,t){t.d(n,{B$:function(){return a},EQ:function(){return y},Es:function(){return f},Gd:function(){return u},HF:function(){return Z},Ip:function(){return b},J8:function(){return M},Jd:function(){return w},Kc:function(){return h},Pl:function(){return j},SC:function(){return l},SQ:function(){return p},T5:function(){return A},W9:function(){return m},Xm:function(){return E},Yc:function(){return s},r4:function(){return g},sq:function(){return _}});t(26847),t(2394),t(81738),t(22960),t(6989),t(87799),t(27530);var r=t(67050),i=t(45332),o=t(66095),c=t(64637);const a="single",s=10,u=e=>{if("condition"in e&&Array.isArray(e.condition))return{condition:"and",conditions:e.condition};for(const n of["and","or","not"])if(n in e)return{condition:n,conditions:e[n]};return e},f=(e,n)=>{e.callService("automation","trigger",{entity_id:n,skip_condition:!0})},l=(e,n)=>e.callApi("DELETE",`config/automation/config/${n}`);let d;const g=(e,n)=>e.callApi("GET",`config/automation/config/${n}`),p=(e,n)=>e.callWS({type:"automation/config",entity_id:n}),_=(e,n,t)=>e.callApi("POST",`config/automation/config/${n}`,t),y=e=>{e=v(e);for(const n of["triggers","conditions","actions"]){const t=e[n];t&&!Array.isArray(t)&&(e[n]=[t])}return e},v=e=>("trigger"in e&&("triggers"in e||(e.triggers=e.trigger),delete e.trigger),"condition"in e&&("conditions"in e||(e.conditions=e.condition),delete e.condition),"action"in e&&("actions"in e||(e.actions=e.action),delete e.action),e.triggers&&(e.triggers=m(e.triggers)),e.actions&&(e.actions=(0,o.eR)(e.actions)),e),m=e=>e?Array.isArray(e)?e.map(m):("triggers"in e&&e.triggers&&(e.triggers=m(e.triggers)),"platform"in e&&("trigger"in e||(e.trigger=e.platform),delete e.platform),e):e,h=e=>{if(!e)return[];const n=[];return(0,i.r)(e).forEach(e=>{"triggers"in e?e.triggers&&n.push(...h(e.triggers)):n.push(e)}),n},b=(e,n)=>{d=e;const t=n?`?${(0,c.ou)({expanded:"1"})}`:"";(0,r.c)(`/config/automation/edit/new${t}`)},Z=e=>{b(Object.assign(Object.assign({},e),{},{id:void 0,alias:void 0}))},j=()=>{const e=d;return d=void 0,e},w=e=>{if(!e||"object"!=typeof e)return!1;const n=e;return"trigger"in n&&"string"==typeof n.trigger||"platform"in n&&"string"==typeof n.platform},A=e=>{if(!e||"object"!=typeof e)return!1;return"condition"in e&&"string"==typeof e.condition},E=(e,n,t,r)=>e.connection.subscribeMessage(n,{type:"subscribe_trigger",trigger:t,variables:r}),M=(e,n,t)=>e.callWS({type:"test_condition",condition:n,variables:t})},66095:function(e,n,t){t.d(n,{EH:function(){return g},FI:function(){return E},Kx:function(){return y},Pw:function(){return M},TL:function(){return v},ZN:function(){return R},eM:function(){return w},eR:function(){return x},kC:function(){return h},oE:function(){return j},oR:function(){return Z},rg:function(){return A},rq:function(){return b},sf:function(){return q},vA:function(){return p}});var r,i=t(75706),o=t(61943),c=(t(24819),t(81738),t(6989),t(24533),t(54480),t(10490),t(95632)),a=t(54731),s=t(67050),u=t(10142),f=t(17433),l=t(64637),d=t(2080),g=["single","restart","queued","parallel"],p=(0,a.z)(["queued","parallel"]),_=(0,c.Ry)({alias:(0,c.jt)((0,c.Z_)()),continue_on_error:(0,c.jt)((0,c.O7)()),enabled:(0,c.jt)((0,c.O7)())}),y=(0,c.Ry)({entity_id:(0,c.jt)((0,c.G0)([(0,c.Z_)(),(0,c.IX)((0,c.Z_)())])),device_id:(0,c.jt)((0,c.G0)([(0,c.Z_)(),(0,c.IX)((0,c.Z_)())])),area_id:(0,c.jt)((0,c.G0)([(0,c.Z_)(),(0,c.IX)((0,c.Z_)())])),floor_id:(0,c.jt)((0,c.G0)([(0,c.Z_)(),(0,c.IX)((0,c.Z_)())])),label_id:(0,c.jt)((0,c.G0)([(0,c.Z_)(),(0,c.IX)((0,c.Z_)())]))}),v=(0,c.f0)(_,(0,c.Ry)({action:(0,c.jt)((0,c.Z_)()),service_template:(0,c.jt)((0,c.Z_)()),entity_id:(0,c.jt)((0,c.Z_)()),target:(0,c.jt)((0,c.G0)([y,(0,c.lF)((0,c.Z_)(),"has_template",function(e){return(0,d._)(e)})])),data:(0,c.jt)((0,c.Ry)()),response_variable:(0,c.jt)((0,c.Z_)()),metadata:(0,c.jt)((0,c.Ry)())})),m=(0,c.f0)(_,(0,c.Ry)({action:(0,c.i0)("media_player.play_media"),target:(0,c.jt)((0,c.Ry)({entity_id:(0,c.jt)((0,c.Z_)())})),entity_id:(0,c.jt)((0,c.Z_)()),data:(0,c.Ry)({media_content_id:(0,c.Z_)(),media_content_type:(0,c.Z_)()}),metadata:(0,c.Ry)()})),h=function(e,n,t){return e.callService("script",n,t)},b=function(e){return"off"===e.state||!!("on"===e.state&&p(e.attributes.mode)&&e.attributes.current<e.attributes.max)},Z=function(e,n){return e.callApi("DELETE","config/script/config/".concat(n))},j=function(e,n){return e.callApi("GET","config/script/config/".concat(n))},w=function(e,n){return e.callWS({type:"script/config",entity_id:n})},A=function(e,n){r=e;var t=n?"?".concat((0,l.ou)({expanded:"1"})):"";(0,s.c)("/config/script/edit/new".concat(t))},E=function(){var e=r;return r=void 0,e},M=function(e){return"string"==typeof e&&(0,d._)(e)?"check_condition":"delay"in e?"delay":"wait_template"in e?"wait_template":["condition","and","or","not"].some(function(n){return n in e})?"check_condition":"event"in e?"fire_event":"device_id"in e?"device_action":"repeat"in e?"repeat":"choose"in e?"choose":"if"in e?"if":"wait_for_trigger"in e?"wait_for_trigger":"variables"in e?"variables":"stop"in e?"stop":"sequence"in e?"sequence":"parallel"in e?"parallel":"set_conversation_response"in e?"set_conversation_response":"action"in e||"service"in e?"metadata"in e&&(0,c.is)(e,m)?"play_media":"service":"unknown"},q=function(e,n){var t,r=null===(t=e.services.script[(0,f.p)(n)])||void 0===t?void 0:t.fields;return void 0!==r&&Object.keys(r).length>0},x=function(e){if(!e)return e;if(Array.isArray(e))return e.map(x);if("object"===(0,o.Z)(e)&&null!==e&&"service"in e&&("action"in e||(e.action=e.service),delete e.service),"object"===(0,o.Z)(e)&&null!==e&&"scene"in e&&(e.action="scene.turn_on",e.target={entity_id:e.scene},delete e.scene),"object"===(0,o.Z)(e)&&null!==e&&"sequence"in e){var n,t=(0,i.Z)(e.sequence);try{for(t.s();!(n=t.n()).done;){var r=n.value;x(r)}}catch(p){t.e(p)}finally{t.f()}}var c=M(e);"parallel"===c&&x(e.parallel);if("choose"===c){var a=e;if(Array.isArray(a.choose)){var s,f=(0,i.Z)(a.choose);try{for(f.s();!(s=f.n()).done;){var l=s.value;x(l.sequence)}}catch(p){f.e(p)}finally{f.f()}}else a.choose&&x(a.choose.sequence);a.default&&x(a.default)}"repeat"===c&&x(e.repeat.sequence);if("if"===c){var d=e;x(d.then),d.else&&x(d.else)}if("wait_for_trigger"===c){var g=e;(0,u.W9)(g.wait_for_trigger)}return e},R=function(e){var n=e.sequence;return n&&!Array.isArray(n)&&(e.sequence=[n]),e.sequence&&(e.sequence=x(e.sequence)),e}},18019:function(e,n,t){t.r(n),t.d(n,{addExternalBarCodeListener:function(){return u},attachExternalToApp:function(){return s},handleExternalMessage:function(){return f}});t(26847),t(81738),t(22960),t(54480),t(11353),t(67886),t(65451),t(46015),t(38334),t(94880),t(75643),t(29761),t(48694),t(67398),t(27530);var r=t(39884),i=t(83054),o=t(67050),c=t(10142),a=new Set,s=function(e){window.addEventListener("haptic",function(n){return e.hass.auth.external.fireMessage({type:"haptic",payload:{hapticType:n.detail}})}),e.hass.auth.external.addCommandHandler(function(n){return f(e,n)})},u=function(e){return a.add(e),function(){a.delete(e)}},f=function(e,n){var t=e.hass.auth.external;if("restart"===n.command)e.hass.connection.reconnect(!0),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else if("navigate"===n.command)(0,o.c)(n.payload.path,n.payload.options),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else if("notifications/show"===n.command)(0,r.B)(e,"hass-show-notifications"),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else if("sidebar/toggle"===n.command){var s;if(null!==(s=i.E.history.state)&&void 0!==s&&s.open)return t.fireMessage({id:n.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,r.B)(e,"hass-toggle-menu"),t.fireMessage({id:n.id,type:"result",success:!0,result:null})}else if("sidebar/show"===n.command){var u;if(null!==(u=i.E.history.state)&&void 0!==u&&u.open)return t.fireMessage({id:n.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,r.B)(e,"hass-toggle-menu",{open:!0}),t.fireMessage({id:n.id,type:"result",success:!0,result:null})}else if("automation/editor/show"===n.command){var f;(0,c.Ip)(null===(f=n.payload)||void 0===f?void 0:f.config),t.fireMessage({id:n.id,type:"result",success:!0,result:null})}else if("improv/discovered_device"===n.command)(0,r.B)(window,"improv-discovered-device",n.payload),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else if("improv/device_setup_done"===n.command)(0,r.B)(window,"improv-device-setup-done"),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else if("bar_code/scan_result"===n.command)a.forEach(function(e){return e(n)}),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else{if("bar_code/aborted"!==n.command)return!1;a.forEach(function(e){return e(n)}),t.fireMessage({id:n.id,type:"result",success:!0,result:null})}return!0}},8504:function(e,n,t){var r=t(86840),i=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&i(e)===e}},35385:function(e,n,t){t(77341)({target:"Number",stat:!0},{isInteger:t(8504)})},10490:function(e,n,t){t(77341)({target:"String",proto:!0},{repeat:t(84838)})},44105:function(e,n,t){t.d(n,{Z:function(){return r}});t(73042);function r(e){var n=Object(e),t=[];for(var r in n)t.unshift(r);return function e(){for(;t.length;)if((r=t.pop())in n)return e.value=r,e.done=!1,e;return e.done=!0,e}}},77528:function(e,n,t){t.d(n,{Z:function(){return i}});t(73249),t(84730),t(79133),t(40777),t(26847),t(54480),t(48694),t(27530);var r=t(61943);function i(e){if(null!=e){var n=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],t=0;if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}throw new TypeError((0,r.Z)(e)+" is not iterable")}},95912:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(76481),i=t(4506),o=t(23112),c=t(5525);function a(e){return(0,r.Z)(e)||(0,i.Z)(e)||(0,o.Z)(e)||(0,c.Z)()}}}]);
//# sourceMappingURL=68920.69e960d631533b7f.js.map