"use strict";(self.webpackChunk_mamba_org_gator_lab=self.webpackChunk_mamba_org_gator_lab||[]).push([[205],{3205:(e,t,n)=>{n.r(t),n.d(t,{CONDA_ENVIRONMENT_PANEL_ID:()=>p,CONDA_ENVIRONMENT_TOOLBAR_CLASS:()=>m,CONDA_PACKAGES_PANEL_ID:()=>g,CONDA_PACKAGES_TOOLBAR_CLASS:()=>u,CONDA_PACKAGE_SELECT_CLASS:()=>v,CONDA_WIDGET_CLASS:()=>h,Conda:()=>ae,CondaEnvWidget:()=>Y,CondaEnvironments:()=>ie,IEnvironmentManager:()=>ne,condaIcon:()=>X});var a=n(6249),o=n(8805);const i=a?.ReactWidget||o?.ReactWidget,r=a?.UseSignal||o?.UseSignal;if(!i)throw new Error("ReactWidget not found in either package");console.log("✓ Using",i.name,"from",a?.ReactWidget?"ui-components":"apputils");var s=n(4602),l=n(3345),c=n(5256),d=n(3902);const h="jp-NbConda",p="jp-NbConda-environment",m="jp-NbConda-EnvToolbar",g="jp-NbConda-packages",u="jp-NbConda-ToolbarPackages",v="jp-NbConda-package-select";var f;!function(e){e.ListItem={flex:"0 0 auto",border:"1px solid transparent",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"var(--jp-ui-font-color1)",fontSize:"var(--jp-ui-font-size1)",listStyleType:"none"}}(f||(f={}));const y=e=>l.createElement("div",{className:e.selected?E.SelectedItem:E.Item,onClick:()=>e.onClick(e.name)},e.name);var E;!function(e){e.Item=(0,d.iF)(f.ListItem,{padding:"2px 0 5px 5px",$nest:{"&:hover":{backgroundColor:"var(--jp-layout-color2)",border:"1px solid var(--jp-border-color2)"}}}),e.SelectedItem=(0,d.iF)(f.ListItem,{padding:"2px 0 5px 5px",backgroundColor:"var(--jp-brand-color1)",color:"var(--jp-ui-inverse-font-color1)",border:"1px solid var(--jp-brand-color1)",display:"flex",justifyContent:"space-between",alignItems:"center",$nest:{"&::after":{content:"' '",display:"inline-block",padding:"0 5px",width:0,height:0,borderTop:"calc(var(--jp-ui-font-size1) / 2) solid transparent",borderBottom:"calc(var(--jp-ui-font-size1) / 2) solid transparent",borderLeft:"calc(var(--jp-ui-font-size1) / 2) solid var(--jp-ui-inverse-font-color1)"}}})}(E||(E={}));var k=n(9826),b=n(7494),w=n(9783);const C=e=>l.createElement("div",{className:S.NoGrow},l.createElement("div",{className:S.Title},l.createElement("span",{className:S.Grow},"Conda environments"),l.createElement(a.Button,{className:"jp-ToolbarButtonComponent",onMouseDown:e.onRefresh,title:"Refresh environments",minimal:!0},l.createElement(w.g,{icon:b.Ot,spin:e.isPending,style:{color:"var(--jp-inverse-layout-color3)"}}))),l.createElement("div",{className:`lm-Widget jp-Toolbar ${m}`},l.createElement(o.ToolbarButtonComponent,{icon:a.addIcon,tooltip:"Create",onClick:e.onCreate}),l.createElement(a.Button,{className:"jp-ToolbarButtonComponent",disabled:e.isBase,onMouseDown:e.onClone,title:"Clone",minimal:!0},l.createElement(w.g,{icon:k.$3,style:{color:"var(--jp-inverse-layout-color3)"}})),l.createElement(o.ToolbarButtonComponent,{icon:a.fileUploadIcon,tooltip:"Import",onClick:e.onImport}),l.createElement(o.ToolbarButtonComponent,{icon:a.downloadIcon,tooltip:"Export",onClick:e.onExport}),l.createElement(o.ToolbarButtonComponent,{icon:a.closeIcon,tooltip:"Remove",onClick:e.onRemove,enabled:!e.isBase})));var S;!function(e){e.Grow=(0,d.iF)({flexGrow:1,flexShrink:1}),e.NoGrow=(0,d.iF)({flexGrow:0,flexShrink:0}),e.Title=(0,d.iF)({color:"var(--jp-ui-font-color1)",textAlign:"center",fontWeight:"bold",fontSize:"var(--jp-ui-font-size2)",height:40,display:"flex",flex:"0 0 auto",flexDirection:"row"})}(S||(S={}));const _=e=>{let t=!1;const n=e.environments.map(((n,a)=>(n.name===e.selected&&(t=n.is_default||"base"===n.name),l.createElement(y,{name:n.name,key:n.name,selected:!!e.selected&&n.name===e.selected,onClick:e.onSelectedChange}))));return l.createElement("div",{className:x.Panel},l.createElement(C,{isBase:t,isPending:e.isPending,onCreate:e.onCreate,onClone:e.onClone,onImport:e.onImport,onExport:e.onExport,onRefresh:e.onRefresh,onRemove:e.onRemove}),l.createElement("div",{id:p,className:x.ListEnvs(e.height-40-32)},n))};var x;!function(e){e.Panel=(0,d.iF)({flexGrow:0,flexShrink:0,display:"flex",flexDirection:"column",overflow:"hidden",width:250}),e.ListEnvs=e=>(0,d.iF)({height:e,overflowY:"auto",display:"flex",flexDirection:"column"})}(x||(x={}));var N,j=n(8703),A=n.n(j),T=n(3456),P=n(8547),R=n(5038),L=n(8851),D=n(9755),U=n(9686),I=n(1997);class F extends l.Component{constructor(){super(...arguments),this.changeRender=e=>l.createElement("div",{className:"lm-Widget"},l.createElement(a.HTMLSelect,{className:(0,d.Ly)(N.VersionSelection,v),value:e.version_selected,onClick:e=>{e.stopPropagation()},onChange:t=>this.props.onPkgChange(e,t.target.value),"aria-label":"Package versions"},l.createElement("option",{key:"-3",value:"none"},"Remove"),!e.version_installed&&l.createElement("option",{key:"-2",value:""},"Install"),e.updatable&&l.createElement("option",{key:"-1",value:""},"Update"),e.version.map((e=>l.createElement("option",{key:e,value:e},e))))),this.iconRender=e=>e.version_installed?"none"===e.version_selected?l.createElement(w.g,{icon:D.xb,style:{color:"var(--jp-error-color1)"}}):e.version_selected!==e.version_installed?l.createElement(w.g,{icon:L.lR,style:{color:"var(--jp-accent-color1)"}}):l.createElement(w.g,{icon:P.rQ,style:{color:"var(--jp-brand-color1)"}}):"none"!==e.version_selected?l.createElement(w.g,{icon:P.rQ,style:{color:"var(--jp-brand-color1)"}}):l.createElement(w.g,{icon:T.Nf,style:{color:"var(--jp-ui-font-color2)"}}),this.nameRender=e=>e.home?.length>0?l.createElement("a",{className:N.Link,href:e.home,onClick:e=>e.stopPropagation(),target:"_blank",rel:"noopener noreferrer"},e.name," ",l.createElement(w.g,{icon:R.A})):l.createElement("span",null,e.name),this.versionRender=e=>l.createElement("a",{className:e.updatable?N.Updatable:void 0,href:"#",onClick:t=>{t.stopPropagation(),this.props.onPkgGraph(e)},rel:"noopener noreferrer",title:"Show dependency graph"},e.version_installed),this.rowClassName=(e,t)=>{if(e>=0){const n=this.isSelected(t);return e%2==0?N.RowEven(n):N.RowOdd(n)}},this.rowRenderer=e=>{const{data:t,index:n,style:a}=e,o=t[n];return l.createElement("div",{className:this.rowClassName(n,o),style:a,onClick:()=>{this.props.onPkgClick(o)},role:"row"},l.createElement("div",{className:(0,d.Ly)(N.Cell,N.StatusSize),role:"gridcell"},this.iconRender(o)),l.createElement("div",{className:(0,d.Ly)(N.Cell,N.NameSize),role:"gridcell"},this.nameRender(o)),this.props.hasDescription&&l.createElement("div",{className:(0,d.Ly)(N.CellSummary,N.DescriptionSize),role:"gridcell",title:o.summary},o.summary),l.createElement("div",{className:(0,d.Ly)(N.Cell,N.VersionSize),role:"gridcell"},this.versionRender(o)),l.createElement("div",{className:(0,d.Ly)(N.Cell,N.ChangeSize),role:"gridcell"},this.changeRender(o)),l.createElement("div",{className:(0,d.Ly)(N.Cell,N.ChannelSize),role:"gridcell",title:o.channel},o.channel))}}isSelected(e){if(e.version_installed){if("none"===e.version_selected)return!0;if(e.version_selected!==e.version_installed)return!0}else if("none"!==e.version_selected)return!0;return!1}render(){return l.createElement("div",{id:g,role:"grid"},l.createElement(U.Ay,{disableHeight:!0},(({width:e})=>l.createElement(l.Fragment,null,l.createElement("div",{className:N.RowHeader,style:{width:e},role:"row"},l.createElement("div",{className:(0,d.Ly)(N.Cell,N.StatusSize),role:"columnheader"}),l.createElement("div",{className:(0,d.Ly)(N.Cell,N.NameSize),role:"columnheader"},"Name"),this.props.hasDescription&&l.createElement("div",{className:(0,d.Ly)(N.Cell,N.DescriptionSize),role:"columnheader"},"Description"),l.createElement("div",{className:(0,d.Ly)(N.Cell,N.VersionSize),role:"columnheader"},"Version"),l.createElement("div",{className:(0,d.Ly)(N.Cell,N.ChangeSize),role:"columnheader"},"Change To"),l.createElement("div",{className:(0,d.Ly)(N.Cell,N.ChannelSize),role:"columnheader"},"Channel")),l.createElement(I.Y1,{height:Math.max(0,this.props.height-29),overscanCount:3,itemCount:this.props.packages.length,itemData:this.props.packages,itemKey:(e,t)=>t[e].name,itemSize:40,width:e},this.rowRenderer)))))}}F.defaultProps={hasDescription:!1,packages:[]},function(e){const t={display:"flex",flexDirection:"row",alignItems:"center"};e.RowHeader=(0,d.iF)(t,{color:"var(--jp-ui-font-color1)",fontWeight:"bold",fontSize:"var(--jp-ui-font-size2)",height:29,boxSizing:"border-box",paddingRight:17});const n={fontSize:"var(--jp-ui-font-size1)",color:"var(--jp-ui-font-color0)",lineHeight:"normal",$nest:{"&:hover":{backgroundColor:"var(--jp-layout-color3)"}}};e.RowEven=e=>(0,d.iF)(t,n,{background:e?"var(--jp-brand-color3)":"unset"}),e.RowOdd=e=>(0,d.iF)(t,n,{background:e?"var(--jp-brand-color3)":"var(--jp-layout-color2)"}),e.Cell=(0,d.iF)({margin:"0px 2px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}),e.StatusSize=(0,d.iF)({flex:"0 0 12px",padding:"0px 2px"}),e.NameSize=(0,d.iF)({flex:"1 1 200px"}),e.DescriptionSize=(0,d.iF)({flex:"5 5 250px"}),e.VersionSize=(0,d.iF)({flex:"0 0 90px"}),e.ChangeSize=(0,d.iF)({flex:"0 0 120px"}),e.ChannelSize=(0,d.iF)({flex:"1 1 120px"}),e.CellSummary=(0,d.iF)({margin:"0px 2px",alignSelf:"flex-start",whiteSpace:"normal",height:"100%",overflow:"hidden"}),e.SortButton=(0,d.iF)({transform:"rotate(180deg)",marginLeft:"10px",color:"var(--jp-ui-font-color2)",border:"none",backgroundColor:"var(--jp-layout-color0)",fontSize:"var(--jp-ui-font-size1)"}),e.Link=(0,d.iF)({$nest:{"&:hover":{textDecoration:"underline"}}}),e.Updatable=(0,d.iF)({color:"var(--jp-brand-color0)",$nest:{"&::before":{content:"'↗️'",paddingRight:2}}}),e.VersionSelection=(0,d.iF)({width:"100%"})}(N||(N={}));var z,O=n(4907),B=n(665),M=n(6823);!function(e){e.All="ALL",e.Installed="INSTALLED",e.Available="AVAILABLE",e.Updatable="UPDATABLE",e.Selected="SELECTED"}(z||(z={}));const $=e=>l.createElement("div",{className:`lm-Widget ${u} jp-Toolbar`},l.createElement("div",{className:"lm-Widget jp-Toolbar-item"},l.createElement(a.HTMLSelect,{value:e.category,onChange:e.onCategoryChanged,"aria-label":"Package filter"},l.createElement("option",{value:z.All},"All"),l.createElement("option",{value:z.Installed},"Installed"),l.createElement("option",{value:z.Available},"Not installed"),l.createElement("option",{value:z.Updatable},"Updatable"),l.createElement("option",{value:z.Selected},"Selected"))),l.createElement("div",{className:"lm-Widget jp-Toolbar-item"},l.createElement("div",{className:(0,M.Ly)("jp-NbConda-search-wrapper",G.Search)},l.createElement(a.InputGroup,{className:G.SearchInput,type:"text",placeholder:"Search Packages",onChange:e.onSearch,value:e.searchTerm,rightIcon:"search"}))),l.createElement("div",{className:"lm-Widget jp-Toolbar-spacer jp-Toolbar-item"}),l.createElement(a.Button,{className:"jp-ToolbarButtonComponent",disabled:!e.hasUpdate,minimal:!0,onMouseDown:e.onUpdateAll,title:"Update all packages"},l.createElement(w.g,{icon:L.lR,style:{color:e.hasUpdate?"var(--jp-accent-color0)":"var(--jp-inverse-layout-color3)"}})),l.createElement(a.Button,{className:"jp-ToolbarButtonComponent",disabled:!e.hasSelection,minimal:!0,onMouseDown:e.onApply,title:"Apply package modifications"},l.createElement(w.g,{icon:O.Tu,style:{color:e.hasSelection?"var(--jp-brand-color0)":"var(--jp-inverse-layout-color3)"}})),l.createElement(a.Button,{className:"jp-ToolbarButtonComponent",disabled:!e.hasSelection,minimal:!0,onMouseDown:e.onCancel,title:"Clear package modifications"},l.createElement(w.g,{icon:B.do,style:{color:"var(--jp-inverse-layout-color3)"}})),l.createElement(a.Button,{className:"jp-ToolbarButtonComponent",disabled:e.isPending,minimal:!0,onMouseDown:e.onRefreshPackages,title:"Refresh available packages"},l.createElement(w.g,{icon:b.Ot,spin:e.isPending,style:{color:"var(--jp-inverse-layout-color3)"}})));var G;!function(e){e.Toolbar=(0,M.iF)({alignItems:"center",height:40}),e.SearchInput=(0,M.iF)({lineHeight:"normal"}),e.Search=(0,M.iF)({padding:"4px"})}(G||(G={}));var q,W,H=n(5404);class V extends l.Component{constructor(e){super(e),this.state={data:null,error:null}}componentDidMount(){this._updatePackages()}componentDidUpdate(e){this.props.package!==e.package&&this._updatePackages()}async _updatePackages(){try{const e=await this.props.pkgManager.getDependencies(this.props.package,!0),t={nodes:[],links:[]};let n=null;null===e[this.props.package]?n=l.createElement("span",null,"Please install"," ",l.createElement("a",{style:{textDecoration:"underline"},href:"https://github.com/mamba-org/mamba",rel:"noreferrer",target:"_blank"},"mamba")," ","manager to resolve dependencies."):(Object.keys(e).forEach((n=>{n===this.props.package?t.nodes.push({id:n,color:"orange"}):t.nodes.push({id:n}),e[n].forEach((e=>{const a=e.split(" ")[0];t.nodes.find((e=>e.id===a))||t.nodes.push({id:a}),t.links.push({source:n,target:a})}))})),0===t.nodes.length&&(n=l.createElement("span",null,"This is a pip package"))),this.setState({data:t,error:n})}catch(e){e instanceof Error&&"cancelled"!==e.message&&console.error("Error when looking for dependencies.",e)}}render(){return l.createElement("div",null,null===this.state.data?l.createElement("span",null,"Loading dependencies"):l.createElement("div",null,this.state.error||l.createElement(H.TS,{id:"graph-id",data:this.state.data,config:this.props.config})))}}V.defaultProps={config:{directed:!0,collapsible:!0,highlightDegree:1,highlightOpacity:.1,nodeHighlightBehavior:!0,linkHighlightBehavior:!0,node:{color:"var(--jp-brand-color1)",highlightColor:"var(--jp-brand-color2)",highlightStrokeColor:"var(--jp-brand-color2)",highlightFontSize:"var(--jp-ui-font-size0)",fontSize:"--jp-ui-font-size0",fontColor:"var(--jp-ui-font-color1)"},link:{highlightColor:"var(--jp-brand-color2)"}}};class J extends i{constructor(e,t){super(),this._package=t,this._pkgManager=e}render(){return l.createElement(V,{package:this._package,pkgManager:this._pkgManager})}}class Q extends l.Component{constructor(e){super(e),this.handleDependenciesGraph=e=>{(0,o.showDialog)({title:e.name,body:new J(this._model,e.name),buttons:[o.Dialog.okButton()]})},this._currentEnvironment="",this.state={isLoading:!1,isApplyingChanges:!1,hasDescription:!1,hasUpdate:!1,packages:[],selected:[],searchTerm:"",activeFilter:z.All},this._model=this.props.packageManager,this.handleCategoryChanged=this.handleCategoryChanged.bind(this),this.handleClick=this.handleClick.bind(this),this.handleVersionSelection=this.handleVersionSelection.bind(this),this.handleSearch=this.handleSearch.bind(this),this.handleUpdateAll=this.handleUpdateAll.bind(this),this.handleApply=this.handleApply.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleRefreshPackages=this.handleRefreshPackages.bind(this)}async _updatePackages(){this.setState({isLoading:!0,hasUpdate:!1,packages:[],selected:[]});try{const e=this._currentEnvironment||this._model.environment,t=await this._model.refresh(!1,e);this.setState({packages:t});const n=await this._model.refresh(!0,e);let a=!1;n.forEach(((e,t)=>{try{e.version_installed&&A().gt(A().coerce(e.version[e.version.length-1]),A().coerce(e.version_installed))&&(n[t].updatable=!0,a=!0)}catch(t){console.debug(`Error when testing updatable status for ${e.name}`,t)}})),this.setState({isLoading:!1,hasDescription:this._model.hasDescription(),packages:n,hasUpdate:a})}catch(e){"cancelled"!==e.message&&(this.setState({isLoading:!1}),console.error(e),o.Notification.error(e.message))}}handleCategoryChanged(e){this.state.isApplyingChanges||this.setState({activeFilter:e.target.value})}handleClick(e){if(this.state.isApplyingChanges)return;const t=this.state.selected.indexOf(e),n=this.state.selected;t>=0&&this.state.selected.splice(t,1),e.version_installed?e.version_installed===e.version_selected?e.updatable?(e.version_selected="",n.push(e)):(e.version_selected="none",n.push(e)):"none"===e.version_selected?e.version_selected=e.version_installed:(e.version_selected="none",n.push(e)):"none"!==e.version_selected?e.version_selected="none":(e.version_selected="",n.push(e)),this.setState({packages:this.state.packages,selected:n})}handleVersionSelection(e,t){if(this.state.isApplyingChanges)return;const n=this.state.selected.indexOf(e),a=this.state.selected;n>=0&&this.state.selected.splice(n,1),e.version_installed?e.version_installed!==t&&a.push(e):"none"!==t&&a.push(e),e.version_selected=t,this.setState({packages:this.state.packages,selected:a})}handleSearch(e){this.state.isApplyingChanges||this.setState({searchTerm:e.target.value})}async handleUpdateAll(){if(this.state.isApplyingChanges)return;let e="";try{this.setState({searchTerm:"",activeFilter:z.Updatable}),(await(0,o.showDialog)({title:"Update all",body:"Please confirm you want to update all packages? Conda enforces environment consistency. So maybe only a subset of the available updates will be applied."})).button.accept&&(this.setState({isApplyingChanges:!0}),e=o.Notification.emit("Updating packages","in-progress"),await this._model.update(["--all"],this._currentEnvironment),o.Notification.update({id:e,message:"Package updated successfully.",type:"success",autoClose:5e3}))}catch(t){"cancelled"!==t?(console.error(t),e?o.Notification.update({id:e,message:t.message,type:"error",autoClose:0}):o.Notification.error(t.message)):e&&o.Notification.dismiss(e)}finally{this.setState({isApplyingChanges:!1,selected:[],activeFilter:z.All}),this._updatePackages()}}async handleApply(){if(this.state.isApplyingChanges)return;let e="";try{if(this.setState({searchTerm:"",activeFilter:z.Selected}),(await(0,o.showDialog)({title:"Packages actions",body:"Please confirm you want to apply the selected actions?"})).button.accept){this.setState({isApplyingChanges:!0}),e=o.Notification.emit("Starting packages actions","in-progress");const t=[],n=[],a=[];this.state.selected.forEach((e=>{e.version_installed&&"none"===e.version_selected?t.push(e.name):e.updatable&&""===e.version_selected?n.push(e.name):a.push(e.version_selected?e.name+"="+e.version_selected:e.name)})),t.length>0&&(o.Notification.update({id:e,message:"Removing selected packages"}),await this._model.remove(t,this._currentEnvironment)),n.length>0&&(o.Notification.update({id:e,message:"Updating selected packages"}),await this._model.update(n,this._currentEnvironment)),a.length>0&&(o.Notification.update({id:e,message:"Installing new packages"}),await this._model.install(a,this._currentEnvironment)),o.Notification.update({id:e,message:"Package actions successfully done.",type:"success",autoClose:5e3})}}catch(t){"cancelled"!==t?(console.error(t),e?o.Notification.update({id:e,message:t.message,type:"error",autoClose:0}):o.Notification.error(t.message)):e&&o.Notification.dismiss(e)}finally{this.setState({isApplyingChanges:!1,selected:[],activeFilter:z.All}),this._updatePackages()}}handleCancel(){this.state.isApplyingChanges||(this.state.selected.forEach((e=>e.version_selected=e.version_installed?e.version_installed:"none")),this.setState({selected:[]}))}async handleRefreshPackages(){try{await this._model.refreshAvailablePackages()}catch(e){"cancelled"!==e.message&&console.error("Error when refreshing the available packages.",e)}this._updatePackages()}componentDidUpdate(e){this._currentEnvironment!==this.props.packageManager.environment&&(this._currentEnvironment=this.props.packageManager.environment,this._updatePackages())}render(){let e=[];this.state.activeFilter===z.All?e=this.state.packages:this.state.activeFilter===z.Installed?e=this.state.packages.filter((e=>e.version_installed)):this.state.activeFilter===z.Available?e=this.state.packages.filter((e=>!e.version_installed)):this.state.activeFilter===z.Updatable?e=this.state.packages.filter((e=>e.updatable)):this.state.activeFilter===z.Selected&&(e=this.state.packages.filter((e=>this.state.selected.indexOf(e)>=0)));let t=[];return t=null===this.state.searchTerm?e:e.filter((e=>{const t=this.state.searchTerm.toLowerCase();return e.name.indexOf(this.state.searchTerm)>=0||this.state.hasDescription&&(e.summary.indexOf(this.state.searchTerm)>=0||e.keywords.indexOf(t)>=0||e.tags.indexOf(t)>=0)})),l.createElement("div",{className:q.Panel},l.createElement($,{isPending:this.state.isLoading,category:this.state.activeFilter,hasSelection:this.state.selected.length>0,hasUpdate:this.state.hasUpdate,searchTerm:this.state.searchTerm,onCategoryChanged:this.handleCategoryChanged,onSearch:this.handleSearch,onUpdateAll:this.handleUpdateAll,onApply:this.handleApply,onCancel:this.handleCancel,onRefreshPackages:this.handleRefreshPackages}),l.createElement(F,{height:this.props.height-40,hasDescription:this.state.hasDescription&&this.props.width>500,packages:t,onPkgClick:this.handleClick,onPkgChange:this.handleVersionSelection,onPkgGraph:this.handleDependenciesGraph}))}}!function(e){e.Panel=(0,d.iF)({flexGrow:1,borderLeft:"1px solid var(--jp-border-color2)"})}(q||(q={}));class K extends l.Component{constructor(e){super(e),this.state={environments:[],currentEnvironment:void 0,isLoading:!1},this.handleEnvironmentChange=this.handleEnvironmentChange.bind(this),this.handleCreateEnvironment=this.handleCreateEnvironment.bind(this),this.handleCloneEnvironment=this.handleCloneEnvironment.bind(this),this.handleImportEnvironment=this.handleImportEnvironment.bind(this),this.handleExportEnvironment=this.handleExportEnvironment.bind(this),this.handleRefreshEnvironment=this.handleRefreshEnvironment.bind(this),this.handleRemoveEnvironment=this.handleRemoveEnvironment.bind(this)}async handleEnvironmentChange(e){this.setState({currentEnvironment:e,channels:await this.props.model.getChannels(e)})}async handleCreateEnvironment(){let e="";try{const t=document.createElement("div"),n=document.createElement("label");n.textContent="Name : ";const a=document.createElement("input");t.appendChild(n),t.appendChild(a);const i=document.createElement("label");i.textContent="Type : ";const r=document.createElement("select");for(const e of this.props.model.environmentTypes){const t=document.createElement("option");t.setAttribute("value",e),t.innerText=e,r.appendChild(t)}if(t.appendChild(i),t.appendChild(r),(await(0,o.showDialog)({title:"New Environment",body:new c.Widget({node:t}),buttons:[o.Dialog.cancelButton(),o.Dialog.okButton()]})).button.accept){if(0===a.value.length)throw new Error("A environment name should be provided.");e=o.Notification.emit(`Creating environment ${a.value}`,"in-progress"),await this.props.model.create(a.value,r.value),o.Notification.update({id:e,message:`Environment ${a.value} has been created.`,type:"success",autoClose:5e3}),this.setState({currentEnvironment:a.value}),this.loadEnvironments()}}catch(t){"cancelled"!==t?(console.error(t),e?o.Notification.update({id:e,message:t.message,type:"error",autoClose:!1}):o.Notification.error(t.message)):e&&o.Notification.dismiss(e)}}async handleCloneEnvironment(){let e="";try{const t=this.state.currentEnvironment;if(!t)return;const n=document.createElement("div"),a=document.createElement("label");a.textContent="Name : ";const i=document.createElement("input");if(n.appendChild(a),n.appendChild(i),(await(0,o.showDialog)({title:"Clone Environment",body:new c.Widget({node:n}),buttons:[o.Dialog.cancelButton(),o.Dialog.okButton({caption:"Clone"})]})).button.accept){if(0===i.value.length)throw new Error("A environment name should be provided.");e=o.Notification.emit(`Cloning environment ${t}`,"in-progress"),await this.props.model.clone(t,i.value),o.Notification.update({id:e,message:`Environment ${i.value} created.`,type:"success",autoClose:5e3}),this.state.currentEnvironment===t&&this.setState({currentEnvironment:i.value}),this.loadEnvironments()}}catch(t){"cancelled"!==t?(console.error(t),e?o.Notification.update({id:e,message:t.message,type:"error",autoClose:!1}):o.Notification.error(t.message)):e&&o.Notification.dismiss(e)}}_readText(e){return new Promise(((t,n)=>{const a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsText(e)}))}async handleImportEnvironment(){let e="";try{const t=document.createElement("div"),n=document.createElement("label");n.textContent="Name : ";const a=document.createElement("input");t.appendChild(n),t.appendChild(a);const i=document.createElement("label");i.textContent="File : ";const r=document.createElement("input");if(r.setAttribute("type","file"),t.appendChild(i),t.appendChild(r),(await(0,o.showDialog)({title:"Import Environment",body:new c.Widget({node:t}),buttons:[o.Dialog.cancelButton(),o.Dialog.okButton()]})).button.accept){if(0===a.value.length)throw new Error("A environment name should be provided.");if(0===(r.files?.length??0))throw new Error("A environment file should be selected.");e=o.Notification.emit(`Import environment ${a.value}`,"in-progress");const t=r.files[0],n=await this._readText(t);await this.props.model.import(a.value,n,t.name),o.Notification.update({id:e,message:`Environment ${a.value} created.`,type:"success",autoClose:5e3}),this.setState({currentEnvironment:a.value}),this.loadEnvironments()}}catch(t){"cancelled"!==t?(console.error(t),e?o.Notification.update({id:e,message:t.message,type:"error",autoClose:!1}):o.Notification.error(t.message)):e&&o.Notification.dismiss(e)}}async handleExportEnvironment(){try{const e=this.state.currentEnvironment;if(!e)return;const t=await this.props.model.export(e);if(t.ok){const n=await t.text(),a=document.createElement("div"),o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download",e+".yml"),a.style.display="none",a.appendChild(o),document.body.appendChild(a),o.click(),document.body.removeChild(a)}}catch(e){"cancelled"!==e&&(console.error(e),o.Notification.error(e.message))}}async handleRefreshEnvironment(){await this.loadEnvironments()}async handleRemoveEnvironment(){let e="";try{const t=this.state.currentEnvironment;if(!t)return;(await(0,o.showDialog)({title:"Remove Environment",body:`Are you sure you want to permanently delete environment "${t}" ?`,buttons:[o.Dialog.cancelButton(),o.Dialog.okButton({caption:"Delete",displayType:"warn"})]})).button.accept&&(e=o.Notification.emit(`Removing environment ${t}`,"in-progress"),await this.props.model.remove(t),o.Notification.update({id:e,message:`Environment ${t} has been removed.`,type:"success",autoClose:5e3}),this.state.currentEnvironment===t&&this.setState({currentEnvironment:void 0}),this.loadEnvironments())}catch(t){"cancelled"!==t?(console.error(t),e?o.Notification.update({id:e,message:t.message,type:"error",autoClose:!1}):o.Notification.error(t.message)):e&&o.Notification.dismiss(e)}}async loadEnvironments(){if(!this.state.isLoading){this.setState({isLoading:!0});try{const e={environments:await this.props.model.environments};void 0===this.state.currentEnvironment&&(e.environments.forEach((t=>{t.is_default&&(e.currentEnvironment=t.name)})),e.channels=await this.props.model.getChannels(e.currentEnvironment)),e.isLoading=!1,this.setState(e)}catch(e){"cancelled"!==e&&(console.error(e),o.Notification.error(e.message))}}}componentDidMount(){this.loadEnvironments()}render(){return l.createElement("div",{className:W.Panel},l.createElement(_,{height:this.props.height,isPending:this.state.isLoading,environments:this.state.environments,selected:this.state.currentEnvironment,onSelectedChange:this.handleEnvironmentChange,onCreate:this.handleCreateEnvironment,onClone:this.handleCloneEnvironment,onImport:this.handleImportEnvironment,onExport:this.handleExportEnvironment,onRefresh:this.handleRefreshEnvironment,onRemove:this.handleRemoveEnvironment}),l.createElement(Q,{height:this.props.height,width:this.props.width-250,packageManager:this.props.model.getPackageManager(this.state.currentEnvironment)}))}}!function(e){e.Panel=(0,d.iF)({width:"100%",display:"flex",flexDirection:"row",borderCollapse:"collapse"})}(W||(W={}));class Y extends i{constructor(e){super(),this._resizeSignal=new s.Signal(this),this._envModel=e}onResize(e){const{height:t,width:n}=e;this._resizeSignal.emit({height:t,width:n}),super.onResize(e)}render(){return l.createElement(r,{signal:this._resizeSignal,initialArgs:{height:0,width:0}},((e,t)=>l.createElement(K,{height:t.height,width:t.width,model:this._envModel})))}}const X=new a.LabIcon({name:"@mamba-org/gator-lab:conda",svgstr:'<svg\n   xmlns="http://www.w3.org/2000/svg"\n   version="1.1"\n   viewBox="0 0 32 32"\n>\n  <g\n     transform="translate(0,-288.53332)"\n     id="layer1">\n    <path\n       id="path4524"\n       transform="translate(0,288.53332)"\n       d="M 15.464844 0.2890625 C 10.532572 0.46372875 5.6744883 2.7638825 2.9316406 7.1171875 C -3.1950453 15.383908 1.4004053 28.557982 11.335938 31.226562 C 21.037771 34.626923 32.275324 26.360339 31.884766 16.074219 C 31.893598 12.524759 30.661113 8.9899438 28.447266 6.2148438 C 25.403349 2.0664537 20.397116 0.11439625 15.464844 0.2890625 z M 15.642578 5.3164062 C 19.004239 5.1973638 22.417562 6.5261406 24.492188 9.3535156 C 26.001067 11.244966 26.840004 13.655009 26.833984 16.074219 C 27.100174 23.084889 19.440549 28.719904 12.828125 26.402344 C 6.0564208 24.583524 2.9258322 15.60306 7.1015625 9.96875 C 8.9709896 7.001705 12.280918 5.4354487 15.642578 5.3164062 z "\n       style="fill:#3baf29;fill-opacity:1;stroke-width:1.98490679;stroke-miterlimit:4;stroke-dasharray:none" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 0.26938262,297.92945 C 3.7810355,296.31532 7.8503371,295.92724 11.610497,296.8016"\n       id="path4528" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 5.0644119,292.25647 c -0.4739812,3.8357 0.3894297,7.83124 2.362212,11.1496"\n       id="path4528-8" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M -1.09548,304.50624 C 1.767,301.90946 5.5304889,300.31386 9.379392,300.01516"\n       id="path4528-2" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 1.7683793,297.65256 c 0.7032257,3.80033 2.7298967,7.35032 5.6104711,9.92047"\n       id="path4528-8-4" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M -0.86357437,310.97102 C 1.3509942,307.80356 4.6663492,305.4123 8.3528986,304.26663"\n       id="path4528-2-6" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 0.21260444,303.86163 c 2.12159416,3.23048 5.36607136,5.7171 9.01778526,6.96941"\n       id="path4528-8-4-8" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 2.902101,317.30745 c 0.8829156,-3.76267 3.0758903,-7.2124 6.0752729,-9.64282"\n       id="path4528-2-6-8" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 0.37540797,309.70348 c 3.01572983,2.41712 6.86964513,3.77993 10.72960903,3.84298"\n       id="path4528-8-4-8-0" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 4.4102643,292.88266 c 3.8309474,-0.51081 7.8346027,0.31434 11.1717647,2.25492"\n       id="path4528-5" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 11.788587,289.43332 c -2.2962999,2.93729 -3.4473982,6.9266 -2.409195,10.58184"\n       id="path4528-8-1" />\n    <path\n       style="fill:none;stroke:#ffffff;stroke-width:0.9924534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 10.660742,288.86939 c 1.841925,0.2667 3.492402,1.24721 4.985484,2.30863 -0.91722,2.21223 -2.351376,4.23807 -4.177641,5.78866 0.533951,-0.59025 1.195816,-1.06367 1.807423,-1.57264"\n       id="path4528-5-3" />\n  </g>\n</svg>\n'});var Z=n(8708),ee=n(5955),te=n(7262);const ne=new te.Token("@mamba-org/gator-lab:IEnvironmentManager");var ae,oe;!function(e){e.PkgSubDirs=["linux-64","linux-32","linux-ppc64le","linux-armv6l","linux-armv7l","linux-aarch64","win-64","win-32","osx-64","zos-z","noarch"]}(ae||(ae={}));class ie{constructor(e){this._clean=()=>{},this._isDisposed=!1,this._environmentChanged=new s.Signal(this),this._environmentsTimer=-1,this._environmentTypes={python3:["python=3","ipykernel"],r:["r-base","r-essentials"]},this._fromHistory=!1,this._packageManager=new re,this._whitelist=!1,this._environments=new Array,e&&(this._updateSettings(e),e.changed.connect(this._updateSettings,this),new Promise((e=>{this._clean=e}).bind(this)).then((()=>{e.changed.disconnect(this._updateSettings,this)})))}get environments(){return this.refresh().then((()=>Promise.resolve(this._environments)))}get environmentChanged(){return this._environmentChanged}getPackageManager(e){return this._packageManager.environment=e,this._packageManager}get isDisposed(){return this._isDisposed}getEnvironmentFromType(e){return e in this._environmentTypes?this._environmentTypes[e]:e.split(" ")}get environmentTypes(){return Object.keys(this._environmentTypes)}_updateSettings(e){this._environmentTypes=e.get("types").composite,this._fromHistory=e.get("fromHistory").composite,this._whitelist=e.get("whitelist").composite}dispose(){this.isDisposed||(this._isDisposed=!0,clearInterval(this._environmentsTimer),this._clean(),this._environments.length=0)}async getChannels(e){try{const e={method:"GET"},{promise:t}=oe.requestServer(Z.URLExt.join("conda","channels"),e),n=await t;return n.ok?(await n.json()).channels:{}}catch(t){let n=t.message||t.toString();throw"cancelled"!==n&&(console.error(n),n=`Fail to get the channels for environment ${e}.`),new Error(n)}}async clone(e,t){try{const n={body:JSON.stringify({name:t,twin:e}),method:"POST"},{promise:a}=oe.requestServer(Z.URLExt.join("conda","environments"),n);(await a).ok&&this._environmentChanged.emit({name:t,source:e,type:"clone"})}catch(t){let n=t.message||t.toString();throw"cancelled"!==n&&(console.error(n),n=`An error occurred while cloning environment "${e}".`),new Error(n)}}async create(e,t){try{const n=this.getEnvironmentFromType(t||""),a={body:JSON.stringify({name:e,packages:n}),method:"POST"},{promise:o}=oe.requestServer(Z.URLExt.join("conda","environments"),a);(await o).ok&&this._environmentChanged.emit({name:e,source:n,type:"create"})}catch(t){let n=t.message||t.toString();throw"cancelled"!==n&&(console.error(n),n=`An error occurred while creating environment "${e}".`),new Error(n)}}export(e,t=null){null===t&&(t=this._fromHistory);try{const n={method:"GET"},a=Z.URLExt.objectToQueryString({download:1,history:t?1:0}),{promise:o}=oe.requestServer(Z.URLExt.join("conda","environments",e)+a,n);return o}catch(t){let n=t.message||t.toString();throw"cancelled"!==n&&(console.error(n),n=`An error occurred while exporting environment "${e}".`),new Error(n)}}async import(e,t,n){try{const a={name:e,file:t};n&&(a.filename=n);const o={body:JSON.stringify(a),method:"POST"},{promise:i}=oe.requestServer(Z.URLExt.join("conda","environments"),o);(await i).ok&&this._environmentChanged.emit({name:e,source:t,type:"import"})}catch(t){let n=t.message||t.toString();throw"cancelled"!==n&&(console.error(n),n=`An error occurred while importing "${e}".`),new Error(n)}}async refresh(){try{const e={method:"GET"},t={whitelist:this._whitelist?1:0},{promise:n}=oe.requestServer(Z.URLExt.join("conda","environments")+Z.URLExt.objectToQueryString(t),e),a=await n,o=await a.json();return this._environments=o.environments,o.environments}catch(e){let t=e.message||e.toString();throw"cancelled"!==t&&(console.error(t),t="An error occurred while listing Conda environments."),new Error(t)}}async remove(e){try{const t={method:"DELETE"},{promise:n}=await oe.requestServer(Z.URLExt.join("conda","environments",e),t);(await n).ok&&this._environmentChanged.emit({name:e,source:null,type:"remove"})}catch(t){let n=t.message||t.toString();throw"cancelled"!==n&&(console.error(n),n=`An error occurred while removing "${e}".`),new Error(n)}}async update(e,t,n){try{const a={file:t};n&&(a.filename=n);const o={body:JSON.stringify(a),method:"PATCH"},{promise:i}=oe.requestServer(Z.URLExt.join("conda","environments",e),o);(await i).ok&&this._environmentChanged.emit({name:e,source:t,type:"update"})}catch(t){let n=t.message||t.toString();throw"cancelled"!==n&&(console.error(n),n=`An error occurred while updating "${e}".`),new Error(n)}}}class re{constructor(e){this._packageChanged=new s.Signal(this),this._cancellableStack=[],this.environment=e}get packageChanged(){return this._packageChanged}async refresh(e=!0,t){const n=t||this.environment;if(void 0===n)return Promise.resolve([]);this._cancelTasks("default");try{const t={method:"GET"},{promise:a,cancel:o}=oe.requestServer(Z.URLExt.join("conda","environments",n),t),i=this._cancellableStack.push({type:"default",cancel:o})-1,r=await a;this._cancellableStack.splice(i,1);const s=(await r.json()).packages,l=[];e&&l.push(...await this._getAvailablePackages());const c=[];let d=0,h=0;for(;h<s.length||d<l.length;){const e=s[h];let t=l[d]||{...e,version:[e.version],build_number:[e.build_number],build_string:[e.build_string],summary:"",home:"",keywords:"",tags:""};t.summary=t.summary||"",t.keywords=(t.keywords||"").toString().toLowerCase(),t.tags=(t.tags||"").toString().toLowerCase(),t.version_installed="",t.version_selected="none",t.updatable=!1,void 0!==e&&(t.name>e.name&&(t={...e,version:[e.version],build_number:[e.build_number],build_string:[e.build_string],summary:"",home:"",keywords:"",tags:""},d-=1),t.name===e.name&&(t.version_installed=e.version,t.version_selected=e.version,t.version.indexOf(e.version)<0&&t.version.push(e.version),h+=1));const n=t.channel.split("/");if(n.length>2){let e=0;for(["http:","https:","file:"].indexOf(n[e])>=0&&(e=1);0===n[e].length;)e+=1;t.channel=n[e];let a=n.length-1;for(;ae.PkgSubDirs.indexOf(n[a])>-1&&a>e;)a-=1;a>e&&(t.channel+="/..."),t.channel+="/"+n[a]}c.push(t),d+=1}return c}catch(e){let t=e.message||e.toString();throw"cancelled"!==t&&(console.error(t),t="An error occurred while retrieving available packages."),new Error(t)}}async install(e,t){const n=t||this.environment;if(void 0===n||0===e.length)return Promise.resolve();try{const t={body:JSON.stringify({packages:e}),method:"POST"},{promise:a}=oe.requestServer(Z.URLExt.join("conda","environments",n,"packages"),t);(await a).ok&&this._packageChanged.emit({environment:n,type:"install",packages:e})}catch(e){let t=e.message||e.toString();throw"cancelled"!==t&&(console.error(t),t="An error occurred while installing packages."),new Error(t)}}async develop(e,t){const n=t||this.environment;if(void 0===n||0===e.length)return Promise.resolve();try{const t={body:JSON.stringify({packages:[e]}),method:"POST"},{promise:a}=oe.requestServer(Z.URLExt.join("conda","environments",n,"packages")+Z.URLExt.objectToQueryString({develop:1}),t);(await a).ok&&this._packageChanged.emit({environment:n,type:"develop",packages:[e]})}catch(t){let n=t.message||t.toString();throw"cancelled"!==n&&(console.error(n),n=`An error occurred while installing in development mode package in ${e}.`),new Error(n)}}async check_updates(e){const t=e||this.environment;if(void 0===t)return Promise.resolve([]);this._cancelTasks("default");try{const e={method:"GET"},{promise:n,cancel:a}=oe.requestServer(Z.URLExt.join("conda","environments",t)+Z.URLExt.objectToQueryString({status:"has_update"}),e),o=this._cancellableStack.push({type:"default",cancel:a})-1,i=await n;return this._cancellableStack.splice(o,1),(await i.json()).updates.map((e=>e.name))}catch(e){let t=e.message||e.toString();throw"cancelled"!==t&&(console.error(t),t="An error occurred while checking for package updates."),new Error(t)}}async update(e,t){const n=t||this.environment;if(void 0===n)return Promise.resolve();try{const t={body:JSON.stringify({packages:e}),method:"PATCH"},{promise:a}=oe.requestServer(Z.URLExt.join("conda","environments",n,"packages"),t);(await a).ok&&this._packageChanged.emit({environment:n,type:"update",packages:e})}catch(e){let t=e.message||e.toString();throw"cancelled"!==t&&(console.error(t),t="An error occurred while updating packages."),new Error(t)}}async remove(e,t){const n=t||this.environment;if(void 0===n)return Promise.resolve();try{const t={body:JSON.stringify({packages:e}),method:"DELETE"},{promise:a}=oe.requestServer(Z.URLExt.join("conda","environments",n,"packages"),t);(await a).ok&&this._packageChanged.emit({environment:n,type:"remove",packages:e})}catch(e){let t=e.message||e.toString();throw"cancelled"!==t&&(console.error(t),t="An error occurred while removing packages."),new Error(t)}}async getDependencies(e,t=!0){this._cancelTasks("getDependencies");const{promise:n,cancel:a}=oe.requestServer(Z.URLExt.join("conda","packages")+Z.URLExt.objectToQueryString({dependencies:1,query:e}),{method:"GET"});let o;t&&(o=this._cancellableStack.push({type:"getDependencies",cancel:a})-1);const i=await n;o&&this._cancellableStack.splice(o,1);const r=await i.json();return Promise.resolve(r)}async refreshAvailablePackages(e=!0){await this._getAvailablePackages(!0,e)}hasDescription(){return re._hasDescription}async _getAvailablePackages(e=!1,t=!0){if(this._cancelTasks("default"),null===re._availablePackages||e){const e={method:"GET"},{promise:n,cancel:a}=oe.requestServer(Z.URLExt.join("conda","packages"),e);let o;t&&(o=this._cancellableStack.push({type:"default",cancel:a})-1);const i=await n;o&&this._cancellableStack.splice(o,1);const r=await i.json();re._availablePackages=r.packages,re._hasDescription=r.with_description||!1}return Promise.resolve(re._availablePackages)}_cancelTasks(e){this._cancellableStack.length>0&&this._cancellableStack.splice(0,this._cancellableStack.length).forEach((t=>{t.type===e&&t.cancel()}))}}re._availablePackages=null,re._hasDescription=!1,function(e){e.requestServer=function(t,n){const a=ee.ServerConnection.makeSettings(),o=Z.URLExt.join(a.baseUrl,t);let i,r=!1;const s=new te.PromiseDelegate;return ee.ServerConnection.makeRequest(o,n,a).then((a=>{if(a.ok)if(202===a.status){const n=a.headers.get("Location")||t;setTimeout(((t,n)=>{r&&(console.debug(`Request cancelled ${t}.`),n={...n,method:"DELETE"}),i=e.requestServer(t,n),i.promise.then((e=>s.resolve(e))).catch((e=>s.reject(e)))}),1e3,n,{method:"GET"})}else s.resolve(a);else a.json().then((e=>s.reject(new ee.ServerConnection.ResponseError(a,e.error)))).catch((e=>{console.error("Fail to read JSON response for request",n,e)}))})).catch((e=>{s.reject(new ee.ServerConnection.NetworkError(e))})),{promise:s.promise,cancel:()=>{r=!0,i&&i.cancel(),s.reject("cancelled")}}}}(oe||(oe={}))}}]);