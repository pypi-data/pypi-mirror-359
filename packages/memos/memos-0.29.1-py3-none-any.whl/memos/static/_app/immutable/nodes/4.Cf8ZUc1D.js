var wt=Object.defineProperty;var rt=r=>{throw TypeError(r)};var Pt=(r,e,i)=>e in r?wt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i;var I=(r,e,i)=>Pt(r,typeof e!="symbol"?e+"":e,i),nt=(r,e,i)=>e.has(r)||rt("Cannot "+i);var o=(r,e,i)=>(nt(r,e,"read from private field"),i?i.call(r):e.get(r)),h=(r,e,i)=>e.has(r)?rt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,i),Se=(r,e,i,n)=>(nt(r,e,"write to private field"),n?n.call(r,i):e.set(r,i),i);import"../chunks/CWj6FrbW.js";import{p as de,c as Y,f as j,s as ne,n as _e,b as s,a as ce,af as M,i as t,v as f,ad as X,ak as Ct,z as st,J as L,M as y,N as m,ah as ht,ac as ft,K as fe,O as ie,al as Ve,ag as Ye,Q as qe,B as Dt}from"../chunks/DX-2ULJ8.js";import{i as se,c as Q,b as Tt}from"../chunks/BelfHvF5.js";import{b as O,o as xt,C as vt,w as at,u as pt,g as gt,n as et,a as _t,m as Ke,c as Ot,P as ve}from"../chunks/DwHAsTpl.js";import{i as kt,a as Nt,u as It,o as Et,b as Ft,F as St,P as Kt,c as At,g as lt,d as Lt,E as Ht,e as Rt}from"../chunks/DI_BVPa4.js";import{I as Mt,a as be,e as dt,s as me,i as ct}from"../chunks/DB9DHYT7.js";import{s as Ae,r as Ue,p as g}from"../chunks/HpyZ4HED.js";import{g as yt}from"../chunks/DgDAr6fC.js";import{L as ut}from"../chunks/DW1eWcWC.js";function jt(r,e){de(e,!0);let i=Ue(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];Mt(r,Ae({name:"house"},()=>i,{get iconNode(){return n},children:(l,v)=>{var d=Y(),D=j(d);ne(D,()=>e.children??_e),s(l,d)},$$slots:{default:!0}})),ce()}function tt(r,e,i={}){const{immediate:n=!0}=i,l=O(!1);let v;function d(){v&&(clearTimeout(v),v=null)}function D(){l.current=!1,d()}function T(...H){d(),l.current=!0,v=setTimeout(()=>{l.current=!1,v=null,r(...H)},e)}return n&&(l.current=!0,kt&&T()),xt(()=>{D()}),{isPending:O.readonly(l),start:T,stop:D}}const zt="data-tooltip-content",Bt="data-tooltip-trigger";var we,pe,te,Le,He;class Wt{constructor(e){I(this,"opts");h(this,we,X(!0));I(this,"isPointerInTransit",O(!1));h(this,pe);h(this,te,X(null));h(this,Le,()=>{this.opts.skipDelayDuration.current!==0&&o(this,pe).start()});h(this,He,()=>{o(this,pe).stop()});I(this,"onOpen",e=>{t(o(this,te))&&t(o(this,te))!==e&&t(o(this,te)).handleClose(),o(this,He).call(this),this.isOpenDelayed=!1,f(o(this,te),e,!0)});I(this,"onClose",e=>{t(o(this,te))===e&&f(o(this,te),null),o(this,Le).call(this)});I(this,"isTooltipOpen",e=>t(o(this,te))===e);this.opts=e,Se(this,pe,tt(()=>{this.isOpenDelayed=!0},this.opts.skipDelayDuration.current,{immediate:!1}))}get isOpenDelayed(){return t(o(this,we))}set isOpenDelayed(e){f(o(this,we),e,!0)}}we=new WeakMap,pe=new WeakMap,te=new WeakMap,Le=new WeakMap,He=new WeakMap;var Pe,Ce,De,Te,xe,Oe,ke,le,oe,Ne,Re;class Gt{constructor(e,i){I(this,"opts");I(this,"provider");h(this,Pe,M(()=>this.opts.delayDuration.current??this.provider.opts.delayDuration.current));h(this,Ce,M(()=>this.opts.disableHoverableContent.current??this.provider.opts.disableHoverableContent.current));h(this,De,M(()=>this.opts.disableCloseOnTriggerClick.current??this.provider.opts.disableCloseOnTriggerClick.current));h(this,Te,M(()=>this.opts.disabled.current??this.provider.opts.disabled.current));h(this,xe,M(()=>this.opts.ignoreNonKeyboardFocus.current??this.provider.opts.ignoreNonKeyboardFocus.current));h(this,Oe,X(null));h(this,ke,X(null));h(this,le,X(!1));h(this,oe);h(this,Ne,M(()=>this.opts.open.current?t(o(this,le))?"delayed-open":"instant-open":"closed"));I(this,"handleOpen",()=>{o(this,oe).stop(),f(o(this,le),!1),this.opts.open.current=!0});I(this,"handleClose",()=>{o(this,oe).stop(),this.opts.open.current=!1});h(this,Re,()=>{o(this,oe).stop();const e=!this.provider.isOpenDelayed,i=this.delayDuration??0;e||i===0?(f(o(this,le),i>0&&e,!0),this.opts.open.current=!0):o(this,oe).start()});I(this,"onTriggerEnter",()=>{o(this,Re).call(this)});I(this,"onTriggerLeave",()=>{this.disableHoverableContent?this.handleClose():o(this,oe).stop()});this.opts=e,this.provider=i,Se(this,oe,tt(()=>{f(o(this,le),!0),this.opts.open.current=!0},this.delayDuration??0,{immediate:!1})),at(()=>this.delayDuration,()=>{this.delayDuration!==void 0&&Se(this,oe,tt(()=>{f(o(this,le),!0),this.opts.open.current=!0},this.delayDuration,{immediate:!1}))}),at(()=>this.opts.open.current,n=>{n?this.provider.onOpen(this):this.provider.onClose(this)})}get delayDuration(){return t(o(this,Pe))}set delayDuration(e){f(o(this,Pe),e)}get disableHoverableContent(){return t(o(this,Ce))}set disableHoverableContent(e){f(o(this,Ce),e)}get disableCloseOnTriggerClick(){return t(o(this,De))}set disableCloseOnTriggerClick(e){f(o(this,De),e)}get disabled(){return t(o(this,Te))}set disabled(e){f(o(this,Te),e)}get ignoreNonKeyboardFocus(){return t(o(this,xe))}set ignoreNonKeyboardFocus(e){f(o(this,xe),e)}get contentNode(){return t(o(this,Oe))}set contentNode(e){f(o(this,Oe),e,!0)}get triggerNode(){return t(o(this,ke))}set triggerNode(e){f(o(this,ke),e,!0)}get stateAttr(){return t(o(this,Ne))}set stateAttr(e){f(o(this,Ne),e)}}Pe=new WeakMap,Ce=new WeakMap,De=new WeakMap,Te=new WeakMap,xe=new WeakMap,Oe=new WeakMap,ke=new WeakMap,le=new WeakMap,oe=new WeakMap,Ne=new WeakMap,Re=new WeakMap;var he,ge,V,Me,je,ze,Be,We,Ge,Je,Ie;class Jt{constructor(e,i){I(this,"opts");I(this,"root");h(this,he,O(!1));h(this,ge,X(!1));h(this,V,M(()=>this.opts.disabled.current||this.root.disabled));I(this,"handlePointerUp",()=>{o(this,he).current=!1});h(this,Me,()=>{t(o(this,V))||(o(this,he).current=!1)});h(this,je,()=>{t(o(this,V))||(o(this,he).current=!0,document.addEventListener("pointerup",()=>{this.handlePointerUp()},{once:!0}))});h(this,ze,e=>{t(o(this,V))||e.pointerType!=="touch"&&(t(o(this,ge))||this.root.provider.isPointerInTransit.current||(this.root.onTriggerEnter(),f(o(this,ge),!0)))});h(this,Be,()=>{t(o(this,V))||(this.root.onTriggerLeave(),f(o(this,ge),!1))});h(this,We,e=>{o(this,he).current||t(o(this,V))||this.root.ignoreNonKeyboardFocus&&!Nt(e.currentTarget)||this.root.handleOpen()});h(this,Ge,()=>{t(o(this,V))||this.root.handleClose()});h(this,Je,()=>{this.root.disableCloseOnTriggerClick||t(o(this,V))||this.root.handleClose()});h(this,Ie,M(()=>{var e;return{id:this.opts.id.current,"aria-describedby":this.root.opts.open.current?(e=this.root.contentNode)==null?void 0:e.id:void 0,"data-state":this.root.stateAttr,"data-disabled":gt(t(o(this,V))),"data-delay-duration":`${this.root.delayDuration}`,[Bt]:"",tabindex:t(o(this,V))?void 0:0,disabled:this.opts.disabled.current,onpointerup:o(this,Me),onpointerdown:o(this,je),onpointermove:o(this,ze),onpointerleave:o(this,Be),onfocus:o(this,We),onblur:o(this,Ge),onclick:o(this,Je)}}));this.opts=e,this.root=i,pt({...e,onRefChange:n=>{this.root.triggerNode=n}})}get props(){return t(o(this,Ie))}set props(e){f(o(this,Ie),e)}}he=new WeakMap,ge=new WeakMap,V=new WeakMap,Me=new WeakMap,je=new WeakMap,ze=new WeakMap,Be=new WeakMap,We=new WeakMap,Ge=new WeakMap,Je=new WeakMap,Ie=new WeakMap;var Ee,Fe;class Ut{constructor(e,i){I(this,"opts");I(this,"root");I(this,"onInteractOutside",e=>{var i;if(Ft(e.target)&&((i=this.root.triggerNode)!=null&&i.contains(e.target))&&this.root.disableCloseOnTriggerClick){e.preventDefault();return}this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()});I(this,"onEscapeKeydown",e=>{var i,n;(n=(i=this.opts.onEscapeKeydown).current)==null||n.call(i,e),!e.defaultPrevented&&this.root.handleClose()});I(this,"onOpenAutoFocus",e=>{e.preventDefault()});I(this,"onCloseAutoFocus",e=>{e.preventDefault()});h(this,Ee,M(()=>({open:this.root.opts.open.current})));h(this,Fe,M(()=>({id:this.opts.id.current,"data-state":this.root.stateAttr,"data-disabled":gt(this.root.disabled),style:{pointerEvents:"auto",outline:"none"},[zt]:""})));I(this,"popperProps",{onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus});this.opts=e,this.root=i,pt({...e,onRefChange:n=>{this.root.contentNode=n},deps:()=>this.root.opts.open.current}),It({triggerNode:()=>this.root.triggerNode,contentNode:()=>this.root.contentNode,enabled:()=>this.root.opts.open.current&&!this.root.disableHoverableContent,onPointerExit:()=>{this.root.provider.isTooltipOpen(this.root)&&this.root.handleClose()},setIsPointerInTransit:n=>{this.root.provider.isPointerInTransit.current=n},transitTimeout:this.root.provider.opts.skipDelayDuration.current}),Et(()=>Ct(window,"scroll",n=>{const l=n.target;l&&l.contains(this.root.triggerNode)&&this.root.handleClose()}))}get snippetProps(){return t(o(this,Ee))}set snippetProps(e){f(o(this,Ee),e)}get props(){return t(o(this,Fe))}set props(e){f(o(this,Fe),e)}}Ee=new WeakMap,Fe=new WeakMap;const mt=new vt("Tooltip.Provider"),ot=new vt("Tooltip.Root");function Zt(r){return mt.set(new Wt(r))}function Vt(r){return ot.set(new Gt(r,mt.get()))}function Yt(r){return new Jt(r,ot.get())}function qt(r){return new Ut(r,ot.get())}function Qt(r,e){de(e,!0);let i=g(e,"open",15,!1),n=g(e,"onOpenChange",3,et);Vt({open:O.with(()=>i(),l=>{i(l),n()(l)}),delayDuration:O.with(()=>e.delayDuration),disableCloseOnTriggerClick:O.with(()=>e.disableCloseOnTriggerClick),disableHoverableContent:O.with(()=>e.disableHoverableContent),ignoreNonKeyboardFocus:O.with(()=>e.ignoreNonKeyboardFocus),disabled:O.with(()=>e.disabled)}),St(r,{children:(l,v)=>{var d=Y(),D=j(d);ne(D,()=>e.children??_e),s(l,d)},$$slots:{default:!0}}),ce()}var Xt=L("<div><div><!></div></div>"),$t=L("<div><div><!></div></div>");function eo(r,e){de(e,!0);let i=g(e,"id",19,_t),n=g(e,"ref",15,null),l=g(e,"side",3,"top"),v=g(e,"sideOffset",3,0),d=g(e,"align",3,"center"),D=g(e,"avoidCollisions",3,!0),T=g(e,"arrowPadding",3,0),H=g(e,"sticky",3,"partial"),$=g(e,"hideWhenDetached",3,!1),re=g(e,"collisionPadding",3,0),b=g(e,"onInteractOutside",3,et),J=g(e,"onEscapeKeydown",3,et),z=g(e,"forceMount",3,!1),U=Ue(e,["$$slots","$$events","$$legacy","children","child","id","ref","side","sideOffset","align","avoidCollisions","arrowPadding","sticky","hideWhenDetached","collisionPadding","onInteractOutside","onEscapeKeydown","forceMount"]);const F=qt({id:O.with(()=>i()),ref:O.with(()=>n(),c=>n(c)),onInteractOutside:O.with(()=>b()),onEscapeKeydown:O.with(()=>J())}),ee=M(()=>({side:l(),sideOffset:v(),align:d(),avoidCollisions:D(),arrowPadding:T(),sticky:H(),hideWhenDetached:$(),collisionPadding:re()})),ae=M(()=>Ke(U,t(ee),F.props));var w=Y(),A=j(w);{var P=c=>{Kt(c,Ae(()=>t(ae),()=>F.popperProps,{get enabled(){return F.root.opts.open.current},get id(){return i()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!0,popper:(B,S)=>{let q=()=>S==null?void 0:S().props,Z=()=>S==null?void 0:S().wrapperProps;var N=Y();const R=M(()=>Ke(q(),{style:lt("tooltip")}));var G=j(N);{var E=_=>{var x=Y(),p=j(x),a=st(()=>({props:t(R),wrapperProps:Z(),...F.snippetProps}));ne(p,()=>e.child,()=>t(a)),s(_,x)},C=_=>{var x=Xt();be(x,()=>({...Z()}));var p=y(x);be(p,()=>({...t(R)}));var a=y(p);ne(a,()=>e.children??_e),m(p),m(x),s(_,x)};se(G,_=>{e.child?_(E):_(C,!1)})}s(B,N)},$$slots:{popper:!0}}))},k=(c,W)=>{{var B=S=>{At(S,Ae(()=>t(ae),()=>F.popperProps,{get present(){return F.root.opts.open.current},get id(){return i()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!1,popper:(Z,N)=>{let R=()=>N==null?void 0:N().props,G=()=>N==null?void 0:N().wrapperProps;var E=Y();const C=M(()=>Ke(R(),{style:lt("tooltip")}));var _=j(E);{var x=a=>{var u=Y(),K=j(u),ye=st(()=>({props:t(C),wrapperProps:G(),...F.snippetProps}));ne(K,()=>e.child,()=>t(ye)),s(a,u)},p=a=>{var u=$t();be(u,()=>({...G()}));var K=y(u);be(K,()=>({...t(C)}));var ye=y(K);ne(ye,()=>e.children??_e),m(K),m(u),s(a,u)};se(_,a=>{e.child?a(x):a(p,!1)})}s(Z,E)},$$slots:{popper:!0}}))};se(c,S=>{z()||S(B)},W)}};se(A,c=>{z()?c(P):c(k,!1)})}s(r,w),ce()}var to=L("<button><!></button>");function oo(r,e){de(e,!0);let i=g(e,"id",19,_t),n=g(e,"disabled",3,!1),l=g(e,"type",3,"button"),v=g(e,"ref",15,null),d=Ue(e,["$$slots","$$events","$$legacy","children","child","id","disabled","type","ref"]);const D=Yt({id:O.with(()=>i()),disabled:O.with(()=>n()??!1),ref:O.with(()=>v(),H=>v(H))}),T=M(()=>Ke(d,D.props,{type:l()}));Lt(r,{get id(){return i()},children:(H,$)=>{var re=Y(),b=j(re);{var J=U=>{var F=Y(),ee=j(F);ne(ee,()=>e.child,()=>({props:t(T)})),s(U,F)},z=U=>{var F=to();be(F,()=>({...t(T)}));var ee=y(F);ne(ee,()=>e.children??_e),m(F),s(U,F)};se(b,U=>{e.child?U(J):U(z,!1)})}s(H,re)},$$slots:{default:!0}}),ce()}function io(r,e){de(e,!0);let i=g(e,"delayDuration",3,700),n=g(e,"disableCloseOnTriggerClick",3,!1),l=g(e,"disableHoverableContent",3,!1),v=g(e,"disabled",3,!1),d=g(e,"ignoreNonKeyboardFocus",3,!1),D=g(e,"skipDelayDuration",3,300);Zt({delayDuration:O.with(()=>i()),disableCloseOnTriggerClick:O.with(()=>n()),disableHoverableContent:O.with(()=>l()),disabled:O.with(()=>v()),ignoreNonKeyboardFocus:O.with(()=>d()),skipDelayDuration:O.with(()=>D())});var T=Y(),H=j(T);ne(H,()=>e.children??_e),s(r,T),ce()}function Qe(r,e){de(e,!0);let i=g(e,"ref",15,null),n=g(e,"sideOffset",3,4),l=Ue(e,["$$slots","$$events","$$legacy","ref","class","sideOffset"]);var v=Y(),d=j(v);const D=M(()=>Ot("bg-popover text-popover-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 overflow-hidden rounded-md border px-3 py-1.5 text-sm shadow-md",e.class));Q(d,()=>eo,(T,H)=>{H(T,Ae({get sideOffset(){return n()},get class(){return t(D)}},()=>l,{get ref(){return i()},set ref($){i($)}}))}),s(r,v),ce()}const Xe=Qt,$e=oo,ro=io;var no=(r,e,i)=>e(t(i).id,r),so=L('<a class="block w-full h-full rounded-lg overflow-hidden cursor-pointer opacity-70 hover:opacity-100 transition-opacity"><img alt="" class="w-full h-full object-cover"/></a>'),ao=L("<!> <!>",1),lo=L('<div class="flex-none w-24 h-24"><!></div>'),co=L('<img alt="" class="w-full h-full object-cover"/>'),uo=L("<!> <!>",1),ho=(r,e,i)=>e(t(i).id,r),fo=L('<a class="flex-none w-full h-full rounded-lg overflow-hidden cursor-pointer opacity-70 hover:opacity-100 transition-opacity"><img alt="" class="w-full h-full object-cover"/></a>'),vo=L("<!> <!>",1),po=L('<div class="flex-none w-24 h-24"><!></div>'),go=L('<!> <div class="flex-none w-28 h-28 rounded-lg overflow-hidden border-2 border-indigo-500 shadow-md"><!></div> <!>',1),_o=L('<div class="h-full w-full flex items-center"><div class="w-full px-2 overflow-x-auto"><div class="flex items-center justify-start gap-3 min-w-max pb-2"><!></div></div></div>');function yo(r,e){de(e,!0);let i=g(e,"contextData",19,()=>({prev:[],next:[]}));function n(b,J){J.preventDefault(),yt(`/entities/${b}`,{replaceState:!1,noScroll:!0}),e.onSelectEntity(b)}function l(b){if(!b)return"";try{const J=b.endsWith("Z")?b:b+"Z",z=new Date(J);return console.log(z),z.toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}catch{try{return new Date(b).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}}}let v;function d(b){Math.abs(b.deltaY)>=10&&b.deltaMode===0&&(b.preventDefault(),v.scrollLeft+=b.deltaY)}ft(()=>{if(v)return v.addEventListener("wheel",d,{passive:!1}),()=>{v.removeEventListener("wheel",d)}});const D=ve+"/api";var T=_o(),H=y(T),$=y(H),re=y($);Q(re,()=>ro,(b,J)=>{J(b,{delayDuration:0,children:(z,U)=>{var F=go(),ee=j(F);dt(ee,17,()=>i().prev,ct,(P,k)=>{var c=lo(),W=y(c);Q(W,()=>Xe,(B,S)=>{S(B,{children:(q,Z)=>{var N=ao(),R=j(N);Q(R,()=>$e,(E,C)=>{C(E,{class:"w-full h-full",children:(_,x)=>{var p=so();p.__click=[no,n,k];var a=y(p);m(p),fe(u=>{me(p,"href",`/entities/${t(k).id}`),me(a,"src",u)},[()=>`${D}/thumbnails/${t(k).filepath.replace(/^\/+/,"")}`]),s(_,p)},$$slots:{default:!0}})});var G=ie(R,2);Q(G,()=>Qe,(E,C)=>{C(E,{children:(_,x)=>{Ve();var p=Ye();fe((a,u,K)=>qe(p,`${a??""} ${u??""} ${K??""}`),[()=>{var a,u;return((u=(a=t(k).metadata_entries)==null?void 0:a.find(K=>K.key==="screen_name"))==null?void 0:u.value)||""},()=>{var a,u;return((u=(a=t(k).metadata_entries)==null?void 0:a.find(K=>K.key==="active_app"))==null?void 0:u.value)||""},()=>l(t(k).file_created_at)]),s(_,p)},$$slots:{default:!0}})}),s(q,N)},$$slots:{default:!0}})}),m(c),s(P,c)});var ae=ie(ee,2),w=y(ae);Q(w,()=>Xe,(P,k)=>{k(P,{children:(c,W)=>{var B=uo(),S=j(B);Q(S,()=>$e,(Z,N)=>{N(Z,{class:"w-full h-full",children:(R,G)=>{var E=co();fe(C=>me(E,"src",C),[()=>e.entity.image||`${D}/thumbnails/${e.entity.filepath.replace(/^\/+/,"")}`]),s(R,E)},$$slots:{default:!0}})});var q=ie(S,2);Q(q,()=>Qe,(Z,N)=>{N(Z,{children:(R,G)=>{Ve();var E=Ye();fe((C,_,x)=>qe(E,`${C??""} ${_??""} ${x??""}`),[()=>{var C,_;return((_=(C=e.entity.metadata_entries)==null?void 0:C.find(x=>x.key==="screen_name"))==null?void 0:_.value)||""},()=>{var C,_;return((_=(C=e.entity.metadata_entries)==null?void 0:C.find(x=>x.key==="active_app"))==null?void 0:_.value)||""},()=>l(e.entity.file_created_at)]),s(R,E)},$$slots:{default:!0}})}),s(c,B)},$$slots:{default:!0}})}),m(ae);var A=ie(ae,2);dt(A,17,()=>i().next,ct,(P,k)=>{var c=po(),W=y(c);Q(W,()=>Xe,(B,S)=>{S(B,{children:(q,Z)=>{var N=vo(),R=j(N);Q(R,()=>$e,(E,C)=>{C(E,{class:"w-full h-full",children:(_,x)=>{var p=fo();p.__click=[ho,n,k];var a=y(p);m(p),fe(u=>{me(p,"href",`/entities/${t(k).id}`),me(a,"src",u)},[()=>`${D}/thumbnails/${t(k).filepath.replace(/^\/+/,"")}`]),s(_,p)},$$slots:{default:!0}})});var G=ie(R,2);Q(G,()=>Qe,(E,C)=>{C(E,{children:(_,x)=>{Ve();var p=Ye();fe((a,u,K)=>qe(p,`${a??""} ${u??""} ${K??""}`),[()=>{var a,u;return((u=(a=t(k).metadata_entries)==null?void 0:a.find(K=>K.key==="screen_name"))==null?void 0:u.value)||""},()=>{var a,u;return((u=(a=t(k).metadata_entries)==null?void 0:a.find(K=>K.key==="active_app"))==null?void 0:u.value)||""},()=>l(t(k).file_created_at)]),s(_,p)},$$slots:{default:!0}})}),s(q,N)},$$slots:{default:!0}})}),m(c),s(P,c)}),s(z,F)},$$slots:{default:!0}})}),m($),m(H),Tt(H,b=>v=b,()=>v),m(T),s(r,T),ce()}ht(["click"]);function mo(){yt("/")}var bo=L('<button class="p-2 rounded-full hover:bg-gray-100 flex items-center gap-2 text-indigo-600 -ml-2"><!></button>'),wo=L('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full z-40 flex items-center justify-center"><!></div>'),Po=L('<div class="absolute inset-0 flex items-center justify-center z-50"><div class="bg-white p-4 rounded-lg shadow-lg flex items-center justify-center"><!></div></div>'),Co=L('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full z-40 flex flex-col"><div class="flex-grow flex flex-col"><div class="flex flex-col h-[calc(100vh-180px)] w-11/12 max-w-[95vw] mx-auto mt-6 rounded-t-md bg-white overflow-hidden relative"><!> <div class="flex-grow overflow-hidden"><div class="h-full px-10 py-4"><div class="flex flex-col md:flex-row h-full"><!> <!></div></div></div></div></div> <div class="h-[180px] w-full bg-gray-50 shadow-inner border-t"><div class="mx-auto h-full py-3"><!></div></div> <div class="sr-only"><button>Previous</button> <button>Next</button></div></div>'),Do=L("<p>Entity not found.</p>");function Ao(r,e){de(e,!0);const i=w=>{var A=bo();A.__click=[mo];var P=y(A);jt(P,{size:24,class:"text-indigo-600"}),m(A),s(w,A)};let n=X(null),l=X(!0),v=X(!1),d=X(Dt({prev:[],next:[]}));const D=12;let T=X(!0);function H(){f(T,!t(T)),localStorage.setItem("entityShowDetails",JSON.stringify(t(T)))}function $(){t(d).prev&&t(d).prev.length>0&&z(t(d).prev[t(d).prev.length-1].id)}function re(){t(d).next&&t(d).next.length>0&&z(t(d).next[0].id)}function b(w){w.key==="ArrowLeft"?$():w.key==="ArrowRight"&&re()}ft(()=>{const w=localStorage.getItem("entityShowDetails");return w!==null&&f(T,JSON.parse(w),!0),(async()=>{const P=window.location.pathname.split("/").pop(),c=await fetch(`${ve}/api/entities/${P}`);f(n,await c.json(),!0),f(l,!1),t(n)&&t(n).library_id&&t(n).id&&J(t(n).library_id,t(n).id)})(),window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}});async function J(w,A){try{const P=await fetch(`${ve}/api/libraries/${w}/entities/${A}/context?prev=${D}&next=${D}`);P.ok&&f(d,await P.json(),!0)}catch(P){console.error("Error fetching entity context:",P)}}async function z(w){const A=`/entities/${w}`;window.history.pushState({id:w},"",A),f(v,!0);try{const P=typeof ve<"u"?ve:window.location.origin,k=await fetch(`${P}/api/entities/${w}`);if(f(n,await k.json(),!0),t(n)&&t(n).library_id&&t(n).id){const c=await fetch(`${ve}/api/libraries/${t(n).library_id}/entities/${t(n).id}/context?prev=${D}&next=${D}`);c.ok&&f(d,await c.json(),!0)}}catch(P){console.error("Error navigating to entity:",P)}finally{f(v,!1)}}var U=Y(),F=j(U);{var ee=w=>{var A=wo(),P=y(A);ut(P,{size:36,class:"text-primary animate-spin"}),m(A),s(w,A)},ae=(w,A)=>{{var P=c=>{var W=Co(),B=y(W),S=y(B),q=y(S);{var Z=ue=>{var Ze=Po(),it=y(Ze),bt=y(it);ut(bt,{size:28,class:"text-primary animate-spin"}),m(it),m(Ze),s(ue,Ze)};se(q,ue=>{t(v)&&ue(Z)})}var N=ie(q,2),R=y(N),G=y(R),E=y(G);Ht(E,{get entity(){return t(n)},get showDetails(){return t(T)},toggleDetails:H,get LeftIcon(){return i}});var C=ie(E,2);{var _=ue=>{Rt(ue,{get entity(){return t(n)}})};se(C,ue=>{t(T)&&ue(_)})}m(G),m(R),m(N),m(S),m(B);var x=ie(B,2),p=y(x),a=y(p);yo(a,{get entity(){return t(n)},get contextData(){return t(d)},onSelectEntity:z}),m(p),m(x);var u=ie(x,2),K=y(u);K.__click=$;var ye=ie(K,2);ye.__click=re,m(u),m(W),s(c,W)},k=c=>{var W=Do();s(c,W)};se(w,c=>{t(n)?c(P):c(k,!1)},A)}};se(F,w=>{t(l)?w(ee):w(ae,!1)})}s(r,U),ce()}ht(["click"]);export{Ao as component};
