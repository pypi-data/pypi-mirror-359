import{_ as g,b,u as h,g as n,h as m,d as x,c as S,i as f,o as _}from"./index-C5325MdZ.js";import{p as l}from"./parameters-CkHETJ4h.js";import{_ as M}from"./ConnectedLayout-C_XIIKhP.js";import{u as R}from"./parameters.store-nb_HTF1n.js";import"./VContainer-DhiTykbN.js";/* empty css              */import"./tag-D2dRSi3w.js";import"./VApp-DOKhYvT_.js";import"./layout-DON_nm1n.js";import"./ssrBoot-Bg1BB49m.js";import"./global.store-D9HjM5Ng.js";import"./layout.store-g0jC3Kvh.js";import"./index-B-rQUgVu.js";import"./VProgressCircular-CYaqOboK.js";import"./forwardRefs-Dlri9WEl.js";import"./VAvatar-Dy7UDVH7.js";import"./VMenu-CWF66mQ3.js";import"./VCard-COPSw5az.js";import"./VRow-BA1qwRZ9.js";import"./VSheet-KcHLba8T.js";const v={getCapabilities(){return g.get("/capabilities/")}},K={__name:"AdminLayout",setup(D){const{$gettext:t}=b();f();const p=h(),i=R(),a=n(!1),s=n("/rspamd"),d=m(()=>p.authUser),c=m(()=>i.imapMigrationEnabled),u=()=>{window.location=s.value},r=[],A=[{text:t("Dashboard"),to:{name:"Dashboard"},exact:!0,icon:"mdi-view-dashboard-outline"},{text:t("Domains"),to:{name:"DomainList"},icon:"mdi-domain",roles:["DomainAdmins","Resellers","SuperAdmins"]},{text:t("Identities"),to:{name:"Identities"},icon:"mdi-account",roles:["DomainAdmins","Resellers","SuperAdmins"]},{text:t("Alarms"),to:{name:"Alarms"},icon:"mdi-bell"},{icon:"mdi-history",text:t("Monitoring"),roles:["SuperAdmins","Resellers","DomainAdmins"],children:[{text:t("Statistics"),to:{name:"Statistics"},roles:["SuperAdmins"]},{text:t("Audit trail"),to:{name:"AuditTrail"},roles:["SuperAdmins"]},{text:t("Messages"),to:{name:"MessageLog"},roles:["DomainAdmins","Resellers","SuperAdmins"]}]},{icon:"mdi-email-sync-outline",text:t("IMAP Migration"),roles:["SuperAdmins","Resellers"],condition:()=>c.value,children:[{text:t("Email providers"),to:{name:"ProvidersList"},roles:["SuperAdmins","Resellers"]},{text:t("Migrations"),to:{name:"MigrationsList"},roles:["Resellers","SuperAdmins"]}]},{icon:"mdi-cog",text:t("Settings"),children:r,roles:["SuperAdmins"]},{icon:"mdi-email-check-outline",text:"Rspamd",action:u,roles:["SuperAdmins"],condition:()=>a.value},{icon:"mdi-information",text:t("Information"),roles:["SuperAdmins"],to:{name:"Information"},withBell:!0}];return x(()=>{d.value.role==="SuperAdmins"&&(l.getGlobalApplications().then(e=>{e.data.forEach(o=>{r.push({text:o.label,to:{name:"ParametersEdit",params:{app:o.name}}})})}),i.imapMigrationEnabled===null&&l.getGlobalApplication("imap_migration").then(e=>{i.imapMigrationEnabled=e.data.params.enabled_imapmigration}),v.getCapabilities().then(e=>{a.value="rspamd"in e.data.capabilities,a.value&&(s.value=e.data.capabilities.rspamd.location||"/rspamd")}))}),(e,o)=>(_(),S(M,{"menu-items":A}))}};export{K as default};
