!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.htm=e()}(this,function(){function h(n,e,t,u){e[0]=0;for(var s=1;s<e.length;s++){var r=e[s++],p=e[s]?(e[0]|=r?1:2,t[e[s++]]):e[++s];3===r?u[0]=p:4===r?u[1]=Object.assign(u[1]||{},p):5===r?(u[1]=u[1]||{})[e[++s]]=p:6===r?u[1][e[++s]]+=p+"":r?(r=n.apply(p,h(n,p,t,["",null])),u.push(r),p[0]?e[0]|=2:(e[s-2]=0,e[s]=r)):u.push(p)}return u}var t=new Map;return function(n){var e=t.get(this);return e||(e=new Map,t.set(this,e)),1<(e=h(this,e.get(n)||(e.set(n,e=function(n){function e(n){1===s&&(n||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?h.push(0,n,r):3===s&&(n||r)?(h.push(3,n,r),s=2):2===s&&"..."===r&&n?h.push(4,n,0):2===s&&r&&!n?h.push(5,0,!0,r):5<=s&&((r||!n&&5===s)&&(h.push(s,0,r,u),s=6),n&&(h.push(s,n,0,u),s=6)),r=""}for(var t,u,s=1,r="",p="",h=[0],o=0;o<n.length;o++){o&&(1===s&&e(),e(o));for(var f=0;f<n[o].length;f++)t=n[o][f],1===s?"<"===t?(e(),h=[h],s=3):r+=t:4===s?r="--"===r&&">"===t?(s=1,""):t+r[0]:p?t===p?p="":r+=t:'"'===t||"'"===t?p=t:">"===t?(e(),s=1):s&&("="===t?(s=5,u=r,r=""):"/"===t&&(s<5||">"===n[o][f+1])?(e(),3===s&&(h=h[0]),(h=(s=h)[0]).push(2,0,s),s=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(e(),s=2):r+=t),3===s&&"!--"===r&&(s=4,h=h[0])}return e(),h}(n)),e),arguments,[])).length?e:e[0]}});