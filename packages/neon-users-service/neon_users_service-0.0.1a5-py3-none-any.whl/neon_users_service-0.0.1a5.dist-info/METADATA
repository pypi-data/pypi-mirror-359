Metadata-Version: 2.1
Name: neon-users-service
Version: 0.0.1a5
Summary: Neon User Management Module
Home-page: https://github.com/NeonGeckoCom/neon-users-service
Author: Neongecko
Author-email: developers@neon.ai
License: AGPL-3.0-only
Classifier: Intended Audience :: Developers
Classifier: Programming Language :: Python :: 3
Description-Content-Type: text/markdown
License-File: LICENSE.md
Requires-Dist: pydantic~=2.0
Requires-Dist: ovos-config~=0.1
Requires-Dist: ovos-utils~=0.0
Requires-Dist: neon-data-models>=0.0.0a4
Requires-Dist: neon-utils[sentry]>=1.12.2a2,~=1.0
Provides-Extra: mongodb
Requires-Dist: pymongo~=4.0; extra == "mongodb"
Provides-Extra: mq
Requires-Dist: neon-mq-connector>=0.8.1a3,~=0.8; extra == "mq"
Provides-Extra: test
Requires-Dist: pytest; extra == "test"
Requires-Dist: mock; extra == "test"

# Neon Users Service
This module manages access to a pluggable user database backend. By default, it
operates as a standalone module using SQLite as the persistent data store.

## Configuration
Configuration may be passed directly to the `NeonUsersService` constructor,
otherwise it will read from a config file using `ovos-config`. The configuration
file will be `~/.config/neon/diana.yaml` by default. An example valid configuration
is included:

```yaml
neon_users_service:
  module: sqlite
  sqlite:
    db_path: ~/.local/share/neon/user-db.sqlite
```

`module` defines the backend to use and a config key matching that backend
will specify the kwargs passed to the initialization of that module.

## MQ Integration
The `mq_connector` module provides an MQ entrypoint to services and is the
primary method of interaction with this service. Valid requests are detailed
below. Responses will always follow the form:

```yaml
success: False
error: <string description>
```

```yaml
success: True
user: <serialized User object>
```

### Create
Create a new user by sending a request with the following parameters:
```yaml
operation: create
username: <new_username>
password: <new_password>
user: <Optional serialized User object, else default will be created>
```

### Read
Read an existing user. If `password` is not supplied, then the returned User
object will have the `password_hash` and `tokens` config redacted.
```yaml
operation: read
username: <existing_username>
password: <existing_password>
```

### Update
Update an existing user. If a `password` is supplied, it will replace the
user's current password. If no `password` is supplied and `user.password_hash` 
is updated, the database entry will be updated with that new value.

```yaml
operation: update
username: <existing_username>
password: <optional new password>
user: <updated User object>
```

### Delete
Delete an existing user. This requires that the supplied `user` object matches
an entry in the database exactly for validation.
```yaml
operation: delete
username: <username_to_delete>
user: <User object to delete>
```

___
### Licensing
This project is free to use under the 
[GNU Affero General Public License](https://www.gnu.org/licenses/why-affero-gpl.html).
Contact info@neon.ai for commercial licensing options.
