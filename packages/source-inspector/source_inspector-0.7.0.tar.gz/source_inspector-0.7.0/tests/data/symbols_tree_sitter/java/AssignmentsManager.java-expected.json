{
  "files": [
    {
      "path": "AssignmentsManager.java",
      "type": "file",
      "source_symbols": [
        "org",
        "apache",
        "kafka",
        "server",
        "org",
        "apache",
        "kafka",
        "clients",
        "ClientResponse",
        "org",
        "apache",
        "kafka",
        "common",
        "Uuid",
        "org",
        "apache",
        "kafka",
        "common",
        "message",
        "AssignReplicasToDirsRequestData",
        "org",
        "apache",
        "kafka",
        "common",
        "message",
        "AssignReplicasToDirsRequestData",
        "DirectoryData",
        "org",
        "apache",
        "kafka",
        "common",
        "message",
        "AssignReplicasToDirsRequestData",
        "PartitionData",
        "org",
        "apache",
        "kafka",
        "common",
        "message",
        "AssignReplicasToDirsRequestData",
        "TopicData",
        "org",
        "apache",
        "kafka",
        "common",
        "message",
        "AssignReplicasToDirsResponseData",
        "org",
        "apache",
        "kafka",
        "common",
        "protocol",
        "Errors",
        "org",
        "apache",
        "kafka",
        "common",
        "requests",
        "AssignReplicasToDirsRequest",
        "org",
        "apache",
        "kafka",
        "common",
        "requests",
        "AssignReplicasToDirsResponse",
        "org",
        "apache",
        "kafka",
        "common",
        "utils",
        "ExponentialBackoff",
        "org",
        "apache",
        "kafka",
        "common",
        "utils",
        "LogContext",
        "org",
        "apache",
        "kafka",
        "common",
        "utils",
        "Time",
        "org",
        "apache",
        "kafka",
        "image",
        "MetadataImage",
        "org",
        "apache",
        "kafka",
        "image",
        "TopicImage",
        "org",
        "apache",
        "kafka",
        "queue",
        "EventQueue",
        "org",
        "apache",
        "kafka",
        "queue",
        "KafkaEventQueue",
        "org",
        "apache",
        "kafka",
        "server",
        "common",
        "ControllerRequestCompletionHandler",
        "org",
        "apache",
        "kafka",
        "server",
        "common",
        "NodeToControllerChannelManager",
        "org",
        "apache",
        "kafka",
        "server",
        "common",
        "TopicIdPartition",
        "org",
        "apache",
        "kafka",
        "server",
        "metrics",
        "KafkaYammerMetrics",
        "com",
        "yammer",
        "metrics",
        "core",
        "Gauge",
        "com",
        "yammer",
        "metrics",
        "core",
        "MetricName",
        "com",
        "yammer",
        "metrics",
        "core",
        "MetricsRegistry",
        "org",
        "slf4j",
        "Logger",
        "java",
        "util",
        "ArrayList",
        "java",
        "util",
        "HashMap",
        "java",
        "util",
        "Iterator",
        "java",
        "util",
        "Map",
        "java",
        "util",
        "Optional",
        "java",
        "util",
        "concurrent",
        "CompletableFuture",
        "java",
        "util",
        "concurrent",
        "ConcurrentHashMap",
        "java",
        "util",
        "concurrent",
        "ExecutionException",
        "java",
        "util",
        "concurrent",
        "TimeUnit",
        "java",
        "util",
        "function",
        "Function",
        "java",
        "util",
        "function",
        "Supplier",
        "org",
        "apache",
        "kafka",
        "common",
        "requests",
        "AssignReplicasToDirsRequest",
        "MAX_ASSIGNMENTS_PER_REQUEST",
        "AssignmentsManager",
        "STANDARD_BACKOFF",
        "TimeUnit",
        "MILLISECONDS",
        "toNanos",
        "TimeUnit",
        "SECONDS",
        "toNanos",
        "MIN_NOISY_FAILURE_INTERVAL_NS",
        "TimeUnit",
        "MINUTES",
        "toNanos",
        "QUEUED_REPLICA_TO_DIR_ASSIGNMENTS_METRIC",
        "metricName",
        "MAYBE_SEND_ASSIGNMENTS_EVENT",
        "log",
        "backoff",
        "time",
        "channelManager",
        "nodeId",
        "metadataImageSupplier",
        "directoryIdToDescription",
        "ready",
        "inflight",
        "metricsRegistry",
        "previousGlobalFailures",
        "eventQueue",
        "metricName",
        "name",
        "KafkaYammerMetrics",
        "getMetricName",
        "name",
        "AssignmentsManager",
        "time",
        "channelManager",
        "nodeId",
        "metadataImageSupplier",
        "directoryIdToDescription",
        "STANDARD_BACKOFF",
        "time",
        "channelManager",
        "nodeId",
        "metadataImageSupplier",
        "directoryIdToDescription",
        "KafkaYammerMetrics",
        "defaultRegistry",
        "AssignmentsManager",
        "backoff",
        "time",
        "channelManager",
        "nodeId",
        "metadataImageSupplier",
        "directoryIdToDescription",
        "metricsRegistry",
        "log",
        "nodeId",
        "logger",
        "backoff",
        "backoff",
        "time",
        "time",
        "channelManager",
        "channelManager",
        "nodeId",
        "nodeId",
        "directoryIdToDescription",
        "directoryIdToDescription",
        "metadataImageSupplier",
        "metadataImageSupplier",
        "ready",
        "inflight",
        "Map",
        "of",
        "metricsRegistry",
        "metricsRegistry",
        "metricsRegistry",
        "newGauge",
        "QUEUED_REPLICA_TO_DIR_ASSIGNMENTS_METRIC",
        "Override",
        "value",
        "numPending",
        "previousGlobalFailures",
        "eventQueue",
        "time",
        "nodeId",
        "nodeId",
        "channelManager",
        "start",
        "numPending",
        "ready",
        "size",
        "inflight",
        "size",
        "close",
        "eventQueue",
        "close",
        "onAssignment",
        "topicIdPartition",
        "directoryId",
        "reason",
        "successCallback",
        "nowNs",
        "time",
        "nanoseconds",
        "assignment",
        "topicIdPartition",
        "directoryId",
        "nowNs",
        "successCallback",
        "ready",
        "put",
        "topicIdPartition",
        "assignment",
        "log",
        "isTraceEnabled",
        "topicDescription",
        "Optional",
        "ofNullable",
        "metadataImageSupplier",
        "get",
        "topics",
        "getTopic",
        "assignment",
        "topicIdPartition",
        "topicId",
        "map",
        "TopicImage",
        "name",
        "orElse",
        "assignment",
        "topicIdPartition",
        "topicId",
        "toString",
        "log",
        "trace",
        "assignment",
        "reason",
        "topicDescription",
        "topicIdPartition",
        "partitionId",
        "directoryIdToDescription",
        "apply",
        "assignment",
        "directoryId",
        "rescheduleMaybeSendAssignmentsEvent",
        "nowNs",
        "rescheduleMaybeSendAssignmentsEvent",
        "nowNs",
        "eventQueue",
        "scheduleDeferred",
        "MAYBE_SEND_ASSIGNMENTS_EVENT",
        "backoff",
        "nowNs",
        "previousGlobalFailures",
        "inflight",
        "isEmpty",
        "ready",
        "size",
        "ShutdownEvent",
        "Override",
        "run",
        "log",
        "info",
        "channelManager",
        "shutdown",
        "e",
        "log",
        "error",
        "e",
        "metricsRegistry",
        "removeMetric",
        "QUEUED_REPLICA_TO_DIR_ASSIGNMENTS_METRIC",
        "e",
        "log",
        "error",
        "e",
        "MaybeSendAssignmentsEvent",
        "Override",
        "run",
        "maybeSendAssignments",
        "e",
        "log",
        "error",
        "e",
        "HandleResponseEvent",
        "sent",
        "response",
        "HandleResponseEvent",
        "sent",
        "response",
        "sent",
        "sent",
        "response",
        "response",
        "Override",
        "run",
        "handleResponse",
        "sent",
        "response",
        "e",
        "log",
        "error",
        "e",
        "ready",
        "isEmpty",
        "rescheduleMaybeSendAssignmentsEvent",
        "time",
        "nanoseconds",
        "CompletionHandler",
        "sent",
        "CompletionHandler",
        "sent",
        "sent",
        "sent",
        "Override",
        "onTimeout",
        "eventQueue",
        "append",
        "sent",
        "Optional",
        "empty",
        "Override",
        "onComplete",
        "response",
        "eventQueue",
        "append",
        "sent",
        "Optional",
        "of",
        "response",
        "maybeSendAssignments",
        "inflightSize",
        "inflight",
        "size",
        "log",
        "isTraceEnabled",
        "log",
        "trace",
        "inflightSize",
        "inflightSize",
        "log",
        "trace",
        "inflightSize",
        "image",
        "metadataImageSupplier",
        "get",
        "newInFlight",
        "numInvalid",
        "iterator",
        "ready",
        "values",
        "iterator",
        "iterator",
        "hasNext",
        "newInFlight",
        "size",
        "MAX_ASSIGNMENTS_PER_REQUEST",
        "assignment",
        "iterator",
        "next",
        "iterator",
        "remove",
        "assignment",
        "valid",
        "nodeId",
        "image",
        "newInFlight",
        "put",
        "assignment",
        "topicIdPartition",
        "assignment",
        "numInvalid",
        "log",
        "info",
        "newInFlight",
        "size",
        "numInvalid",
        "newInFlight",
        "isEmpty",
        "sendAssignments",
        "image",
        "cluster",
        "brokerEpoch",
        "nodeId",
        "newInFlight",
        "sendAssignments",
        "brokerEpoch",
        "newInflight",
        "completionHandler",
        "newInflight",
        "channelManager",
        "sendRequest",
        "buildRequestData",
        "nodeId",
        "brokerEpoch",
        "newInflight",
        "completionHandler",
        "inflight",
        "newInflight",
        "handleResponse",
        "sent",
        "assignmentResponse",
        "inflight",
        "Map",
        "of",
        "globalResponseError",
        "globalResponseError",
        "assignmentResponse",
        "globalResponseError",
        "isPresent",
        "previousGlobalFailures",
        "log",
        "error",
        "sent",
        "size",
        "globalResponseError",
        "get",
        "sent",
        "forEach",
        "ready",
        "putIfAbsent",
        "previousGlobalFailures",
        "responseData",
        "assignmentResponse",
        "get",
        "responseBody",
        "data",
        "nowNs",
        "time",
        "nanoseconds",
        "directoryData",
        "responseData",
        "directories",
        "topicData",
        "directoryData",
        "topics",
        "partitionData",
        "topicData",
        "partitions",
        "topicIdPartition",
        "topicData",
        "topicId",
        "partitionData",
        "partitionIndex",
        "handleAssignmentResponse",
        "topicIdPartition",
        "sent",
        "Errors",
        "forCode",
        "partitionData",
        "errorCode",
        "nowNs",
        "sent",
        "remove",
        "topicIdPartition",
        "assignment",
        "sent",
        "values",
        "ready",
        "putIfAbsent",
        "assignment",
        "topicIdPartition",
        "assignment",
        "log",
        "error",
        "assignment",
        "topicIdPartition",
        "handleAssignmentResponse",
        "topicIdPartition",
        "sent",
        "error",
        "nowNs",
        "assignment",
        "sent",
        "get",
        "topicIdPartition",
        "assignment",
        "log",
        "error",
        "topicIdPartition",
        "error",
        "equals",
        "Errors",
        "NONE",
        "assignment",
        "successCallback",
        "run",
        "e",
        "log",
        "error",
        "e",
        "ready",
        "putIfAbsent",
        "topicIdPartition",
        "assignment",
        "log",
        "isDebugEnabled",
        "nowNs",
        "assignment",
        "submissionTimeNs",
        "MIN_NOISY_FAILURE_INTERVAL_NS",
        "log",
        "error",
        "assignment",
        "topicIdPartition",
        "error",
        "previousGlobalFailures",
        "future",
        "eventQueue",
        "append",
        "future",
        "complete",
        "previousGlobalFailures",
        "future",
        "get",
        "numInFlight",
        "inflight",
        "size",
        "globalResponseError",
        "response",
        "response",
        "isEmpty",
        "Optional",
        "of",
        "response",
        "get",
        "authenticationException",
        "Optional",
        "of",
        "response",
        "get",
        "wasTimedOut",
        "Optional",
        "of",
        "response",
        "get",
        "wasDisconnected",
        "Optional",
        "of",
        "response",
        "get",
        "versionMismatch",
        "Optional",
        "of",
        "response",
        "get",
        "responseBody",
        "Optional",
        "of",
        "response",
        "get",
        "responseBody",
        "Optional",
        "of",
        "data",
        "response",
        "get",
        "responseBody",
        "data",
        "error",
        "Errors",
        "forCode",
        "data",
        "errorCode",
        "error",
        "Errors",
        "NONE",
        "Optional",
        "of",
        "error",
        "name",
        "Optional",
        "empty",
        "buildRequestData",
        "nodeId",
        "brokerEpoch",
        "assignments",
        "directoryMap",
        "topicMap",
        "entry",
        "assignments",
        "entrySet",
        "topicPartition",
        "entry",
        "getKey",
        "directoryId",
        "entry",
        "getValue",
        "directoryId",
        "directory",
        "directoryMap",
        "computeIfAbsent",
        "directoryId",
        "d",
        "setId",
        "directoryId",
        "topic",
        "topicMap",
        "computeIfAbsent",
        "directoryId",
        "d",
        "computeIfAbsent",
        "topicPartition",
        "topicId",
        "topicId",
        "data",
        "setTopicId",
        "topicId",
        "directory",
        "topics",
        "add",
        "data",
        "data",
        "partition",
        "setPartitionIndex",
        "topicPartition",
        "partitionId",
        "topic",
        "partitions",
        "add",
        "partition",
        "setBrokerId",
        "nodeId",
        "setBrokerEpoch",
        "brokerEpoch",
        "setDirectories",
        "directoryMap",
        "values"
      ],
      "source_strings": [
        "\"QueuedReplicaToDirAssignments\"",
        "\"MaybeSendAssignmentsEvent\"",
        "\"org.apache.kafka.server\"",
        "\"AssignmentsManager\"",
        "\"[AssignmentsManager id=\"",
        "\"] \"",
        "\"[AssignmentsManager id=\"",
        "\"]\"",
        "\"broker-\"",
        "\"-directory-assignments-manager-\"",
        "\"Registered assignment {}: {}, moving {}-{} into {}\"",
        "\"shutting down.\"",
        "\"Unexpected exception shutting down NodeToControllerChannelManager\"",
        "\"Unexpected exception removing metrics.\"",
        "\"Unexpected exception in MaybeSendAssignmentsEvent\"",
        "\"Unexpected exception in HandleResponseEvent\"",
        "\"maybeSendAssignments: inflightSize = {}.\"",
        "\"maybeSendAssignments: cannot send new assignments because there are \"",
        "\"{} still in flight.\"",
        "\"maybeSendAssignments: sending {} assignments; invalidated {} assignments \"",
        "\"prior to sending.\"",
        "\"handleResponse: {} assignments failed; global error: {}. Retrying.\"",
        "\"handleResponse: no result in response for partition {}.\"",
        "\"handleResponse: response contained topicIdPartition {}, but this was not \"",
        "\"in the request.\"",
        "\"handleResponse: unexpected callback exception\"",
        "\"handleResponse: error assigning {}: {}.\"",
        "\"Timeout\"",
        "\"AuthenticationException\"",
        "\"Disonnected[Timeout]\"",
        "\"Disconnected\"",
        "\"UnsupportedVersionException\"",
        "\"EmptyResponse\"",
        "\"ClassCastException\"",
        "\"Response-level error: \""
      ],
      "scan_errors": []
    }
  ]
}