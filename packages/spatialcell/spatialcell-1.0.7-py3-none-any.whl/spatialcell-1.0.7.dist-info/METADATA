Metadata-Version: 2.4
Name: spatialcell
Version: 1.0.7
Summary: Integrated pipeline for spatial transcriptomics cell segmentation and annotation using QuPath, Bin2cell, and TopAct
Home-page: https://github.com/Xinyan-C/Spatialcell
Author: Xinyan
Author-email: Xinyan <keepandon@gmail.com>
License-Expression: Apache-2.0
Project-URL: Homepage, https://github.com/Xinyan-C/Spatialcell
Project-URL: Documentation, https://github.com/Xinyan-C/Spatialcell#readme
Project-URL: Repository, https://github.com/Xinyan-C/Spatialcell
Project-URL: Bug Reports, https://github.com/Xinyan-C/Spatialcell/issues
Project-URL: Source Code, https://github.com/Xinyan-C/Spatialcell
Project-URL: Changelog, https://github.com/Xinyan-C/Spatialcell/releases
Keywords: spatial-transcriptomics,cell-segmentation,cell-annotation,QuPath,Bin2cell,TopAct,bioinformatics,single-cell
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Science/Research
Classifier: Topic :: Scientific/Engineering :: Bio-Informatics
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: numpy>=1.21.0
Requires-Dist: pandas>=1.3.0
Requires-Dist: scipy>=1.7.0
Requires-Dist: opencv-python>=4.5.0
Requires-Dist: Pillow>=8.0.0
Requires-Dist: matplotlib>=3.5.0
Requires-Dist: colorcet>=2.0.0
Requires-Dist: scanpy>=1.8.0
Requires-Dist: scikit-learn>=1.0.0
Requires-Dist: joblib>=1.1.0
Requires-Dist: natsort>=8.0.0
Requires-Dist: tqdm>=4.60.0
Requires-Dist: pyyaml>=6.0
Requires-Dist: bin2cell>=0.3.0
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: black>=22.0; extra == "dev"
Requires-Dist: flake8>=4.0; extra == "dev"
Requires-Dist: mypy>=0.950; extra == "dev"
Requires-Dist: jupyter>=1.0.0; extra == "dev"
Requires-Dist: ipykernel>=6.0.0; extra == "dev"
Provides-Extra: docs
Requires-Dist: sphinx>=4.0; extra == "docs"
Requires-Dist: sphinx-rtd-theme>=1.0; extra == "docs"
Requires-Dist: myst-parser>=0.18.0; extra == "docs"
Provides-Extra: extra
Requires-Dist: seaborn>=0.11.0; extra == "extra"
Requires-Dist: plotly>=5.0.0; extra == "extra"
Requires-Dist: kaleido>=0.2.1; extra == "extra"
Provides-Extra: all
Requires-Dist: pytest>=6.0; extra == "all"
Requires-Dist: black>=22.0; extra == "all"
Requires-Dist: flake8>=4.0; extra == "all"
Requires-Dist: mypy>=0.950; extra == "all"
Requires-Dist: jupyter>=1.0.0; extra == "all"
Requires-Dist: ipykernel>=6.0.0; extra == "all"
Requires-Dist: sphinx>=4.0; extra == "all"
Requires-Dist: sphinx-rtd-theme>=1.0; extra == "all"
Requires-Dist: myst-parser>=0.18.0; extra == "all"
Requires-Dist: seaborn>=0.11.0; extra == "all"
Requires-Dist: plotly>=5.0.0; extra == "all"
Requires-Dist: kaleido>=0.2.1; extra == "all"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# SpatialCell: Integrated Spatial Transcriptomics Analysis Pipeline

[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![GitHub issues](https://img.shields.io/github/issues/Xinyan-C/Spatialcell)](https://github.com/Xinyan-C/Spatialcell/issues)

**SpatialCell** is an integrated computational pipeline for spatial transcriptomics analysis that combines cell segmentation and automated cell type annotation. It seamlessly integrates **Stardist (applied as QuPath plugin for cell detection)** for histological image analysis, **Bin2cell** for spatial cell segmentation, and **TopAct** for machine learning-based cell classification.

## üöÄ Key Features

- **Multi-scale Cell Segmentation**: Stardist-enabled QuPath cell detection with Bin2cell spatial segmentation
- **Automated Cell Annotation**: TopAct-based machine learning classification
- **ROI-aware Processing**: Region-of-interest focused analysis for large datasets
- **Scalable Pipeline**: Support for multiple developmental time points (E14.5, E18.5, P3)
- **Visualization Tools**: Comprehensive plotting and export capabilities
- **Modular Design**: Easy to customize and extend for specific research needs

## üîß Installation

### Prerequisites
- Python 3.8 or higher (3.10 recommended)
- QuPath (for image analysis)
- Git


### Quick Install (Recommended)

```bash
pip install spatialcell
```
### Complete Functionality
```bash
pip install spatialcell
pip install git+https://gitlab.com/kfbenjamin/topact.git
```
### Alternative: Install from Source

```bash
# Clone the repository
git clone https://github.com/Xinyan-C/Spatialcell.git
cd Spatialcell

# Install dependencies
pip install -r requirements.txt

# Install the package
pip install -e .
```



## üìñ Quick Start

### 1. Basic Workflow
```python
from spatialcell.workflows import SpatialCellPipeline

# Initialize pipeline
pipeline = SpatialCellPipeline(
    sample_name="E18.5",
    input_dir="/path/to/visium/data",
    output_dir="/path/to/output"
)

# Run complete analysis
pipeline.run_full_analysis()
```

### 2. Step-by-Step Processing
```python
# Cell detection and spatial segmentation
pipeline.run_segmentation(
    source_image_path="/path/to/histology.tif",
    roi_file="/path/to/regions.txt"
)

# Cell classification with TopAct  
pipeline.run_classification(
    classifier_path="/path/to/trained_model.joblib"
)

# Generate visualizations
pipeline.create_visualizations()
```

## üóÇÔ∏è Project Structure

```
Spatialcell/
‚îú‚îÄ‚îÄ spatialcell/                    # Main package
‚îÇ   ‚îú‚îÄ‚îÄ qupath_scripts/             # QuPath-Stardist integration scripts
‚îÇ   ‚îú‚îÄ‚îÄ preprocessing/              # Data preprocessing modules
‚îÇ   ‚îú‚îÄ‚îÄ spatial_segmentation/       # Bin2cell integration
‚îÇ   ‚îú‚îÄ‚îÄ cell_annotation/            # TopAct classification
‚îÇ   ‚îú‚îÄ‚îÄ utils/                      # Utility functions
‚îÇ   ‚îî‚îÄ‚îÄ workflows/                  # Complete pipelines
‚îú‚îÄ‚îÄ examples/                       # Usage examples and tutorials
‚îú‚îÄ‚îÄ requirements.txt                # Python dependencies
‚îú‚îÄ‚îÄ setup.py                       # Package installation
‚îî‚îÄ‚îÄ README.md                      # This file
```

## üìã Supported Data Types

- **Spatial Transcriptomics**: 10x Visium, Slide-seq
- **Image Formats**: TIFF, SVG, PNG, JPEG
- **Development Stages**: E14.5, E18.5, P3 (extensible)
- **Cell Types**: Customizable classification schemes

## üî¨ Workflow Overview

1. **Histological Analysis**: Stardist-based cell detection via QuPath
2. **Data Preprocessing**: SVG to NPZ conversion and filtering  
3. **Spatial Segmentation**: Bin2cell integration with cell boundaries
4. **Cell Classification**: TopAct machine learning annotation
5. **Visualization**: Multi-scale plotting and export

## üìö Documentation

- **[Installation Guide](examples/installation.md)**: Detailed setup instructions
- **[Tutorial Notebooks](examples/)**: Step-by-step analysis examples
- **[API Reference](docs/)**: Complete function documentation
- **[FAQ](docs/faq.md)**: Common questions and troubleshooting

## ü§ù Contributing

We welcome contributions! Please see our [Contributing Guide](CONTRIBUTING.md) for details.

### Development Setup
```bash
# Clone and install in development mode
git clone https://github.com/Xinyan-C/Spatialcell.git
cd Spatialcell
pip install -e ".[dev]"

# Run tests
pytest tests/
```

## üìÑ Citation

If you use SpatialCell in your research, please cite:

```bibtex
@software{spatialcell2024,
  author = {Xinyan},
  title = {SpatialCell: Integrated Spatial Transcriptomics Analysis Pipeline},
  url = {https://github.com/Xinyan-C/Spatialcell},
  year = {2024}
}
```

## üìß Contact

- **Author**: Xinyan
- **Email**: keepandon@gmail.com
- **GitHub**: [@Xinyan-C](https://github.com/Xinyan-C)

## üìù License

SpatialCell is licensed under the Apache License 2.0, which provides patent protection.

### Dependency Licenses:
- **bin2cell**: MIT License (automatically installed)
- **TopACT**: GPL v3 License (optional, user installs separately)

Apache 2.0 license includes patent protection clauses, providing additional legal protection for users.

## üìã Patent Protection

The Apache 2.0 license provides:
- Patent grants from all contributors
- Patent retaliation protection
- Commercial use protection

For full license text, see [LICENSE](LICENSE) file.

## üîó Reference

- **QuPath**: Bankhead P, Loughrey MB, Fern√°ndez JA, et al. QuPath: Open source software for digital pathology image analysis. Sci Rep. 2017;7(1):16878. doi:10.1038/s41598-017-17204-5
- **Stardist**: Schmidt U, Weigert M, Broaddus C, Myers G. Cell detection with star-convex polygons. In: Frangi AF, Schnabel JA, Davatzikos C, Alberola-L√≥pez C, Fichtinger G, eds. Medical Image Computing and Computer Assisted Intervention ‚Äì MICCAI 2018. Springer International Publishing; 2018:265-273. doi:10.1007/978-3-030-00934-2_30
- **Bin2cell**: Pola≈Ñski K, Bartolom√©-Casado R, Sarropoulos I, et al. Bin2cell reconstructs cells from high resolution visium HD data. Bioinformatics. 2024;40(9):btae546. doi:10.1093/bioinformatics/btae546
- **TopAct**: Benjamin K, Bhandari A, Kepple JD, et al. Multiscale topology classifies cells in subcellular spatial transcriptomics. Nature. 2024;630(8018):943-949. doi:10.1038/s41586-024-07563-1
- **Scanpy**: Wolf FA, Angerer P, Theis FJ. SCANPY: large-scale single-cell gene expression data analysis. Genome Biology. 2018;19(1):15. doi:10.1186/s13059-017-1382-0
