Metadata-Version: 2.4
Name: tvctools-business-bi-mcp
Version: 0.1.2
Summary: æ™ºèƒ½BIåŠ©æ‰‹ MCP - ä¸“ä¸ºä¸šåŠ¡è®¾è®¡çš„æ•°æ®åˆ†æMCPï¼Œæä¾›7ä¸ªæ ¸å¿ƒBIåˆ†æå·¥å…·
Author-email: BI MCP Team <contact@business-bi-mcp.com>
Maintainer-email: BI MCP Team <contact@business-bi-mcp.com>
License: MIT
Project-URL: Homepage, https://github.com/business-bi-mcp/business-bi-mcp
Project-URL: Documentation, https://github.com/business-bi-mcp/business-bi-mcp#readme
Project-URL: Repository, https://github.com/business-bi-mcp/business-bi-mcp.git
Project-URL: Issues, https://github.com/business-bi-mcp/business-bi-mcp/issues
Project-URL: Changelog, https://github.com/business-bi-mcp/business-bi-mcp/releases
Project-URL: Bug Reports, https://github.com/business-bi-mcp/business-bi-mcp/issues
Project-URL: Source Code, https://github.com/business-bi-mcp/business-bi-mcp
Keywords: business-intelligence,data-analysis,mcp,business-analytics,non-technical,bi-tools,data-insights,business-decision,chinese,analytics
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: End Users/Desktop
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Financial and Insurance Industry
Classifier: Topic :: Office/Business
Classifier: Topic :: Office/Business :: Financial
Classifier: Topic :: Scientific/Engineering :: Information Analysis
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Operating System :: OS Independent
Classifier: Environment :: Console
Classifier: Natural Language :: Chinese (Simplified)
Classifier: Natural Language :: English
Requires-Python: >=3.12
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: fastmcp>=2.10.1
Requires-Dist: pydantic>=2.0.0
Requires-Dist: httpx>=0.25.0
Requires-Dist: asyncpg>=0.29.0
Requires-Dist: psycopg2-binary>=2.9.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: isort>=5.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Requires-Dist: build>=0.10.0; extra == "dev"
Requires-Dist: twine>=4.0.0; extra == "dev"
Provides-Extra: test
Requires-Dist: pytest>=7.0.0; extra == "test"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "test"
Requires-Dist: pytest-cov>=4.0.0; extra == "test"
Requires-Dist: coverage>=7.0.0; extra == "test"
Provides-Extra: docs
Requires-Dist: mkdocs>=1.5.0; extra == "docs"
Requires-Dist: mkdocs-material>=9.0.0; extra == "docs"
Requires-Dist: mkdocstrings[python]>=0.22.0; extra == "docs"
Provides-Extra: legacy
Requires-Dist: mcp[cli]>=1.10.1; extra == "legacy"
Requires-Dist: fastapi>=0.104.0; extra == "legacy"
Requires-Dist: uvicorn[standard]>=0.24.0; extra == "legacy"
Dynamic: license-file

# æ™ºèƒ½BIåŠ©æ‰‹ MCP

ä¸“ä¸ºå•ä¸€æ•°æ®æºï¼ˆæŸ¥åº“ï¼‰è®¾è®¡çš„é«˜æ•ˆæ•°æ®åˆ†æåŠ©æ‰‹ï¼Œ**å·²ä¼˜åŒ–ä¸º7ä¸ªæ ¸å¿ƒå·¥å…·**ï¼Œæ¶ˆé™¤åŠŸèƒ½é‡å ï¼Œç®€åŒ–ä½¿ç”¨æµç¨‹ï¼

## ğŸš€ æ–°ç‰ˆæœ¬äº®ç‚¹ (FastMCP + ä¼˜åŒ–æ¶æ„)

- âœ¨ **æ¶æ„ä¼˜åŒ–**: ä»14ä¸ªå·¥å…·ç²¾ç®€åˆ°7ä¸ªæ ¸å¿ƒå·¥å…·ï¼Œæ¶ˆé™¤åŠŸèƒ½é‡å 
- ğŸ§  **æ™ºèƒ½åˆ†æ**: æ–°å¢æ™ºèƒ½é—®é¢˜ç†è§£å™¨ï¼Œè‡ªåŠ¨è¯†åˆ«é—®é¢˜ç±»å‹å’Œåˆ†æè·¯å¾„
- ğŸ”§ **å¼€ç®±å³ç”¨**: åŸºäºfastmcpæ¡†æ¶ï¼Œæ— éœ€å¤æ‚é…ç½®
- ğŸ“¡ **åŸç”Ÿåè®®æ”¯æŒ**: å®Œæ•´çš„MCPåè®®å®ç°ï¼Œå…¼å®¹Claude Desktopç­‰å®¢æˆ·ç«¯
- ğŸŒ **å¤šä¼ è¾“æ¨¡å¼**: æ”¯æŒSTDIOå’ŒHTTPä¸¤ç§ä¼ è¾“æ–¹å¼
- ğŸ›¡ï¸ **ç±»å‹å®‰å…¨**: ä½¿ç”¨fastmcpçš„ç±»å‹æ¨æ–­å’ŒéªŒè¯
- ğŸ“Š **å•ä¸€æ•°æ®æºä¼˜åŒ–**: ä¸“é—¨é’ˆå¯¹æŸ¥åº“åœºæ™¯ä¼˜åŒ–ï¼Œç®€åŒ–æ•°æ®è·å–æµç¨‹

## ğŸ“Š ä¼˜åŒ–åçš„7ä¸ªæ ¸å¿ƒå·¥å…·

### ğŸ” æ™ºèƒ½é—®é¢˜ç†è§£
- **business_problem_analyzer**: æ™ºèƒ½ä¸šåŠ¡é—®é¢˜åˆ†æå™¨
  - è‡ªåŠ¨è¯†åˆ«é—®é¢˜ç±»å‹ï¼ˆæ’åã€å¯¹æ¯”ã€è¶‹åŠ¿ã€å…³è”ç­‰ï¼‰
  - æ™ºèƒ½æ‹†è§£å¤æ‚é—®é¢˜ä¸ºå­é—®é¢˜
  - è‡ªåŠ¨è§„åˆ’åˆ†æè·¯å¾„å’Œæ­¥éª¤
  - æå–æŸ¥è¯¢è¦ç´ å’Œæ—¶é—´èŒƒå›´

### ğŸ“Š æ•°æ®è·å–å·¥å…·
- **database_schema_explorer**: æ•°æ®åº“ç»“æ„æ¢ç´¢å™¨
  - æ¢ç´¢æ•°æ®åº“è¡¨ç»“æ„å’Œå­—æ®µä¿¡æ¯
  - ä¸ºSQLæŸ¥è¯¢æä¾›åŸºç¡€ä¿¡æ¯
- **sql_query_executor**: SQLæŸ¥è¯¢æ‰§è¡Œå™¨
  - å®‰å…¨æ‰§è¡ŒSQLæŸ¥è¯¢è·å–æ•°æ®
  - æ”¯æŒå„ç§ä¸šåŠ¡åˆ†æåœºæ™¯

### ğŸ“ˆ ä¸“ä¸šåˆ†æå·¥å…·
- **sales_comparison_analyzer**: é”€å”®å¯¹æ¯”åˆ†æå™¨
  - å®Œæ•´çš„é”€å”®å¯¹æ¯”åˆ†ææµç¨‹
  - è‡ªåŠ¨ç”Ÿæˆæ—¶é—´å¯¹æ¯”SQL
  - é›†æˆæŸ¥è¯¢ã€åˆ†æã€æ´å¯Ÿç”Ÿæˆ
  - æ”¯æŒå‘¨å¯¹å‘¨ã€æœˆå¯¹æœˆã€å¹´å¯¹å¹´å¯¹æ¯”

### ğŸ’¡ æ´å¯Ÿä¸å†³ç­–å·¥å…·
- **insight_generator**: å¢å¼ºç‰ˆæ´å¯Ÿç”Ÿæˆå™¨
  - ä»åˆ†æç»“æœä¸­æå–å…³é”®ä¸šåŠ¡æ´å¯Ÿ
  - æ•´åˆç»“æœè§£è¯»å’Œæ•°æ®æ•…äº‹æ„å»ºåŠŸèƒ½
  - æä¾›å¤šå±‚æ¬¡çš„ä¸šåŠ¡ä»·å€¼åˆ†æ
- **action_recommender**: å¢å¼ºç‰ˆè¡ŒåŠ¨å»ºè®®å™¨
  - åŸºäºæ´å¯Ÿæä¾›å…·ä½“çš„è¡ŒåŠ¨å»ºè®®å’Œå®æ–½è®¡åˆ’
  - æ•´åˆåç»­é—®é¢˜ç”ŸæˆåŠŸèƒ½
  - æä¾›å®Œæ•´çš„å†³ç­–æ”¯æŒ
- **chart_type_advisor**: å›¾è¡¨ç±»å‹é¡¾é—®
  - æ ¹æ®æ•°æ®ç±»å‹å’Œåˆ†æç›®çš„æ¨èæœ€é€‚åˆçš„å›¾è¡¨ç±»å‹
  - å¸®åŠ©é€‰æ‹©æœ€ä½³çš„æ•°æ®å¯è§†åŒ–æ–¹æ¡ˆ

## ğŸ¯ ç®€åŒ–åçš„ä½¿ç”¨æµç¨‹

```
1. business_problem_analyzer â†’ æ™ºèƒ½ç†è§£é—®é¢˜éœ€æ±‚
2. database_schema_explorer â†’ æ¢ç´¢å¯ç”¨æ•°æ®ç»“æ„  
3. sql_query_executor/sales_comparison_analyzer â†’ è·å–åˆ†ææ•°æ®
4. insight_generator â†’ ç”Ÿæˆæ·±åº¦æ´å¯Ÿ
5. action_recommender â†’ åˆ¶å®šè¡ŒåŠ¨æ–¹æ¡ˆ
6. chart_type_advisor â†’ é€‰æ‹©åˆé€‚çš„å¯è§†åŒ–æ–¹å¼
```

å¯¹æ¯”ä¼˜åŒ–å‰çš„å¤æ‚æµç¨‹ï¼ˆ12æ­¥éª¤ï¼‰ï¼Œç°åœ¨åªéœ€6æ­¥å³å¯å®Œæˆå®Œæ•´åˆ†æï¼

## ğŸ“ˆ ä¼˜åŒ–æ•ˆæœå¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|-------|-------|------|
| å·¥å…·æ•°é‡ | 14ä¸ª | 7ä¸ª | -50% |
| ä½¿ç”¨æ­¥éª¤ | 12æ­¥ | 6æ­¥ | -50% |
| åŠŸèƒ½é‡å  | ä¸¥é‡ | æœ€å°åŒ– | âœ… |
| å­¦ä¹ æˆæœ¬ | é«˜ | ä½ | âœ… |
| å•ä¸€æ•°æ®æºé€‚é… | ä¸€èˆ¬ | ä¼˜ç§€ | âœ… |

## ğŸ› ï¸ å®‰è£…å’Œè¿è¡Œ

### 1. å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨uv (æ¨è)
uv install

# æˆ–ä½¿ç”¨pip
pip install -e .
```

### 2. å¯åŠ¨æœåŠ¡å™¨

#### STDIOæ¨¡å¼ (Claude Desktopç­‰å®¢æˆ·ç«¯)
```bash
# æ–¹å¼1: ç›´æ¥è¿è¡Œ
python main.py

# æ–¹å¼2: ä½¿ç”¨fastmcp CLI
fastmcp run main.py

# æ–¹å¼3: ä½¿ç”¨é¡¹ç›®è„šæœ¬
business-bi-mcp
```

#### HTTPæ¨¡å¼ (Web/APIå®¢æˆ·ç«¯)
```bash
# å¯åŠ¨HTTPæœåŠ¡å™¨
python main_sse.py

# è®¿é—®åœ°å€: http://127.0.0.1:8000/mcp/
```

### 3. Claude Desktopé…ç½®

åœ¨Claude Desktopçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "business-bi-mcp": {
      "command": "uv",
      "args": ["run", "python", "/path/to/bi_mcp/main.py"]
    }
  }
}
```

## ğŸ“± ä½¿ç”¨ç¤ºä¾‹

### æ™ºèƒ½é—®é¢˜åˆ†æ

```python
# ä½¿ç”¨æ–°çš„æ™ºèƒ½é—®é¢˜åˆ†æå™¨
result = await client.call_tool("business_problem_analyzer_tool", {
    "question": "åˆ†ææœ€è¿‘ä¸€å‘¨é”€å”®é¢æ¯”ä¸Šå‘¨ä¸‹é™çš„åŸå› ",
    "business_context": "è·¨å¢ƒç”µå•†"
})

# è‡ªåŠ¨è¯†åˆ«ä¸ºå¯¹æ¯”åˆ†æç±»å‹
# è‡ªåŠ¨æ‹†è§£ä¸ºå­é—®é¢˜
# è‡ªåŠ¨è§„åˆ’åˆ†æè·¯å¾„
```

### é”€å”®å¯¹æ¯”åˆ†æ

```python
# ä½¿ç”¨é”€å”®å¯¹æ¯”åˆ†æå™¨è¿›è¡Œå®Œæ•´åˆ†æ
result = await client.call_tool("sales_comparison_analyzer_tool", {
    "question": "æœ€è¿‘ä¸€å‘¨çš„é”€å”®é¢æ¯”ä¸Šå‘¨æ€ä¹ˆæ ·ï¼Ÿ",
    "comparison_type": "week_over_week",
    "business_context": "è·¨å¢ƒç”µå•†"
})

# è‡ªåŠ¨å®Œæˆï¼šé—®é¢˜ç†è§£ â†’ æ•°æ®æŸ¥è¯¢ â†’ ç»“æœåˆ†æ â†’ æ´å¯Ÿç”Ÿæˆ â†’ è¡ŒåŠ¨å»ºè®®
```

### Pythonå®¢æˆ·ç«¯å®Œæ•´ç¤ºä¾‹

```python
from fastmcp import Client
import asyncio

async def bi_analysis_demo():
    async with Client("http://127.0.0.1:8000/mcp/") as client:
        # 1. æ™ºèƒ½é—®é¢˜ç†è§£
        problem_analysis = await client.call_tool("business_problem_analyzer_tool", {
            "question": "ä¸ºä»€ä¹ˆè¿™ä¸ªæœˆçš„è®¢å•è½¬åŒ–ç‡ä¸‹é™äº†ï¼Ÿ",
            "business_context": "è·¨å¢ƒç”µå•†å¹³å°"
        })
        
        # 2. æ¢ç´¢æ•°æ®ç»“æ„
        schema_info = await client.call_tool("database_schema_explorer_tool", {
            "table_pattern": "orders%"
        })
        
        # 3. æ‰§è¡Œæ•°æ®æŸ¥è¯¢
        query_result = await client.call_tool("sql_query_executor_tool", {
            "query": "SELECT DATE(order_date), COUNT(*), SUM(total_amount) FROM orders WHERE order_date >= CURRENT_DATE - INTERVAL '30 days' GROUP BY DATE(order_date)",
            "query_purpose": "åˆ†ææœ€è¿‘30å¤©çš„è®¢å•è¶‹åŠ¿"
        })
        
        # 4. ç”Ÿæˆæ´å¯Ÿ
        insights = await client.call_tool("insight_generator_tool", {
            "analysis_data": str(query_result),
            "business_goal": "æé«˜è®¢å•è½¬åŒ–ç‡",
            "stakeholder_interests": "è¿è¥å›¢é˜Ÿ",
            "include_story": True
        })
        
        # 5. åˆ¶å®šè¡ŒåŠ¨è®¡åˆ’
        actions = await client.call_tool("action_recommender_tool", {
            "insights": str(insights),
            "business_constraints": "æœ‰é™é¢„ç®—",
            "implementation_capacity": "å°å›¢é˜Ÿ",
            "include_follow_up": True
        })

asyncio.run(bi_analysis_demo())
```

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•å®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨åŠŸèƒ½ï¼š

```bash
# ç¡®ä¿æœåŠ¡å™¨è¿è¡Œåœ¨HTTPæ¨¡å¼
python main_sse.py

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œæµ‹è¯•
python test_fastmcp_client.py
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
bi_mcp/
â”œâ”€â”€ main.py              # STDIOæ¨¡å¼å…¥å£
â”œâ”€â”€ main_sse.py          # HTTPæ¨¡å¼å…¥å£
â”œâ”€â”€ core/
â”‚   â””â”€â”€ server.py        # ä¼˜åŒ–åçš„FastMCPæœåŠ¡å™¨é…ç½®
â”œâ”€â”€ tools/               # ä¸šåŠ¡å·¥å…·å®ç°
â”‚   â”œâ”€â”€ analysis.py      # ä¸šåŠ¡åˆ†æå·¥å…· (éƒ¨åˆ†åŠŸèƒ½å·²æ•´åˆ)
â”‚   â”œâ”€â”€ insight.py       # å¢å¼ºç‰ˆæ´å¯Ÿç”Ÿæˆå·¥å…·
â”‚   â”œâ”€â”€ recommendation.py # å¢å¼ºç‰ˆæ¨èå·¥å…·  
â”‚   â”œâ”€â”€ database_tools.py # æ•°æ®åº“å·¥å…·
â”‚   â”œâ”€â”€ universal_question_analyzer.py # æ™ºèƒ½é—®é¢˜åˆ†æå™¨
â”‚   â””â”€â”€ sales_comparison_analyzer.py # é”€å”®å¯¹æ¯”åˆ†æå™¨
â””â”€â”€ test_fastmcp_client.py # æµ‹è¯•å®¢æˆ·ç«¯
```

## ğŸ”„ ä»ä¼ ç»ŸMCPè¿ç§»

å¦‚æœæ‚¨ä¹‹å‰ä½¿ç”¨çš„æ˜¯ä¼ ç»ŸMCPåº“ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬æä¾›äº†ä»¥ä¸‹æ”¹è¿›ï¼š

### ä¸»è¦å˜åŒ–
- **å¯¼å…¥**: `from mcp.server.fastmcp import FastMCP` â†’ `from fastmcp import FastMCP`
- **å·¥å…·æ³¨å†Œ**: ä½¿ç”¨`@mcp.tool`è£…é¥°å™¨ï¼Œæ›´ç®€æ´çš„è¯­æ³•
- **HTTPæœåŠ¡**: æ— éœ€æ‰‹åŠ¨å®ç°FastAPIè·¯ç”±ï¼Œfastmcpæä¾›åŸç”Ÿæ”¯æŒ
- **ä¾èµ–**: ä¸»è¦ä¾èµ–ç®€åŒ–ä¸º`fastmcp>=2.10.1`

### å…¼å®¹æ€§
- æ‰€æœ‰ä¸šåŠ¡å·¥å…·åŠŸèƒ½ä¿æŒä¸å˜
- æ‰€æœ‰å®¢æˆ·ç«¯æ¥å£ä¿æŒå…¼å®¹
- ä¼ ç»Ÿä¾èµ–ç§»åŠ¨åˆ°`legacy`å¯é€‰ä¾èµ–ç»„

## ğŸ“š æ›´å¤šèµ„æº

- [FastMCPå®˜æ–¹æ–‡æ¡£](https://github.com/jlowin/fastmcp)
- [MCPåè®®è§„èŒƒ](https://spec.modelcontextprotocol.io/)
- [Claude Desktopé›†æˆæŒ‡å—](https://claude.ai/docs)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueså’ŒPull Requestsï¼

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ 
