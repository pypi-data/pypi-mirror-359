[package]
name = "ultrafast-client"
version = "0.2.3"
authors = ["UltraFast Team <techgopal@example.com>"]
edition = "2021"
description = "A blazingly fast HTTP client for Python, built with Rust and Tokio"
license = "Apache-2.0"
homepage = "https://github.com/techgopal/ultrafast-client"
repository = "https://github.com/techgopal/ultrafast-client"
readme = "README.md"
keywords = ["http", "client", "async", "tokio", "python"]
categories = ["network-programming", "web-programming::http-client", "api-bindings"]

[lib]
name = "ultrafast_client"
crate-type = ["cdylib"]

[dependencies]
# Core Python bindings (upgraded to latest 0.25)
pyo3 = { version = "0.25.1", features = ["extension-module", "abi3-py39"] }
pyo3-async-runtimes = { version = "0.25.0", features = ["tokio-runtime"] }

# Async runtime (updated to latest)
tokio = { version = "1.45.1", features = ["rt-multi-thread", "net", "time", "sync", "macros"] }

# HTTP client (updated to latest)
reqwest = { version = "0.12.20", features = [
    "json",
    "stream",
    "multipart", 
    "cookies",
    "gzip",
    "deflate",
    "blocking",
    "http2",
] }

# WebSocket support (updated to latest)
tokio-tungstenite = "0.27.0"
tungstenite = "0.27.0"

# Serialization (updated to latest)
serde = { version = "1.0.219", features = ["derive"] }
serde_json = "1.0.140"
serde_urlencoded = "0.7.1"

# Async utilities (updated to latest)
futures-util = "0.3.31"

# URL and encoding (updated to latest)
url = "2.5.4"
base64 = "0.22.1"
urlencoding = "2.1.3"

# HTTP types (updated to latest)
http = "1.3.1"

# Utilities (updated to latest)
uuid = { version = "1.17.0", features = ["v4"] }
bytes = "1.10.1"
regex = "1.11.1"
rand = "0.9.1"

# Python integration (kept at 0.20 for compatibility)
pythonize = "0.25.0"

# Logging (updated to latest)
tracing = "0.1.41"
tracing-subscriber = { version = "0.3.19", features = ["env-filter", "json"] }

# Compression (updated to latest)
flate2 = "1.1.2"

# Performance optimizations (updated to latest)
ahash = "0.8.12"
parking_lot = "0.12.4"
once_cell = "1.21.3"
crossbeam = "0.8.4"

# Optional TLS support (updated to latest)
rustls = { version = "0.23.28", optional = true }
rustls-pemfile = { version = "2.2.0", optional = true }

[dev-dependencies]
# Testing (updated to latest)
tokio-test = "0.4.4"
criterion = { version = "0.6.0", features = ["html_reports"] }
pyo3-build-config = "0.20.3"

[features]
default = ["native-tls", "http2-enhanced"]
native-tls = ["reqwest/native-tls", "tokio-tungstenite/native-tls"]
rustls-tls = ["reqwest/rustls-tls", "tokio-tungstenite/rustls-tls-webpki-roots", "rustls", "rustls-pemfile"]

# HTTP Protocol Support
http2-enhanced = []

# Protocol combinations
all-stable = []
all-protocols = []

# Optimized release profile
[profile.release]
opt-level = 3
lto = "fat"
codegen-units = 1
panic = "abort"
overflow-checks = false
debug = false
strip = true

[profile.release-with-debug]
inherits = "release"
debug = true
strip = false

[profile.bench]
inherits = "release"
debug = true
overflow-checks = false

[profile.dev]
opt-level = 0
debug = true
overflow-checks = true

[build-dependencies]
pyo3-build-config = "0.20.3"

[package.metadata.maturin]
python-source = "python"
module-name = "ultrafast_client._ultrafast_client"

[package.metadata.audit]
yanked = "deny"
ignore-dev-dependencies = true

[[package.metadata.audit.advisories]]
vulnerability = "RUSTSEC-*"
severity = "medium"
