<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to use WalT logging system &mdash; WalT 10.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="_static/logo-walt.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=864e5427"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to query &amp; display experiment logs" href="log-show.html" />
    <link rel="prev" title="Managing devices which do not implement WalT network booting" href="unmanaged-devices.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: gray" >

          
          
          <a href="index.html" class="icon icon-home">
            WalT
              <img src="_static/logo-walt.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Admin / Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="admin.html">Admin documentation summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-install.html">WalT server installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-upgrade.html">WalT server upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-network-config.html">WalT server-side network configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-install.html">WalT node installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="switch-install.html">Switch installation in WalT network</a></li>
<li class="toctree-l1"><a class="reference internal" href="client-install.html">WalT client software installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">WalT network structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="registries.html">WalT image registries</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting tips</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">User Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="shells.html">Shell usage notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using nodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="node-ownership.html">Node ownership</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-reboot.html">Rebooting WalT nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-config.html">Updating configuration settings about nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-console.html">Connecting to a node’s serial console</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-cp.html">Transfering files to or from a node</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-save.html">Saving the current OS state of a node</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-expose.html">Exposing the TCP port of a node</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-netsetup.html">Changing network mode for a WalT node</a></li>
<li class="toctree-l1"><a class="reference internal" href="vnode-networks.html">Configuring secondary networks on virtual nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vnode-disks.html">Configuring disks on virtual nodes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using images</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="image-build.html">Building a WalT image from a Dockerfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="image-cp.html">Transfering files to or from a walt image</a></li>
<li class="toctree-l1"><a class="reference internal" href="image-spec-file.html">Writting image spec files</a></li>
<li class="toctree-l1"><a class="reference internal" href="image-from-scratch.html">Creating a WalT image from scratch</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="device-sets.html">Device and node sets: use several devices at once</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-config.html">Updating configuration settings about devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-port-config.html">Viewing and updating switch ports configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-expose.html">Exposing the TCP port of a device</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-netsetup.html">Changing network mode of a WalT node or device</a></li>
<li class="toctree-l1"><a class="reference internal" href="unmanaged-devices.html">Managing devices which do not implement WalT network booting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Recording logs</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to use WalT logging system</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#platform-logs">Platform logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#experiment-logs">Experiment logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-query-display-work-with-experiment-logs">How to query / display / work with experiment logs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="log-show.html">How to query &amp; display experiment logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-wait.html">Synchronizing a script based on expected logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-checkpoint.html">Log checkpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-history.html">Displaying past logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-realtime.html">Displaying logs in realtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-issuers.html">Selecting log issuers</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-format.html">Adapting log display format</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-echo.html"><code class="docutils literal notranslate"><span class="pre">walt-log-echo</span></code> logging tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-cat.html"><code class="docutils literal notranslate"><span class="pre">walt-log-cat</span></code> logging tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-tee.html"><code class="docutils literal notranslate"><span class="pre">walt-log-tee</span></code> logging tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-monitor.html"><code class="docutils literal notranslate"><span class="pre">walt-log-monitor</span></code> logging tool</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scripting.html">Scripting WalT experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-nodes.html">scripting API: node management</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-images.html">scripting API: image management</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-logs.html">scripting API: logs management</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-tools.html">scripting API: miscellaneous tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Web services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="web-server.html">Web server</a></li>
<li class="toctree-l1"><a class="reference internal" href="web-api.html">Using the web API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VPN / distant nodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="vpn.html">How to use WalT built-in VPN and distant nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vpn-security.html">WalT VPN Security notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vpn-http-entrypoint.html">How to setup a WalT VPN HTTP entrypoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="vpn-ssh-entrypoint.html">How to setup a WalT VPN SSH entrypoint</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How it works</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="node-bootup.html">Node bootup procedure</a></li>
<li class="toctree-l1"><a class="reference internal" href="boot-modes.html">Boot modes: network boot and hybrid boot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developer documentation summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-walt-python-packages.html">Repository: walt-python-packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-client.html">Repository: walt-python-packages; walt-client code.</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-server.html">Repository: walt-python-packages; walt-server code.</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-server-db.html">WalT server database</a></li>
<li class="toctree-l1"><a class="reference internal" href="trackexec.html">Repository: walt-python-packages; trackexec tooling.</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="design-notes.html">Scope and design notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="optional-features.html">Optional features of a WalT platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell-completion.html">Shell completion setup (bash and zsh)</a></li>
<li class="toctree-l1"><a class="reference internal" href="compatibility.html">Compatibility notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="new-node-support.html">Adding support for a new node in WalT</a></li>
<li class="toctree-l1"><a class="reference internal" href="packaging.html">Packaging notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="rpi-serial.html">Using the serial port of a Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="g5k.html">Deploying WalT on Grid’5000</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: gray" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">WalT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">How to use WalT logging system</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to-use-walt-logging-system">
<h1>How to use WalT logging system<a class="headerlink" href="#how-to-use-walt-logging-system" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>WalT provides a subsystem to save and query experiment logs. This page
describes how this subsystem works and how to use it.</p>
<p>Let’s start with some basic notions:</p>
<ul class="simple">
<li><p>A <strong>logline</strong> is a line of text transmitted from a node to the
server, and then to any client that would query it.</p></li>
<li><p>A <strong>timestamp</strong> and an <strong>issuer</strong> (the device that emitted it, i.e. a
node or the server) is associated with each logline.</p></li>
<li><p>A <strong>logstream</strong> is a subset of loglines. Logstreams have a name,
which can be used to filter logs easily.</p></li>
</ul>
<p>All loglines and logstreams are saved in a database on the server.</p>
<p>Two kinds of logs exist:</p>
<ul class="simple">
<li><p>Platform-generated logs</p></li>
<li><p>Experiment logs</p></li>
</ul>
</section>
<section id="platform-logs">
<h2>Platform logs<a class="headerlink" href="#platform-logs" title="Link to this heading"></a></h2>
<p>The platform generates log lines by itself when an important event
occurs, or for debugging purpose.</p>
<p>For instance, the following command displays log lines in realtime when
an important event occur:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ walt log show --realtime --platform
</pre></div>
</div>
<p>This other example fetches and displays walt server daemon logs
generated during the 5 last minutes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ walt log show --history -5m: --server
</pre></div>
</div>
</section>
<section id="experiment-logs">
<h2>Experiment logs<a class="headerlink" href="#experiment-logs" title="Link to this heading"></a></h2>
<p>WalT will not generate experiment logs by itself. However, all WalT
nodes provide tools you can use in order to emit loglines while your
experiment is running. For example, you could write an experiment script
<code class="docutils literal notranslate"><span class="pre">experiment1.sh</span></code> such as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

init_exp<span class="o">()</span>
<span class="o">{</span>
<span class="w">    </span><span class="o">[</span>...<span class="o">]</span>
<span class="o">}</span>

measure<span class="o">()</span>
<span class="o">{</span>
<span class="w">    </span><span class="nv">logstream</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nv">measure_index</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="o">[</span>...<span class="o">]</span>
<span class="w">    </span><span class="nv">result</span><span class="o">=[</span>...<span class="o">]</span>
<span class="w">    </span>walt-log-echo<span class="w"> </span><span class="nv">$logstream</span><span class="w"> </span><span class="s2">&quot;measure </span><span class="nv">$measure_index</span><span class="s2"> -&gt; </span><span class="nv">$result</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># init</span>
init_exp
<span class="nv">logstream</span><span class="o">=</span><span class="s2">&quot;exp1-</span><span class="k">$(</span>hostname<span class="k">)</span><span class="s2">&quot;</span>

<span class="c1"># start</span>
walt-log-echo<span class="w"> </span><span class="nv">$logstream</span><span class="w"> </span><span class="s2">&quot;Experiment 1 started.&quot;</span>

<span class="c1"># loop many times for statistical soundness</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>seq<span class="w"> </span><span class="m">1000</span><span class="k">)</span>
<span class="k">do</span>
<span class="w">    </span>measure<span class="w"> </span><span class="nv">$logstream</span><span class="w"> </span><span class="nv">$i</span>
<span class="k">done</span>

<span class="c1"># end</span>
walt-log-echo<span class="w"> </span><span class="nv">$logstream</span><span class="w"> </span><span class="s2">&quot;Experiment 1 ended.&quot;</span>
</pre></div>
</div>
<p>As you may guess, running this script on a node <code class="docutils literal notranslate"><span class="pre">rpi2</span></code> would generate
a logstream called <code class="docutils literal notranslate"><span class="pre">exp1-rpi2</span></code> and made of 1002 loglines.</p>
<p>All WalT nodes provide at least the following tools:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">walt-log-echo</span></code> (see <a class="reference internal" href="log-echo.html"><span class="doc">walt help show log-echo</span></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">walt-log-cat</span></code> (see <a class="reference internal" href="log-cat.html"><span class="doc">walt help show log-cat</span></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">walt-log-tee</span></code> (see <a class="reference internal" href="log-tee.html"><span class="doc">walt help show log-tee</span></a>)</p></li>
</ul>
<p>Do not hesitate to check their respective help page. These tools are
actually copied by the server, before an image is made accessible to
nodes through TFTP and NFS. This ensures that these tools will always be
available on nodes.</p>
<p>Another tool is provided on a subset of WalT images:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">walt-log-monitor</span></code> (see
<a class="reference internal" href="log-monitor.html"><span class="doc">walt help show log-monitor</span></a>)</p></li>
</ul>
<p>This one is not always available because it is based on a python package
and systemd, and some minimal images may not provide python3 or systemd.
See <a class="reference internal" href="log-monitor.html"><span class="doc">walt help show log-monitor</span></a> for installing
it when it is missing.</p>
</section>
<section id="how-to-query-display-work-with-experiment-logs">
<span id="id1"></span><h2>How to query / display / work with experiment logs<a class="headerlink" href="#how-to-query-display-work-with-experiment-logs" title="Link to this heading"></a></h2>
<p>The main entrypoint to display experiment logs is subcommand
<code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">log</span> <span class="pre">show</span></code> (see <a class="reference internal" href="log-show.html"><span class="doc">walt help show log-show</span></a>).</p>
<p>Depending on what you want to achieve, you may get more information in
the following help pages:</p>
<ul class="simple">
<li><p>Retrieving past logs:
<a class="reference internal" href="log-history.html"><span class="doc">walt help show log-history</span></a></p></li>
<li><p>Printing logs in real time:
<a class="reference internal" href="log-realtime.html"><span class="doc">walt help show log-realtime</span></a></p></li>
<li><p>Updating log display format:
<a class="reference internal" href="log-format.html"><span class="doc">walt help show log-format</span></a></p></li>
<li><p>Filtering log issuers:
<a class="reference internal" href="log-issuers.html"><span class="doc">walt help show log-issuers</span></a></p></li>
<li><p>Synchronizing a script based on logs:
<a class="reference internal" href="log-wait.html"><span class="doc">walt help show log-wait</span></a></p></li>
<li><p>Using log checkpoints:
<a class="reference internal" href="log-checkpoint.html"><span class="doc">walt help show log-checkpoint</span></a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="unmanaged-devices.html" class="btn btn-neutral float-left" title="Managing devices which do not implement WalT network booting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="log-show.html" class="btn btn-neutral float-right" title="How to query &amp; display experiment logs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012-2023, Members of the WALT project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>