<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WalT node installation &mdash; WalT 10.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="_static/logo-walt.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=864e5427"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Switch installation in WalT network" href="switch-install.html" />
    <link rel="prev" title="WalT server-side network configuration" href="server-network-config.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: gray" >

          
          
          <a href="index.html" class="icon icon-home">
            WalT
              <img src="_static/logo-walt.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Admin / Installation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="admin.html">Admin documentation summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-install.html">WalT server installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-upgrade.html">WalT server upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-network-config.html">WalT server-side network configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">WalT node installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pc-nodes">PC nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#virtual-nodes">Virtual nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#raspberry-pi-boards">Raspberry Pi boards</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#booting-recent-models">Booting recent models</a></li>
<li class="toctree-l3"><a class="reference internal" href="#booting-older-models-with-a-sd-card">Booting older models with a SD card</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#google-coral-dev-boards">Google Coral Dev Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-identify-and-use-the-new-node">How to identify and use the new node</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="switch-install.html">Switch installation in WalT network</a></li>
<li class="toctree-l1"><a class="reference internal" href="client-install.html">WalT client software installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">WalT network structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="registries.html">WalT image registries</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting tips</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">User Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="shells.html">Shell usage notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using nodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="node-ownership.html">Node ownership</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-reboot.html">Rebooting WalT nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-config.html">Updating configuration settings about nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-console.html">Connecting to a node’s serial console</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-cp.html">Transfering files to or from a node</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-save.html">Saving the current OS state of a node</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-expose.html">Exposing the TCP port of a node</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-netsetup.html">Changing network mode for a WalT node</a></li>
<li class="toctree-l1"><a class="reference internal" href="vnode-networks.html">Configuring secondary networks on virtual nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vnode-disks.html">Configuring disks on virtual nodes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using images</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="image-build.html">Building a WalT image from a Dockerfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="image-cp.html">Transfering files to or from a walt image</a></li>
<li class="toctree-l1"><a class="reference internal" href="image-spec-file.html">Writting image spec files</a></li>
<li class="toctree-l1"><a class="reference internal" href="image-from-scratch.html">Creating a WalT image from scratch</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="device-sets.html">Device and node sets: use several devices at once</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-config.html">Updating configuration settings about devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-port-config.html">Viewing and updating switch ports configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-expose.html">Exposing the TCP port of a device</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-netsetup.html">Changing network mode of a WalT node or device</a></li>
<li class="toctree-l1"><a class="reference internal" href="unmanaged-devices.html">Managing devices which do not implement WalT network booting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Recording logs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="logging.html">How to use WalT logging system</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-show.html">How to query &amp; display experiment logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-wait.html">Synchronizing a script based on expected logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-checkpoint.html">Log checkpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-history.html">Displaying past logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-realtime.html">Displaying logs in realtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-issuers.html">Selecting log issuers</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-format.html">Adapting log display format</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-echo.html"><code class="docutils literal notranslate"><span class="pre">walt-log-echo</span></code> logging tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-cat.html"><code class="docutils literal notranslate"><span class="pre">walt-log-cat</span></code> logging tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-tee.html"><code class="docutils literal notranslate"><span class="pre">walt-log-tee</span></code> logging tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-monitor.html"><code class="docutils literal notranslate"><span class="pre">walt-log-monitor</span></code> logging tool</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scripting.html">Scripting WalT experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-nodes.html">scripting API: node management</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-images.html">scripting API: image management</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-logs.html">scripting API: logs management</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-tools.html">scripting API: miscellaneous tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Web services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="web-server.html">Web server</a></li>
<li class="toctree-l1"><a class="reference internal" href="web-api.html">Using the web API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VPN / distant nodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="vpn.html">How to use WalT built-in VPN and distant nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vpn-security.html">WalT VPN Security notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vpn-http-entrypoint.html">How to setup a WalT VPN HTTP entrypoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="vpn-ssh-entrypoint.html">How to setup a WalT VPN SSH entrypoint</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How it works</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="node-bootup.html">Node bootup procedure</a></li>
<li class="toctree-l1"><a class="reference internal" href="boot-modes.html">Boot modes: network boot and hybrid boot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developer documentation summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-walt-python-packages.html">Repository: walt-python-packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-client.html">Repository: walt-python-packages; walt-client code.</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-server.html">Repository: walt-python-packages; walt-server code.</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-server-db.html">WalT server database</a></li>
<li class="toctree-l1"><a class="reference internal" href="trackexec.html">Repository: walt-python-packages; trackexec tooling.</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="design-notes.html">Scope and design notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="optional-features.html">Optional features of a WalT platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell-completion.html">Shell completion setup (bash and zsh)</a></li>
<li class="toctree-l1"><a class="reference internal" href="compatibility.html">Compatibility notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="new-node-support.html">Adding support for a new node in WalT</a></li>
<li class="toctree-l1"><a class="reference internal" href="packaging.html">Packaging notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="rpi-serial.html">Using the serial port of a Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="g5k.html">Deploying WalT on Grid’5000</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: gray" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">WalT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">WalT node installation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="walt-node-installation">
<h1>WalT node installation<a class="headerlink" href="#walt-node-installation" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>The WALT server exposes the content of walt images to nodes using
netboot-compatible protocols (TFTP and NFS). Thus, WalT nodes can boot
their OS over the network. This means that the walt image is never
transfered as a whole to the node: it remains on the server.</p>
<p>Given this fact, walt nodes just need a network bootloader configured
appropriately.</p>
<p>WalT can handle various kinds of nodes, and users can even add support
for a new kind of node easily. Check-out
<a class="reference internal" href="new-node-support.html"><span class="doc">walt help show new-node-support</span></a> for more
info.</p>
<p>Installation files can be found at
<a class="reference external" href="https://walt-project.liglab.fr/downloads">https://walt-project.liglab.fr/downloads</a>.</p>
<p>The following sections will show how to set up a new node, depending on
its model. Then, last section will explain how walt users can start to
use such a new node.</p>
</section>
<section id="pc-nodes">
<h2>PC nodes<a class="headerlink" href="#pc-nodes" title="Link to this heading"></a></h2>
<p>Any PC can be turned into a walt node.</p>
<p>If the PC supports PXE booting, the procedure is obvious:</p>
<ol class="arabic simple">
<li><p>Connect the PC to the WALT network.</p></li>
<li><p>Select “PXE booting” as the first boot option (by using the
BIOS/firmware screen).</p></li>
</ol>
<p>If not, download image <code class="docutils literal notranslate"><span class="pre">pc-usb.dd.gz</span></code> at
<a class="reference external" href="https://walt-project.liglab.fr/downloads">https://walt-project.liglab.fr/downloads</a>. Flash it to a USB flash drive
(a small one is enough, the image just needs a few tens of megabytes),
using unix tool <code class="docutils literal notranslate"><span class="pre">dd</span></code> or similar. Then:</p>
<ol class="arabic simple">
<li><p>Plug the USB flash drive to the PC.</p></li>
<li><p>Connect the PC to the WALT network.</p></li>
<li><p>Boot on the USB flash drive (by using the BIOS/firmware screen).</p></li>
</ol>
<p>The USB image should be compatible with most BIOS-based and UEFI-based
machines, and old 32-bits PCs, provided the network bootloader can
handle the network card.</p>
</section>
<section id="virtual-nodes">
<h2>Virtual nodes<a class="headerlink" href="#virtual-nodes" title="Link to this heading"></a></h2>
<p>WalT allows you to create virtual nodes. Virtual nodes are actually
<code class="docutils literal notranslate"><span class="pre">kvm</span></code> virtual machines running on the server. When you list nodes,
virtual nodes will be displayed the same as PC nodes, because their
virtual hardware reflects the one of a standard PC.</p>
<p>In order to create a virtual node simply run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ walt node create &lt;node-name&gt;
</pre></div>
</div>
<p>And in order to remove it, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ walt node remove &lt;node-name&gt;
</pre></div>
</div>
</section>
<section id="raspberry-pi-boards">
<h2>Raspberry Pi boards<a class="headerlink" href="#raspberry-pi-boards" title="Link to this heading"></a></h2>
<p>WalT supports the following Raspberry Pi models:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>Recommended PoE splitter</p></th>
<th class="head"><p>SD-card</p></th>
<th class="head"><p>VPN node</p></th>
<th class="head"><p>Setup task</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>B</p></td>
<td><p>external(1)</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>SD-card(2)</p></td>
</tr>
<tr class="row-odd"><td><p>B+</p></td>
<td><p>external(1)</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>SD-card(2)</p></td>
</tr>
<tr class="row-even"><td><p>2B</p></td>
<td><p>external(1)</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>SD-card(2)</p></td>
</tr>
<tr class="row-odd"><td><p>3B</p></td>
<td><p>external(1)</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>SD-card(2)</p></td>
</tr>
<tr class="row-even"><td><p>3B+</p></td>
<td><p>external(1) or official(3)</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
<td><p>None!(4)</p></td>
</tr>
<tr class="row-odd"><td><p>4B</p></td>
<td><p>external(5) or official(3)</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
<td><p>Set boot-order(4)</p></td>
</tr>
<tr class="row-even"><td><p>5B</p></td>
<td><p>external(5) or waveshare(6)</p></td>
<td><p>No</p></td>
<td><p>Yes(7)</p></td>
<td><p>Set boot-order(4)</p></td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ol class="arabic simple">
<li><p>Use a PoE splitter providing micro-USB type B connectivity.</p></li>
<li><p>See “Booting older models with a SD card” below.</p></li>
<li><p>You can purchase the official “Raspberry Pi PoE+ HAT”. It can fit in
the official Rpi 3B+ or 4B cases. However, the integrated fan is a
little noisy (coil whine). We have been aware of defective boards
where this coil whine sound was quite loud. If you receive such a
defective board, you can probably get a warranty replacement.</p></li>
<li><p>See “Booting recent models” below.</p></li>
<li><p>Use a PoE splitter providing USB-C connectivity. Model 5B needs more
power (PoE+ is required for a reliable behavior), especially if you
connect USB peripherals; look for PoE+ compatibility and output power
4A.</p></li>
<li><p>At the time of this writing there is no official PoE HAT for model
5B, but we tested the Waveshare PoE HAT model F successfully. Note
that it is not compatible with the official case.</p></li>
<li><p>See <a class="reference internal" href="vpn.html"><span class="doc">walt help show vpn</span></a>.</p></li>
</ol>
<p>We highly recommend powering Raspberry Pi nodes with PoE. In this case,
and if PoE reboots are allowed on the switch, then walt can
automatically “hard-reboot” (i.e. power-cycle) a board remotely if ever
it stops responding.</p>
<p>The following story highlights the importance of PoE. In an industrial
context, we experienced stability issues with a testbed of 100 Raspberry
Pi boards. Approximately once every 2000 reboots, a board could fail to
boot and stopped at the “rainbow” screen. But this testbed was later
replaced with another one, PoE-powered, so the automatic “hard-reboot”
feature allowed to reach complete reliability.</p>
<section id="booting-recent-models">
<h3>Booting recent models<a class="headerlink" href="#booting-recent-models" title="Link to this heading"></a></h3>
<p>Raspberry Pi 3B+ and newer boards have an advanced firmware that allows
us to bootstrap the network boot procedure directly. So these boards
should be installed without a SD card.</p>
<p>The 3B+ model is the easiest: just remove any SD card, connect the board
to the walt network, power on the board (preferably with PoE), and it
should boot directly as a walt node.</p>
<p>Considering Raspberry Pi 4B and 5B boards, depending on the board
release, the default boot order may or may not include a network boot
attempt. (If it does, then the setup is as easy as the one of the 3B+.)
When connected to a display at bootup, the boot order is displayed on
the diagnosis screen. If it prints “0xf41”, then network boot is missing
(network boot is digit “2”). In this case, you need to boot the board
just once with a SD card containing recovery files for updating the boot
order:</p>
<ol class="arabic simple">
<li><p>Checkout <a class="reference external" href="https://walt-project.liglab.fr/downloads">https://walt-project.liglab.fr/downloads</a> and download
archive <code class="docutils literal notranslate"><span class="pre">rpi-4-sd-recovery.tar.gz</span></code> or <code class="docutils literal notranslate"><span class="pre">rpi-5-sd-recovery.tar.gz</span></code></p></li>
<li><p>Extract and copy files to a SD card formatted the usual way (1 single
partition, FAT32 fileystem)</p></li>
<li><p>Insert this SD card in its slot</p></li>
<li><p>Power on the board and wait until the green LED starts blinking
repeatedly (and if a HDMI display is connected, a plain green screen
is displayed)</p></li>
<li><p>Power off the board and remove the SD card (you can obviously reuse
it for updating the boot order of other boards)</p></li>
<li><p>Connect the board (without the SD card) to the WALT network and power
it on (preferably with PoE); the board will boot as a walt node.</p></li>
</ol>
</section>
<section id="booting-older-models-with-a-sd-card">
<h3>Booting older models with a SD card<a class="headerlink" href="#booting-older-models-with-a-sd-card" title="Link to this heading"></a></h3>
<p>Older models cannot boot from the network directly, so they need a SD
card containing network bootloader files:</p>
<ol class="arabic simple">
<li><p>Download archive <code class="docutils literal notranslate"><span class="pre">rpi-sd-files.tar.gz</span></code> at
<a class="reference external" href="https://walt-project.liglab.fr/downloads">https://walt-project.liglab.fr/downloads</a>.</p></li>
<li><p>Extract and copy files to a SD card formatted the usual way (1 single
partition, FAT32 fileystem).</p></li>
<li><p>Insert this SD card in its slot</p></li>
<li><p>Connect the board to the WALT network and power it on (preferably
with PoE); the board will boot as a walt node.</p></li>
</ol>
<p>The SD card is a fragile part. However, the network booting mechanism
used in walt allows to keep the SD card readonly, which greatly improves
its lifetime.</p>
</section>
</section>
<section id="google-coral-dev-boards">
<h2>Google Coral Dev Boards<a class="headerlink" href="#google-coral-dev-boards" title="Link to this heading"></a></h2>
<p>First, follow the standard startup procedure at
<a class="reference external" href="https://coral.ai/docs/dev-board/get-started">https://coral.ai/docs/dev-board/get-started</a>. Then run the following on
the board (with a proper internet access):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /tmp
$ wget https://walt-project.liglab.fr/files/coral-devb-boot.tar.gz
$ cd /boot
$ mv boot.scr boot.scr.orig
$ tar xfz /tmp/coral-devb-boot.tar.gz
</pre></div>
</div>
<p>You can now connect the board to a WALT network and it will boot as a
WALT node. For PoE, use a PoE splitter providing USB-C connectivity.</p>
</section>
<section id="how-to-identify-and-use-the-new-node">
<h2>How to identify and use the new node<a class="headerlink" href="#how-to-identify-and-use-the-new-node" title="Link to this heading"></a></h2>
<p>When WALT server detects a node for the first time, a log line is
emitted.</p>
<p>Thus, you should be able to identify the new node by checking the logs
as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ walt log show --platform --history -5m:
10:45:49.188 walt-server.platform.devices -&gt; new node name=node-f26782 model=rpi-b [...]
$
</pre></div>
</div>
<p>Important notes:</p>
<ul class="simple">
<li><p>The first time a given model of walt node is connected, the server
has to download a default walt image to handle it, which takes time.</p></li>
<li><p>In this more complex case, the logs will first indicate the new node
is a device of ‘unknown’ type, and once the image is downloaded, it
will be turned into a real walt node.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--platform</span></code> allows to select platform internal logs (as opposed to
experiment logs generated by walt nodes).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--history</span> <span class="pre">-5m:</span></code> allows to select logs issued up to 5 minutes ago
and up to now (you may increase this number if the node was connected
longer ago).</p></li>
</ul>
<p>In this example the log line indicates that the new node has been named
<code class="docutils literal notranslate"><span class="pre">node-f26782</span></code>. The hex chars are taken from the right side of the
node’s mac address. As soon as the node is identified, it is strongly
advised to rename it. A naming scheme such as <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;-&lt;location&gt;-&lt;id&gt;</span></code>
is handy. For instance, considering the node is in room 412:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ walt device rename node-f26782 rpi3bp-412-A
</pre></div>
</div>
<p>The new node first boots a default image, thus it belongs to nobody. It
will be listed as a “free” node when you use <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">node</span> <span class="pre">show</span> <span class="pre">--all</span></code>.
To make this node yours, run <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">node</span> <span class="pre">acquire</span> <span class="pre">&lt;node&gt;</span></code> or let it boot
one of your images by using <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">node</span> <span class="pre">boot</span> <span class="pre">&lt;node&gt;</span> <span class="pre">&lt;image&gt;</span></code> (see
<a class="reference internal" href="node-ownership.html"><span class="doc">walt help show node-ownership</span></a>).</p>
<p>Troubleshooting notes:</p>
<ul class="simple">
<li><p>If ever the node failed to boot over the network (this probably means
the network or the node bootloader is misconfigured), the server
might still detect it but it may not know that this device is a node.
In this case <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">log</span> <span class="pre">show</span></code> will still print a line but mention a
<code class="docutils literal notranslate"><span class="pre">&quot;new</span> <span class="pre">device&quot;</span></code> instead of a <code class="docutils literal notranslate"><span class="pre">&quot;new</span> <span class="pre">node&quot;</span></code>. This node will
obviously not appear when typing <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">node</span> <span class="pre">show</span> <span class="pre">--all</span></code>, but it
will be listed when you use <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">device</span> <span class="pre">show</span></code>. The first time the
node boots correctly, its type will be automatically updated and it
will appear in the output of <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">node</span> <span class="pre">show</span> <span class="pre">--all</span></code>.</p></li>
<li><p>In case of trouble, you can monitor walt service logs on the server,
while connecting the new node, by typing
<code class="docutils literal notranslate"><span class="pre">journalctl</span> <span class="pre">-b</span> <span class="pre">-afu</span> <span class="pre">walt-server</span></code>. Or use a network sniffer (such as
wireshark).</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="server-network-config.html" class="btn btn-neutral float-left" title="WalT server-side network configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="switch-install.html" class="btn btn-neutral float-right" title="Switch installation in WalT network" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012-2023, Members of the WALT project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>