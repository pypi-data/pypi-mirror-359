<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deploying WalT on Grid’5000 &mdash; WalT 10.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="_static/logo-walt.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=864e5427"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Using the serial port of a Raspberry Pi" href="rpi-serial.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: gray" >

          
          
          <a href="index.html" class="icon icon-home">
            WalT
              <img src="_static/logo-walt.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Admin / Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="admin.html">Admin documentation summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-install.html">WalT server installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-upgrade.html">WalT server upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-network-config.html">WalT server-side network configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-install.html">WalT node installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="switch-install.html">Switch installation in WalT network</a></li>
<li class="toctree-l1"><a class="reference internal" href="client-install.html">WalT client software installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">WalT network structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="registries.html">WalT image registries</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting tips</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">User Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="shells.html">Shell usage notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using nodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="node-ownership.html">Node ownership</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-reboot.html">Rebooting WalT nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-config.html">Updating configuration settings about nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-console.html">Connecting to a node’s serial console</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-cp.html">Transfering files to or from a node</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-save.html">Saving the current OS state of a node</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-expose.html">Exposing the TCP port of a node</a></li>
<li class="toctree-l1"><a class="reference internal" href="node-netsetup.html">Changing network mode for a WalT node</a></li>
<li class="toctree-l1"><a class="reference internal" href="vnode-networks.html">Configuring secondary networks on virtual nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vnode-disks.html">Configuring disks on virtual nodes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using images</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="image-build.html">Building a WalT image from a Dockerfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="image-cp.html">Transfering files to or from a walt image</a></li>
<li class="toctree-l1"><a class="reference internal" href="image-spec-file.html">Writting image spec files</a></li>
<li class="toctree-l1"><a class="reference internal" href="image-from-scratch.html">Creating a WalT image from scratch</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="device-sets.html">Device and node sets: use several devices at once</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-config.html">Updating configuration settings about devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-port-config.html">Viewing and updating switch ports configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-expose.html">Exposing the TCP port of a device</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-netsetup.html">Changing network mode of a WalT node or device</a></li>
<li class="toctree-l1"><a class="reference internal" href="unmanaged-devices.html">Managing devices which do not implement WalT network booting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Recording logs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="logging.html">How to use WalT logging system</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-show.html">How to query &amp; display experiment logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-wait.html">Synchronizing a script based on expected logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-checkpoint.html">Log checkpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-history.html">Displaying past logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-realtime.html">Displaying logs in realtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-issuers.html">Selecting log issuers</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-format.html">Adapting log display format</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-echo.html"><code class="docutils literal notranslate"><span class="pre">walt-log-echo</span></code> logging tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-cat.html"><code class="docutils literal notranslate"><span class="pre">walt-log-cat</span></code> logging tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-tee.html"><code class="docutils literal notranslate"><span class="pre">walt-log-tee</span></code> logging tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-monitor.html"><code class="docutils literal notranslate"><span class="pre">walt-log-monitor</span></code> logging tool</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scripting.html">Scripting WalT experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-nodes.html">scripting API: node management</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-images.html">scripting API: image management</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-logs.html">scripting API: logs management</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting-tools.html">scripting API: miscellaneous tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Web services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="web-server.html">Web server</a></li>
<li class="toctree-l1"><a class="reference internal" href="web-api.html">Using the web API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VPN / distant nodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="vpn.html">How to use WalT built-in VPN and distant nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vpn-security.html">WalT VPN Security notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vpn-http-entrypoint.html">How to setup a WalT VPN HTTP entrypoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="vpn-ssh-entrypoint.html">How to setup a WalT VPN SSH entrypoint</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How it works</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="node-bootup.html">Node bootup procedure</a></li>
<li class="toctree-l1"><a class="reference internal" href="boot-modes.html">Boot modes: network boot and hybrid boot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developer documentation summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-walt-python-packages.html">Repository: walt-python-packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-client.html">Repository: walt-python-packages; walt-client code.</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-server.html">Repository: walt-python-packages; walt-server code.</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-server-db.html">WalT server database</a></li>
<li class="toctree-l1"><a class="reference internal" href="trackexec.html">Repository: walt-python-packages; trackexec tooling.</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other topics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="design-notes.html">Scope and design notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="optional-features.html">Optional features of a WalT platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell-completion.html">Shell completion setup (bash and zsh)</a></li>
<li class="toctree-l1"><a class="reference internal" href="compatibility.html">Compatibility notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="new-node-support.html">Adding support for a new node in WalT</a></li>
<li class="toctree-l1"><a class="reference internal" href="packaging.html">Packaging notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="rpi-serial.html">Using the serial port of a Raspberry Pi</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Deploying WalT on Grid’5000</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="#benefits">Benefits</a></li>
<li class="toctree-l2"><a class="reference internal" href="#limits">Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: gray" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">WalT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Deploying WalT on Grid’5000</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="deploying-walt-on-grid-5000">
<h1>Deploying WalT on Grid’5000<a class="headerlink" href="#deploying-walt-on-grid-5000" title="Link to this heading"></a></h1>
<p><a class="reference external" href="https://www.grid5000.fr">Grid-5000</a>, sometimes abbreviated G5K, is a
large-scale academic testbed made of server-class nodes and spanning
over 8 cities in France.</p>
<p>By installing the walt-client package with its <code class="docutils literal notranslate"><span class="pre">g5k</span></code> plugin on one of
the G5K front-end machines, users can easily deploy a WalT platform over
one or several Grid-5000 sites.</p>
<p>A terminal screen record showing usage of WalT on Grid’5000 is available
at: <a class="reference external" href="https://asciinema.org/a/414589">https://asciinema.org/a/414589</a></p>
<section id="how-it-works">
<h2>How it works<a class="headerlink" href="#how-it-works" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">g5k</span> <span class="pre">deploy</span></code> command first reserves G5K nodes and a virtual
LAN (VLAN) according to the criteria specified by the user. The reserved
VLAN will be used as the WalT platform network. One of the G5K nodes
equipped with 2 or more ethernet interfaces is setup as a WalT server.
Its first network interface remains in the default VLAN for proper
communication with the <code class="docutils literal notranslate"><span class="pre">walt</span></code> client tool. The secondary interface is
attached to the WalT network VLAN. All other G5K nodes become WalT
nodes. Their first network interface is attached to the WalT network
VLAN.</p>
</section>
<section id="benefits">
<h2>Benefits<a class="headerlink" href="#benefits" title="Link to this heading"></a></h2>
<p>This WalT-on-G5K feature allows:</p>
<ul class="simple">
<li><p>to experiment WalT usage without having to install a WalT platform;</p></li>
<li><p>to run WalT experiments on a large number of nodes.</p></li>
</ul>
</section>
<section id="limits">
<h2>Limits<a class="headerlink" href="#limits" title="Link to this heading"></a></h2>
<p>You must have a Grid’5000 account to be able to use this feature.
Compared to the remote access provided by such a public platform, a WalT
platform installed locally is more flexible and eases low level
debugging steps since users have physical access to nodes and network
equipment. Since the G5K platform is open to many users, one must also
follow resource reservation and usage restrictions
(<a class="reference external" href="https://www.grid5000.fr/w/Grid5000:UsagePolicy">https://www.grid5000.fr/w/Grid5000:UsagePolicy</a>). The plugin currently
only manages x86 G5K nodes, thus WalT-on-G5K users are restricted to
this node architecture. WalT-on-G5K relies on some rarely used G5K
features, thus deployment failures are not so rare. Most notably,
multi-site deployments rely on the establishment of a virtual LAN
spanning over the G5K sites, which involves dynamic configuration of G5K
network switches, a G5K feature which fails from time to time.</p>
</section>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Link to this heading"></a></h2>
<p>Connect to one of the G5K front-ends, and install the walt-client
package with its <code class="docutils literal notranslate"><span class="pre">g5k</span></code> plugin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ssh grenoble.g5k
[...]
eduble@fgrenoble:~$ pip3 install walt-client[g5k]
[...]
eduble@fgrenoble:~$
</pre></div>
</div>
<p>This will install the software in <code class="docutils literal notranslate"><span class="pre">$HOME/.local</span></code>. If not done yet, you
should update your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> variable accordingly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>eduble@fgrenoble:~$ echo &#39;PATH=$PATH:$HOME/.local/bin&#39; &gt;&gt; .bash_profile
eduble@fgrenoble:~$ source .bash_profile
</pre></div>
</div>
<p>You are now ready to use WalT with the G5K plugin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>eduble@fgrenoble:~$ walt
</pre></div>
</div>
<p>Optionally, you can also set up bash autocompletion for the <code class="docutils literal notranslate"><span class="pre">walt</span></code>
tool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>eduble@fgrenoble:~$ mkdir -p $HOME/.local/share/bash-completion/completions
eduble@fgrenoble:~$ walt advanced dump-bash-autocomplete &gt; \
                    $HOME/.local/share/bash-completion/completions/walt
</pre></div>
</div>
<p>Then you have to log out and log in again to reload these completion
settings.</p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p>The G5K plugin adds a set of sub-commands to <code class="docutils literal notranslate"><span class="pre">walt</span></code> grouped in the
<code class="docutils literal notranslate"><span class="pre">g5k</span></code> category. You can type <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">g5k</span></code> to list them.</p>
<p>The main sub-command is <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">g5k</span> <span class="pre">deploy</span></code>. When run without an
argument, it starts an interactive command-line interface for specifying
WalT platform deployment parameters: in which G5K sites should the WalT
server and nodes be reserved, what should be the duration of the
reservation, etc. Then the deployment starts.</p>
<p>The sub-command <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">g5k</span> <span class="pre">wait</span></code> is useful to follow the deployment
steps. It returns when the WalT platform is ready. Deployments usually
take approximately 10min.</p>
<p>Once the WalT platform is ready, you can start to use the other
sub-command categories (e.g. <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">image</span> <span class="pre">show</span></code>, <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">node</span> <span class="pre">show</span></code>,
<code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">node</span> <span class="pre">shell</span></code>, etc.) as you would with any regular WalT platform.</p>
<p>In order to ease restarting the same deployment, the user has the
possibility to save the selected deployment parameters by giving a name
to a deployment “recipe”. Such a saved recipe can be re-deployed by
using <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">g5k</span> <span class="pre">deploy</span> <span class="pre">&lt;recipe-name&gt;</span></code>.</p>
<p>The sub-command <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">g5k</span> <span class="pre">info</span></code> allows to display the status of the
current or last deployment. The sub-command <code class="docutils literal notranslate"><span class="pre">walt</span> <span class="pre">g5k</span> <span class="pre">release</span></code> allows
to discard the current WalT deployment and associated resources before
the end of the G5K reservation.</p>
<p>The other sub-commands provide basic management of deployment recipes.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rpi-serial.html" class="btn btn-neutral float-left" title="Using the serial port of a Raspberry Pi" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012-2023, Members of the WALT project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>